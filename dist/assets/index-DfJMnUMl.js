(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(u){if(u.ep)return;u.ep=!0;const c=s(u);fetch(u.href,c)}})();function wm(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function _m(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var n=l.default;if(typeof n=="function"){var s=function o(){var u=!1;try{u=this instanceof o}catch{}return u?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(l).forEach(function(o){var u=Object.getOwnPropertyDescriptor(l,o);Object.defineProperty(s,o,u.get?u:{enumerable:!0,get:function(){return l[o]}})}),s}var ml={exports:{}},Bs={},gl={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd;function jm(){if(Kd)return be;Kd=1;var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function S(x){return x===null||typeof x!="object"?null:(x=w&&x[w]||x["@@iterator"],typeof x=="function"?x:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function j(x,R,G){this.props=x,this.context=R,this.refs=A,this.updater=G||I}j.prototype.isReactComponent={},j.prototype.setState=function(x,R){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,R,"setState")},j.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function P(){}P.prototype=j.prototype;function M(x,R,G){this.props=x,this.context=R,this.refs=A,this.updater=G||I}var C=M.prototype=new P;C.constructor=M,E(C,j.prototype),C.isPureReactComponent=!0;var F=Array.isArray,Z=Object.prototype.hasOwnProperty,B={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ge(x,R,G){var N,z={},Y=null,he=null;if(R!=null)for(N in R.ref!==void 0&&(he=R.ref),R.key!==void 0&&(Y=""+R.key),R)Z.call(R,N)&&!q.hasOwnProperty(N)&&(z[N]=R[N]);var ve=arguments.length-2;if(ve===1)z.children=G;else if(1<ve){for(var U=Array(ve),te=0;te<ve;te++)U[te]=arguments[te+2];z.children=U}if(x&&x.defaultProps)for(N in ve=x.defaultProps,ve)z[N]===void 0&&(z[N]=ve[N]);return{$$typeof:l,type:x,key:Y,ref:he,props:z,_owner:B.current}}function we(x,R){return{$$typeof:l,type:x.type,key:R,ref:x.ref,props:x.props,_owner:x._owner}}function W(x){return typeof x=="object"&&x!==null&&x.$$typeof===l}function D(x){var R={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(G){return R[G]})}var H=/\/+/g;function se(x,R){return typeof x=="object"&&x!==null&&x.key!=null?D(""+x.key):R.toString(36)}function Q(x,R,G,N,z){var Y=typeof x;(Y==="undefined"||Y==="boolean")&&(x=null);var he=!1;if(x===null)he=!0;else switch(Y){case"string":case"number":he=!0;break;case"object":switch(x.$$typeof){case l:case n:he=!0}}if(he)return he=x,z=z(he),x=N===""?"."+se(he,0):N,F(z)?(G="",x!=null&&(G=x.replace(H,"$&/")+"/"),Q(z,R,G,"",function(te){return te})):z!=null&&(W(z)&&(z=we(z,G+(!z.key||he&&he.key===z.key?"":(""+z.key).replace(H,"$&/")+"/")+x)),R.push(z)),1;if(he=0,N=N===""?".":N+":",F(x))for(var ve=0;ve<x.length;ve++){Y=x[ve];var U=N+se(Y,ve);he+=Q(Y,R,G,U,z)}else if(U=S(x),typeof U=="function")for(x=U.call(x),ve=0;!(Y=x.next()).done;)Y=Y.value,U=N+se(Y,ve++),he+=Q(Y,R,G,U,z);else if(Y==="object")throw R=String(x),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return he}function fe(x,R,G){if(x==null)return x;var N=[],z=0;return Q(x,N,"","",function(Y){return R.call(G,Y,z++)}),N}function ke(x){if(x._status===-1){var R=x._result;R=R(),R.then(function(G){(x._status===0||x._status===-1)&&(x._status=1,x._result=G)},function(G){(x._status===0||x._status===-1)&&(x._status=2,x._result=G)}),x._status===-1&&(x._status=0,x._result=R)}if(x._status===1)return x._result.default;throw x._result}var je={current:null},re={transition:null},oe={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:re,ReactCurrentOwner:B};function ne(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:fe,forEach:function(x,R,G){fe(x,function(){R.apply(this,arguments)},G)},count:function(x){var R=0;return fe(x,function(){R++}),R},toArray:function(x){return fe(x,function(R){return R})||[]},only:function(x){if(!W(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},be.Component=j,be.Fragment=s,be.Profiler=u,be.PureComponent=M,be.StrictMode=o,be.Suspense=p,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,be.act=ne,be.cloneElement=function(x,R,G){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var N=E({},x.props),z=x.key,Y=x.ref,he=x._owner;if(R!=null){if(R.ref!==void 0&&(Y=R.ref,he=B.current),R.key!==void 0&&(z=""+R.key),x.type&&x.type.defaultProps)var ve=x.type.defaultProps;for(U in R)Z.call(R,U)&&!q.hasOwnProperty(U)&&(N[U]=R[U]===void 0&&ve!==void 0?ve[U]:R[U])}var U=arguments.length-2;if(U===1)N.children=G;else if(1<U){ve=Array(U);for(var te=0;te<U;te++)ve[te]=arguments[te+2];N.children=ve}return{$$typeof:l,type:x.type,key:z,ref:Y,props:N,_owner:he}},be.createContext=function(x){return x={$$typeof:h,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:c,_context:x},x.Consumer=x},be.createElement=ge,be.createFactory=function(x){var R=ge.bind(null,x);return R.type=x,R},be.createRef=function(){return{current:null}},be.forwardRef=function(x){return{$$typeof:m,render:x}},be.isValidElement=W,be.lazy=function(x){return{$$typeof:v,_payload:{_status:-1,_result:x},_init:ke}},be.memo=function(x,R){return{$$typeof:y,type:x,compare:R===void 0?null:R}},be.startTransition=function(x){var R=re.transition;re.transition={};try{x()}finally{re.transition=R}},be.unstable_act=ne,be.useCallback=function(x,R){return je.current.useCallback(x,R)},be.useContext=function(x){return je.current.useContext(x)},be.useDebugValue=function(){},be.useDeferredValue=function(x){return je.current.useDeferredValue(x)},be.useEffect=function(x,R){return je.current.useEffect(x,R)},be.useId=function(){return je.current.useId()},be.useImperativeHandle=function(x,R,G){return je.current.useImperativeHandle(x,R,G)},be.useInsertionEffect=function(x,R){return je.current.useInsertionEffect(x,R)},be.useLayoutEffect=function(x,R){return je.current.useLayoutEffect(x,R)},be.useMemo=function(x,R){return je.current.useMemo(x,R)},be.useReducer=function(x,R,G){return je.current.useReducer(x,R,G)},be.useRef=function(x){return je.current.useRef(x)},be.useState=function(x){return je.current.useState(x)},be.useSyncExternalStore=function(x,R,G){return je.current.useSyncExternalStore(x,R,G)},be.useTransition=function(){return je.current.useTransition()},be.version="18.3.1",be}var Gd;function Hl(){return Gd||(Gd=1,gl.exports=jm()),gl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd;function km(){if(Jd)return Bs;Jd=1;var l=Hl(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(m,p,y){var v,w={},S=null,I=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(I=p.ref);for(v in p)o.call(p,v)&&!c.hasOwnProperty(v)&&(w[v]=p[v]);if(m&&m.defaultProps)for(v in p=m.defaultProps,p)w[v]===void 0&&(w[v]=p[v]);return{$$typeof:n,type:m,key:S,ref:I,props:w,_owner:u.current}}return Bs.Fragment=s,Bs.jsx=h,Bs.jsxs=h,Bs}var Qd;function bm(){return Qd||(Qd=1,ml.exports=km()),ml.exports}var i=bm(),k=Hl(),hi={},yl={exports:{}},mt={},vl={exports:{}},xl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd;function Sm(){return Yd||(Yd=1,(function(l){function n(re,oe){var ne=re.length;re.push(oe);e:for(;0<ne;){var x=ne-1>>>1,R=re[x];if(0<u(R,oe))re[x]=oe,re[ne]=R,ne=x;else break e}}function s(re){return re.length===0?null:re[0]}function o(re){if(re.length===0)return null;var oe=re[0],ne=re.pop();if(ne!==oe){re[0]=ne;e:for(var x=0,R=re.length,G=R>>>1;x<G;){var N=2*(x+1)-1,z=re[N],Y=N+1,he=re[Y];if(0>u(z,ne))Y<R&&0>u(he,z)?(re[x]=he,re[Y]=ne,x=Y):(re[x]=z,re[N]=ne,x=N);else if(Y<R&&0>u(he,ne))re[x]=he,re[Y]=ne,x=Y;else break e}}return oe}function u(re,oe){var ne=re.sortIndex-oe.sortIndex;return ne!==0?ne:re.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;l.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();l.unstable_now=function(){return h.now()-m}}var p=[],y=[],v=1,w=null,S=3,I=!1,E=!1,A=!1,j=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(re){for(var oe=s(y);oe!==null;){if(oe.callback===null)o(y);else if(oe.startTime<=re)o(y),oe.sortIndex=oe.expirationTime,n(p,oe);else break;oe=s(y)}}function F(re){if(A=!1,C(re),!E)if(s(p)!==null)E=!0,ke(Z);else{var oe=s(y);oe!==null&&je(F,oe.startTime-re)}}function Z(re,oe){E=!1,A&&(A=!1,P(ge),ge=-1),I=!0;var ne=S;try{for(C(oe),w=s(p);w!==null&&(!(w.expirationTime>oe)||re&&!D());){var x=w.callback;if(typeof x=="function"){w.callback=null,S=w.priorityLevel;var R=x(w.expirationTime<=oe);oe=l.unstable_now(),typeof R=="function"?w.callback=R:w===s(p)&&o(p),C(oe)}else o(p);w=s(p)}if(w!==null)var G=!0;else{var N=s(y);N!==null&&je(F,N.startTime-oe),G=!1}return G}finally{w=null,S=ne,I=!1}}var B=!1,q=null,ge=-1,we=5,W=-1;function D(){return!(l.unstable_now()-W<we)}function H(){if(q!==null){var re=l.unstable_now();W=re;var oe=!0;try{oe=q(!0,re)}finally{oe?se():(B=!1,q=null)}}else B=!1}var se;if(typeof M=="function")se=function(){M(H)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,fe=Q.port2;Q.port1.onmessage=H,se=function(){fe.postMessage(null)}}else se=function(){j(H,0)};function ke(re){q=re,B||(B=!0,se())}function je(re,oe){ge=j(function(){re(l.unstable_now())},oe)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(re){re.callback=null},l.unstable_continueExecution=function(){E||I||(E=!0,ke(Z))},l.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<re?Math.floor(1e3/re):5},l.unstable_getCurrentPriorityLevel=function(){return S},l.unstable_getFirstCallbackNode=function(){return s(p)},l.unstable_next=function(re){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var ne=S;S=oe;try{return re()}finally{S=ne}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(re,oe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ne=S;S=re;try{return oe()}finally{S=ne}},l.unstable_scheduleCallback=function(re,oe,ne){var x=l.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?x+ne:x):ne=x,re){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=ne+R,re={id:v++,callback:oe,priorityLevel:re,startTime:ne,expirationTime:R,sortIndex:-1},ne>x?(re.sortIndex=ne,n(y,re),s(p)===null&&re===s(y)&&(A?(P(ge),ge=-1):A=!0,je(F,ne-x))):(re.sortIndex=R,n(p,re),E||I||(E=!0,ke(Z))),re},l.unstable_shouldYield=D,l.unstable_wrapCallback=function(re){var oe=S;return function(){var ne=S;S=oe;try{return re.apply(this,arguments)}finally{S=ne}}}})(xl)),xl}var Xd;function Nm(){return Xd||(Xd=1,vl.exports=Sm()),vl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd;function Em(){if(Zd)return mt;Zd=1;var l=Hl(),n=Nm();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function S(e){return p.call(w,e)?!0:p.call(v,e)?!1:y.test(e)?w[e]=!0:(v[e]=!0,!1)}function I(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E(e,t,r,a){if(t===null||typeof t>"u"||I(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function A(e,t,r,a,d,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){j[e]=new A(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];j[t]=new A(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){j[e]=new A(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){j[e]=new A(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){j[e]=new A(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){j[e]=new A(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){j[e]=new A(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){j[e]=new A(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){j[e]=new A(e,5,!1,e.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(P,M);j[t]=new A(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(P,M);j[t]=new A(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(P,M);j[t]=new A(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){j[e]=new A(e,1,!1,e.toLowerCase(),null,!1,!1)}),j.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){j[e]=new A(e,1,!1,e.toLowerCase(),null,!0,!0)});function C(e,t,r,a){var d=j.hasOwnProperty(t)?j[t]:null;(d!==null?d.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E(t,r,d,a)&&(r=null),a||d===null?S(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,a=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var F=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),B=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),D=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),re=Symbol.iterator;function oe(e){return e===null||typeof e!="object"?null:(e=re&&e[re]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Object.assign,x;function R(e){if(x===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);x=t&&t[1]||""}return`
`+x+e}var G=!1;function N(e,t){if(!e||G)return"";G=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch($){var a=$}Reflect.construct(e,[],t)}else{try{t.call()}catch($){a=$}e.call(t.prototype)}else{try{throw Error()}catch($){a=$}e()}}catch($){if($&&a&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),f=a.stack.split(`
`),g=d.length-1,_=f.length-1;1<=g&&0<=_&&d[g]!==f[_];)_--;for(;1<=g&&0<=_;g--,_--)if(d[g]!==f[_]){if(g!==1||_!==1)do if(g--,_--,0>_||d[g]!==f[_]){var b=`
`+d[g].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=g&&0<=_);break}}}finally{G=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?R(e):""}function z(e){switch(e.tag){case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return e=N(e.type,!1),e;case 11:return e=N(e.type.render,!1),e;case 1:return e=N(e.type,!0),e;default:return""}}function Y(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case B:return"Portal";case we:return"Profiler";case ge:return"StrictMode";case se:return"Suspense";case Q:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case D:return(e.displayName||"Context")+".Consumer";case W:return(e._context.displayName||"Context")+".Provider";case H:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return t=e.displayName||null,t!==null?t:Y(e.type)||"Memo";case ke:t=e._payload,e=e._init;try{return Y(e(t))}catch{}}return null}function he(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y(t);case 8:return t===ge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ve(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function U(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function te(e){var t=U(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ie(e){e._valueTracker||(e._valueTracker=te(e))}function Ne(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=U(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Fe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lt(e,t){var r=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function qt(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=ve(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dn(e,t){t=t.checked,t!=null&&C(e,"checked",t,!1)}function Mr(e,t){dn(e,t);var r=ve(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fr(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fr(e,t.type,ve(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function na(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fr(e,t,r){(t!=="number"||Fe(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var pr=Array.isArray;function Xt(e,t,r,a){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&a&&(e[r].defaultSelected=!0)}else{for(r=""+ve(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,a&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function ns(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ss(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(pr(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ve(r)}}function sa(e,t){var r=ve(t.value),a=ve(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function Zt(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ut(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function as(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ut(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mr,zr=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mr=mr||document.createElement("div"),mr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var st={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},at=["Webkit","ms","Moz","O"];Object.keys(st).forEach(function(e){at.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),st[t]=st[e]})});function Ht(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||st.hasOwnProperty(e)&&st[e]?(""+t).trim():t+"px"}function bt(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,d=Ht(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,d):e[r]=d}}var Br=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wr(e,t){if(t){if(Br[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function xt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var er=null;function hn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qr=null,fn=null,pn=null;function cu(e){if(e=Es(e)){if(typeof qr!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Ea(t),qr(e.stateNode,e.type,t))}}function du(e){fn?pn?pn.push(e):pn=[e]:fn=e}function hu(){if(fn){var e=fn,t=pn;if(pn=fn=null,cu(e),t)for(e=0;e<t.length;e++)cu(t[e])}}function fu(e,t){return e(t)}function pu(){}var Ri=!1;function mu(e,t,r){if(Ri)return e(t,r);Ri=!0;try{return fu(e,t,r)}finally{Ri=!1,(fn!==null||pn!==null)&&(pu(),hu())}}function is(e,t){var r=e.stateNode;if(r===null)return null;var a=Ea(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var Li=!1;if(m)try{var os={};Object.defineProperty(os,"passive",{get:function(){Li=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Li=!1}function Nf(e,t,r,a,d,f,g,_,b){var $=Array.prototype.slice.call(arguments,3);try{t.apply(r,$)}catch(K){this.onError(K)}}var ls=!1,aa=null,ia=!1,Ii=null,Ef={onError:function(e){ls=!0,aa=e}};function Cf(e,t,r,a,d,f,g,_,b){ls=!1,aa=null,Nf.apply(Ef,arguments)}function Tf(e,t,r,a,d,f,g,_,b){if(Cf.apply(this,arguments),ls){if(ls){var $=aa;ls=!1,aa=null}else throw Error(s(198));ia||(ia=!0,Ii=$)}}function Hr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yu(e){if(Hr(e)!==e)throw Error(s(188))}function Pf(e){var t=e.alternate;if(!t){if(t=Hr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,a=t;;){var d=r.return;if(d===null)break;var f=d.alternate;if(f===null){if(a=d.return,a!==null){r=a;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===r)return yu(d),e;if(f===a)return yu(d),t;f=f.sibling}throw Error(s(188))}if(r.return!==a.return)r=d,a=f;else{for(var g=!1,_=d.child;_;){if(_===r){g=!0,r=d,a=f;break}if(_===a){g=!0,a=d,r=f;break}_=_.sibling}if(!g){for(_=f.child;_;){if(_===r){g=!0,r=f,a=d;break}if(_===a){g=!0,a=f,r=d;break}_=_.sibling}if(!g)throw Error(s(189))}}if(r.alternate!==a)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function vu(e){return e=Pf(e),e!==null?xu(e):null}function xu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xu(e);if(t!==null)return t;e=e.sibling}return null}var wu=n.unstable_scheduleCallback,_u=n.unstable_cancelCallback,Rf=n.unstable_shouldYield,Lf=n.unstable_requestPaint,ze=n.unstable_now,If=n.unstable_getCurrentPriorityLevel,Di=n.unstable_ImmediatePriority,ju=n.unstable_UserBlockingPriority,oa=n.unstable_NormalPriority,Df=n.unstable_LowPriority,ku=n.unstable_IdlePriority,la=null,Vt=null;function Of(e){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(la,e,void 0,(e.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:Uf,Af=Math.log,$f=Math.LN2;function Uf(e){return e>>>=0,e===0?32:31-(Af(e)/$f|0)|0}var ua=64,ca=4194304;function us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function da(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,d=e.suspendedLanes,f=e.pingedLanes,g=r&268435455;if(g!==0){var _=g&~d;_!==0?a=us(_):(f&=g,f!==0&&(a=us(f)))}else g=r&~d,g!==0?a=us(g):f!==0&&(a=us(f));if(a===0)return 0;if(t!==0&&t!==a&&(t&d)===0&&(d=a&-a,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((a&4)!==0&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Rt(t),d=1<<r,a|=e[r],t&=~d;return a}function Mf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ff(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Rt(f),_=1<<g,b=d[g];b===-1?((_&r)===0||(_&a)!==0)&&(d[g]=Mf(_,t)):b<=t&&(e.expiredLanes|=_),f&=~_}}function Oi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bu(){var e=ua;return ua<<=1,(ua&4194240)===0&&(ua=64),e}function Ai(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function cs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rt(t),e[t]=r}function zf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-Rt(r),f=1<<d;t[d]=0,a[d]=-1,e[d]=-1,r&=~f}}function $i(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Rt(r),d=1<<a;d&t|e[a]&t&&(e[a]|=t),r&=~d}}var Pe=0;function Su(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Nu,Ui,Eu,Cu,Tu,Mi=!1,ha=[],gr=null,yr=null,vr=null,ds=new Map,hs=new Map,xr=[],Bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pu(e,t){switch(e){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":ds.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(t.pointerId)}}function fs(e,t,r,a,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:f,targetContainers:[d]},t!==null&&(t=Es(t),t!==null&&Ui(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Wf(e,t,r,a,d){switch(t){case"focusin":return gr=fs(gr,e,t,r,a,d),!0;case"dragenter":return yr=fs(yr,e,t,r,a,d),!0;case"mouseover":return vr=fs(vr,e,t,r,a,d),!0;case"pointerover":var f=d.pointerId;return ds.set(f,fs(ds.get(f)||null,e,t,r,a,d)),!0;case"gotpointercapture":return f=d.pointerId,hs.set(f,fs(hs.get(f)||null,e,t,r,a,d)),!0}return!1}function Ru(e){var t=Vr(e.target);if(t!==null){var r=Hr(t);if(r!==null){if(t=r.tag,t===13){if(t=gu(r),t!==null){e.blockedOn=t,Tu(e.priority,function(){Eu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=zi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);er=a,r.target.dispatchEvent(a),er=null}else return t=Es(r),t!==null&&Ui(t),e.blockedOn=r,!1;t.shift()}return!0}function Lu(e,t,r){fa(e)&&r.delete(t)}function qf(){Mi=!1,gr!==null&&fa(gr)&&(gr=null),yr!==null&&fa(yr)&&(yr=null),vr!==null&&fa(vr)&&(vr=null),ds.forEach(Lu),hs.forEach(Lu)}function ps(e,t){e.blockedOn===t&&(e.blockedOn=null,Mi||(Mi=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qf)))}function ms(e){function t(d){return ps(d,e)}if(0<ha.length){ps(ha[0],e);for(var r=1;r<ha.length;r++){var a=ha[r];a.blockedOn===e&&(a.blockedOn=null)}}for(gr!==null&&ps(gr,e),yr!==null&&ps(yr,e),vr!==null&&ps(vr,e),ds.forEach(t),hs.forEach(t),r=0;r<xr.length;r++)a=xr[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<xr.length&&(r=xr[0],r.blockedOn===null);)Ru(r),r.blockedOn===null&&xr.shift()}var mn=F.ReactCurrentBatchConfig,pa=!0;function Hf(e,t,r,a){var d=Pe,f=mn.transition;mn.transition=null;try{Pe=1,Fi(e,t,r,a)}finally{Pe=d,mn.transition=f}}function Vf(e,t,r,a){var d=Pe,f=mn.transition;mn.transition=null;try{Pe=4,Fi(e,t,r,a)}finally{Pe=d,mn.transition=f}}function Fi(e,t,r,a){if(pa){var d=zi(e,t,r,a);if(d===null)so(e,t,a,ma,r),Pu(e,a);else if(Wf(d,e,t,r,a))a.stopPropagation();else if(Pu(e,a),t&4&&-1<Bf.indexOf(e)){for(;d!==null;){var f=Es(d);if(f!==null&&Nu(f),f=zi(e,t,r,a),f===null&&so(e,t,a,ma,r),f===d)break;d=f}d!==null&&a.stopPropagation()}else so(e,t,a,null,r)}}var ma=null;function zi(e,t,r,a){if(ma=null,e=hn(a),e=Vr(e),e!==null)if(t=Hr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ma=e,null}function Iu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(If()){case Di:return 1;case ju:return 4;case oa:case Df:return 16;case ku:return 536870912;default:return 16}default:return 16}}var wr=null,Bi=null,ga=null;function Du(){if(ga)return ga;var e,t=Bi,r=t.length,a,d="value"in wr?wr.value:wr.textContent,f=d.length;for(e=0;e<r&&t[e]===d[e];e++);var g=r-e;for(a=1;a<=g&&t[r-a]===d[f-a];a++);return ga=d.slice(e,1<a?1-a:void 0)}function ya(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function va(){return!0}function Ou(){return!1}function wt(e){function t(r,a,d,f,g){this._reactName=r,this._targetInst=d,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(r=e[_],this[_]=r?r(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?va:Ou,this.isPropagationStopped=Ou,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=va)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=va)},persist:function(){},isPersistent:va}),t}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wi=wt(gn),gs=ne({},gn,{view:0,detail:0}),Kf=wt(gs),qi,Hi,ys,xa=ne({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ki,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ys&&(ys&&e.type==="mousemove"?(qi=e.screenX-ys.screenX,Hi=e.screenY-ys.screenY):Hi=qi=0,ys=e),qi)},movementY:function(e){return"movementY"in e?e.movementY:Hi}}),Au=wt(xa),Gf=ne({},xa,{dataTransfer:0}),Jf=wt(Gf),Qf=ne({},gs,{relatedTarget:0}),Vi=wt(Qf),Yf=ne({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Xf=wt(Yf),Zf=ne({},gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ep=wt(Zf),tp=ne({},gn,{data:0}),$u=wt(tp),rp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},np={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ap(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sp[e])?!!t[e]:!1}function Ki(){return ap}var ip=ne({},gs,{key:function(e){if(e.key){var t=rp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ya(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?np[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ki,charCode:function(e){return e.type==="keypress"?ya(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ya(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),op=wt(ip),lp=ne({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uu=wt(lp),up=ne({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ki}),cp=wt(up),dp=ne({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),hp=wt(dp),fp=ne({},xa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pp=wt(fp),mp=[9,13,27,32],Gi=m&&"CompositionEvent"in window,vs=null;m&&"documentMode"in document&&(vs=document.documentMode);var gp=m&&"TextEvent"in window&&!vs,Mu=m&&(!Gi||vs&&8<vs&&11>=vs),Fu=" ",zu=!1;function Bu(e,t){switch(e){case"keyup":return mp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yn=!1;function yp(e,t){switch(e){case"compositionend":return Wu(t);case"keypress":return t.which!==32?null:(zu=!0,Fu);case"textInput":return e=t.data,e===Fu&&zu?null:e;default:return null}}function vp(e,t){if(yn)return e==="compositionend"||!Gi&&Bu(e,t)?(e=Du(),ga=Bi=wr=null,yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mu&&t.locale!=="ko"?null:t.data;default:return null}}var xp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xp[e.type]:t==="textarea"}function Hu(e,t,r,a){du(a),t=ba(t,"onChange"),0<t.length&&(r=new Wi("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var xs=null,ws=null;function wp(e){uc(e,0)}function wa(e){var t=jn(e);if(Ne(t))return e}function _p(e,t){if(e==="change")return t}var Vu=!1;if(m){var Ji;if(m){var Qi="oninput"in document;if(!Qi){var Ku=document.createElement("div");Ku.setAttribute("oninput","return;"),Qi=typeof Ku.oninput=="function"}Ji=Qi}else Ji=!1;Vu=Ji&&(!document.documentMode||9<document.documentMode)}function Gu(){xs&&(xs.detachEvent("onpropertychange",Ju),ws=xs=null)}function Ju(e){if(e.propertyName==="value"&&wa(ws)){var t=[];Hu(t,ws,e,hn(e)),mu(wp,t)}}function jp(e,t,r){e==="focusin"?(Gu(),xs=t,ws=r,xs.attachEvent("onpropertychange",Ju)):e==="focusout"&&Gu()}function kp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wa(ws)}function bp(e,t){if(e==="click")return wa(t)}function Sp(e,t){if(e==="input"||e==="change")return wa(t)}function Np(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:Np;function _s(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var d=r[a];if(!p.call(t,d)||!Lt(e[d],t[d]))return!1}return!0}function Qu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yu(e,t){var r=Qu(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qu(r)}}function Xu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zu(){for(var e=window,t=Fe();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Fe(e.document)}return t}function Yi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ep(e){var t=Zu(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Xu(r.ownerDocument.documentElement,r)){if(a!==null&&Yi(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,f=Math.min(a.start,d);a=a.end===void 0?f:Math.min(a.end,d),!e.extend&&f>a&&(d=a,a=f,f=d),d=Yu(r,f);var g=Yu(r,a);d&&g&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Cp=m&&"documentMode"in document&&11>=document.documentMode,vn=null,Xi=null,js=null,Zi=!1;function ec(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zi||vn==null||vn!==Fe(a)||(a=vn,"selectionStart"in a&&Yi(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),js&&_s(js,a)||(js=a,a=ba(Xi,"onSelect"),0<a.length&&(t=new Wi("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=vn)))}function _a(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xn={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},eo={},tc={};m&&(tc=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);function ja(e){if(eo[e])return eo[e];if(!xn[e])return e;var t=xn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in tc)return eo[e]=t[r];return e}var rc=ja("animationend"),nc=ja("animationiteration"),sc=ja("animationstart"),ac=ja("transitionend"),ic=new Map,oc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){ic.set(e,t),c(t,[e])}for(var to=0;to<oc.length;to++){var ro=oc[to],Tp=ro.toLowerCase(),Pp=ro[0].toUpperCase()+ro.slice(1);_r(Tp,"on"+Pp)}_r(rc,"onAnimationEnd"),_r(nc,"onAnimationIteration"),_r(sc,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(ac,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rp=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function lc(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,Tf(a,t,void 0,e),e.currentTarget=null}function uc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],d=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var g=a.length-1;0<=g;g--){var _=a[g],b=_.instance,$=_.currentTarget;if(_=_.listener,b!==f&&d.isPropagationStopped())break e;lc(d,_,$),f=b}else for(g=0;g<a.length;g++){if(_=a[g],b=_.instance,$=_.currentTarget,_=_.listener,b!==f&&d.isPropagationStopped())break e;lc(d,_,$),f=b}}}if(ia)throw e=Ii,ia=!1,Ii=null,e}function Ie(e,t){var r=t[co];r===void 0&&(r=t[co]=new Set);var a=e+"__bubble";r.has(a)||(cc(t,e,2,!1),r.add(a))}function no(e,t,r){var a=0;t&&(a|=4),cc(r,e,a,t)}var ka="_reactListening"+Math.random().toString(36).slice(2);function bs(e){if(!e[ka]){e[ka]=!0,o.forEach(function(r){r!=="selectionchange"&&(Rp.has(r)||no(r,!1,e),no(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ka]||(t[ka]=!0,no("selectionchange",!1,t))}}function cc(e,t,r,a){switch(Iu(t)){case 1:var d=Hf;break;case 4:d=Vf;break;default:d=Fi}r=d.bind(null,t,r,e),d=void 0,!Li||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),a?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function so(e,t,r,a,d){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var _=a.stateNode.containerInfo;if(_===d||_.nodeType===8&&_.parentNode===d)break;if(g===4)for(g=a.return;g!==null;){var b=g.tag;if((b===3||b===4)&&(b=g.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;g=g.return}for(;_!==null;){if(g=Vr(_),g===null)return;if(b=g.tag,b===5||b===6){a=f=g;continue e}_=_.parentNode}}a=a.return}mu(function(){var $=f,K=hn(r),J=[];e:{var V=ic.get(e);if(V!==void 0){var ae=Wi,ue=e;switch(e){case"keypress":if(ya(r)===0)break e;case"keydown":case"keyup":ae=op;break;case"focusin":ue="focus",ae=Vi;break;case"focusout":ue="blur",ae=Vi;break;case"beforeblur":case"afterblur":ae=Vi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Jf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=cp;break;case rc:case nc:case sc:ae=Xf;break;case ac:ae=hp;break;case"scroll":ae=Kf;break;case"wheel":ae=pp;break;case"copy":case"cut":case"paste":ae=ep;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Uu}var ce=(t&4)!==0,Be=!ce&&e==="scroll",L=ce?V!==null?V+"Capture":null:V;ce=[];for(var T=$,O;T!==null;){O=T;var ee=O.stateNode;if(O.tag===5&&ee!==null&&(O=ee,L!==null&&(ee=is(T,L),ee!=null&&ce.push(Ss(T,ee,O)))),Be)break;T=T.return}0<ce.length&&(V=new ae(V,ue,null,r,K),J.push({event:V,listeners:ce}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",V&&r!==er&&(ue=r.relatedTarget||r.fromElement)&&(Vr(ue)||ue[tr]))break e;if((ae||V)&&(V=K.window===K?K:(V=K.ownerDocument)?V.defaultView||V.parentWindow:window,ae?(ue=r.relatedTarget||r.toElement,ae=$,ue=ue?Vr(ue):null,ue!==null&&(Be=Hr(ue),ue!==Be||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ae=null,ue=$),ae!==ue)){if(ce=Au,ee="onMouseLeave",L="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(ce=Uu,ee="onPointerLeave",L="onPointerEnter",T="pointer"),Be=ae==null?V:jn(ae),O=ue==null?V:jn(ue),V=new ce(ee,T+"leave",ae,r,K),V.target=Be,V.relatedTarget=O,ee=null,Vr(K)===$&&(ce=new ce(L,T+"enter",ue,r,K),ce.target=O,ce.relatedTarget=Be,ee=ce),Be=ee,ae&&ue)t:{for(ce=ae,L=ue,T=0,O=ce;O;O=wn(O))T++;for(O=0,ee=L;ee;ee=wn(ee))O++;for(;0<T-O;)ce=wn(ce),T--;for(;0<O-T;)L=wn(L),O--;for(;T--;){if(ce===L||L!==null&&ce===L.alternate)break t;ce=wn(ce),L=wn(L)}ce=null}else ce=null;ae!==null&&dc(J,V,ae,ce,!1),ue!==null&&Be!==null&&dc(J,Be,ue,ce,!0)}}e:{if(V=$?jn($):window,ae=V.nodeName&&V.nodeName.toLowerCase(),ae==="select"||ae==="input"&&V.type==="file")var de=_p;else if(qu(V))if(Vu)de=Sp;else{de=kp;var pe=jp}else(ae=V.nodeName)&&ae.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(de=bp);if(de&&(de=de(e,$))){Hu(J,de,r,K);break e}pe&&pe(e,V,$),e==="focusout"&&(pe=V._wrapperState)&&pe.controlled&&V.type==="number"&&Fr(V,"number",V.value)}switch(pe=$?jn($):window,e){case"focusin":(qu(pe)||pe.contentEditable==="true")&&(vn=pe,Xi=$,js=null);break;case"focusout":js=Xi=vn=null;break;case"mousedown":Zi=!0;break;case"contextmenu":case"mouseup":case"dragend":Zi=!1,ec(J,r,K);break;case"selectionchange":if(Cp)break;case"keydown":case"keyup":ec(J,r,K)}var me;if(Gi)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else yn?Bu(e,r)&&(ye="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ye="onCompositionStart");ye&&(Mu&&r.locale!=="ko"&&(yn||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&yn&&(me=Du()):(wr=K,Bi="value"in wr?wr.value:wr.textContent,yn=!0)),pe=ba($,ye),0<pe.length&&(ye=new $u(ye,e,null,r,K),J.push({event:ye,listeners:pe}),me?ye.data=me:(me=Wu(r),me!==null&&(ye.data=me)))),(me=gp?yp(e,r):vp(e,r))&&($=ba($,"onBeforeInput"),0<$.length&&(K=new $u("onBeforeInput","beforeinput",null,r,K),J.push({event:K,listeners:$}),K.data=me))}uc(J,t)})}function Ss(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ba(e,t){for(var r=t+"Capture",a=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=is(e,r),f!=null&&a.unshift(Ss(e,f,d)),f=is(e,t),f!=null&&a.push(Ss(e,f,d))),e=e.return}return a}function wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dc(e,t,r,a,d){for(var f=t._reactName,g=[];r!==null&&r!==a;){var _=r,b=_.alternate,$=_.stateNode;if(b!==null&&b===a)break;_.tag===5&&$!==null&&(_=$,d?(b=is(r,f),b!=null&&g.unshift(Ss(r,b,_))):d||(b=is(r,f),b!=null&&g.push(Ss(r,b,_)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var Lp=/\r\n?/g,Ip=/\u0000|\uFFFD/g;function hc(e){return(typeof e=="string"?e:""+e).replace(Lp,`
`).replace(Ip,"")}function Sa(e,t,r){if(t=hc(t),hc(e)!==t&&r)throw Error(s(425))}function Na(){}var ao=null,io=null;function oo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lo=typeof setTimeout=="function"?setTimeout:void 0,Dp=typeof clearTimeout=="function"?clearTimeout:void 0,fc=typeof Promise=="function"?Promise:void 0,Op=typeof queueMicrotask=="function"?queueMicrotask:typeof fc<"u"?function(e){return fc.resolve(null).then(e).catch(Ap)}:lo;function Ap(e){setTimeout(function(){throw e})}function uo(e,t){var r=t,a=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(a===0){e.removeChild(d),ms(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=d}while(r);ms(t)}function jr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function pc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var _n=Math.random().toString(36).slice(2),Kt="__reactFiber$"+_n,Ns="__reactProps$"+_n,tr="__reactContainer$"+_n,co="__reactEvents$"+_n,$p="__reactListeners$"+_n,Up="__reactHandles$"+_n;function Vr(e){var t=e[Kt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[tr]||r[Kt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=pc(e);e!==null;){if(r=e[Kt])return r;e=pc(e)}return t}e=r,r=e.parentNode}return null}function Es(e){return e=e[Kt]||e[tr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Ea(e){return e[Ns]||null}var ho=[],kn=-1;function kr(e){return{current:e}}function De(e){0>kn||(e.current=ho[kn],ho[kn]=null,kn--)}function Re(e,t){kn++,ho[kn]=e.current,e.current=t}var br={},Ze=kr(br),ct=kr(!1),Kr=br;function bn(e,t){var r=e.type.contextTypes;if(!r)return br;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in r)d[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function dt(e){return e=e.childContextTypes,e!=null}function Ca(){De(ct),De(Ze)}function mc(e,t,r){if(Ze.current!==br)throw Error(s(168));Re(Ze,t),Re(ct,r)}function gc(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var d in a)if(!(d in t))throw Error(s(108,he(e)||"Unknown",d));return ne({},r,a)}function Ta(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||br,Kr=Ze.current,Re(Ze,e),Re(ct,ct.current),!0}function yc(e,t,r){var a=e.stateNode;if(!a)throw Error(s(169));r?(e=gc(e,t,Kr),a.__reactInternalMemoizedMergedChildContext=e,De(ct),De(Ze),Re(Ze,e)):De(ct),Re(ct,r)}var rr=null,Pa=!1,fo=!1;function vc(e){rr===null?rr=[e]:rr.push(e)}function Mp(e){Pa=!0,vc(e)}function Sr(){if(!fo&&rr!==null){fo=!0;var e=0,t=Pe;try{var r=rr;for(Pe=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}rr=null,Pa=!1}catch(d){throw rr!==null&&(rr=rr.slice(e+1)),wu(Di,Sr),d}finally{Pe=t,fo=!1}}return null}var Sn=[],Nn=0,Ra=null,La=0,St=[],Nt=0,Gr=null,nr=1,sr="";function Jr(e,t){Sn[Nn++]=La,Sn[Nn++]=Ra,Ra=e,La=t}function xc(e,t,r){St[Nt++]=nr,St[Nt++]=sr,St[Nt++]=Gr,Gr=e;var a=nr;e=sr;var d=32-Rt(a)-1;a&=~(1<<d),r+=1;var f=32-Rt(t)+d;if(30<f){var g=d-d%5;f=(a&(1<<g)-1).toString(32),a>>=g,d-=g,nr=1<<32-Rt(t)+d|r<<d|a,sr=f+e}else nr=1<<f|r<<d|a,sr=e}function po(e){e.return!==null&&(Jr(e,1),xc(e,1,0))}function mo(e){for(;e===Ra;)Ra=Sn[--Nn],Sn[Nn]=null,La=Sn[--Nn],Sn[Nn]=null;for(;e===Gr;)Gr=St[--Nt],St[Nt]=null,sr=St[--Nt],St[Nt]=null,nr=St[--Nt],St[Nt]=null}var _t=null,jt=null,Oe=!1,It=null;function wc(e,t){var r=Pt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _c(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_t=e,jt=jr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_t=e,jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Gr!==null?{id:nr,overflow:sr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Pt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,_t=e,jt=null,!0):!1;default:return!1}}function go(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yo(e){if(Oe){var t=jt;if(t){var r=t;if(!_c(e,t)){if(go(e))throw Error(s(418));t=jr(r.nextSibling);var a=_t;t&&_c(e,t)?wc(a,r):(e.flags=e.flags&-4097|2,Oe=!1,_t=e)}}else{if(go(e))throw Error(s(418));e.flags=e.flags&-4097|2,Oe=!1,_t=e}}}function jc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function Ia(e){if(e!==_t)return!1;if(!Oe)return jc(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oo(e.type,e.memoizedProps)),t&&(t=jt)){if(go(e))throw kc(),Error(s(418));for(;t;)wc(e,t),t=jr(t.nextSibling)}if(jc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){jt=jr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}jt=null}}else jt=_t?jr(e.stateNode.nextSibling):null;return!0}function kc(){for(var e=jt;e;)e=jr(e.nextSibling)}function En(){jt=_t=null,Oe=!1}function vo(e){It===null?It=[e]:It.push(e)}var Fp=F.ReactCurrentBatchConfig;function Cs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var a=r.stateNode}if(!a)throw Error(s(147,e));var d=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var _=d.refs;g===null?delete _[f]:_[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function Da(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bc(e){var t=e._init;return t(e._payload)}function Sc(e){function t(L,T){if(e){var O=L.deletions;O===null?(L.deletions=[T],L.flags|=16):O.push(T)}}function r(L,T){if(!e)return null;for(;T!==null;)t(L,T),T=T.sibling;return null}function a(L,T){for(L=new Map;T!==null;)T.key!==null?L.set(T.key,T):L.set(T.index,T),T=T.sibling;return L}function d(L,T){return L=Ir(L,T),L.index=0,L.sibling=null,L}function f(L,T,O){return L.index=O,e?(O=L.alternate,O!==null?(O=O.index,O<T?(L.flags|=2,T):O):(L.flags|=2,T)):(L.flags|=1048576,T)}function g(L){return e&&L.alternate===null&&(L.flags|=2),L}function _(L,T,O,ee){return T===null||T.tag!==6?(T=ul(O,L.mode,ee),T.return=L,T):(T=d(T,O),T.return=L,T)}function b(L,T,O,ee){var de=O.type;return de===q?K(L,T,O.props.children,ee,O.key):T!==null&&(T.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ke&&bc(de)===T.type)?(ee=d(T,O.props),ee.ref=Cs(L,T,O),ee.return=L,ee):(ee=si(O.type,O.key,O.props,null,L.mode,ee),ee.ref=Cs(L,T,O),ee.return=L,ee)}function $(L,T,O,ee){return T===null||T.tag!==4||T.stateNode.containerInfo!==O.containerInfo||T.stateNode.implementation!==O.implementation?(T=cl(O,L.mode,ee),T.return=L,T):(T=d(T,O.children||[]),T.return=L,T)}function K(L,T,O,ee,de){return T===null||T.tag!==7?(T=nn(O,L.mode,ee,de),T.return=L,T):(T=d(T,O),T.return=L,T)}function J(L,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return T=ul(""+T,L.mode,O),T.return=L,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Z:return O=si(T.type,T.key,T.props,null,L.mode,O),O.ref=Cs(L,null,T),O.return=L,O;case B:return T=cl(T,L.mode,O),T.return=L,T;case ke:var ee=T._init;return J(L,ee(T._payload),O)}if(pr(T)||oe(T))return T=nn(T,L.mode,O,null),T.return=L,T;Da(L,T)}return null}function V(L,T,O,ee){var de=T!==null?T.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return de!==null?null:_(L,T,""+O,ee);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Z:return O.key===de?b(L,T,O,ee):null;case B:return O.key===de?$(L,T,O,ee):null;case ke:return de=O._init,V(L,T,de(O._payload),ee)}if(pr(O)||oe(O))return de!==null?null:K(L,T,O,ee,null);Da(L,O)}return null}function ae(L,T,O,ee,de){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return L=L.get(O)||null,_(T,L,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Z:return L=L.get(ee.key===null?O:ee.key)||null,b(T,L,ee,de);case B:return L=L.get(ee.key===null?O:ee.key)||null,$(T,L,ee,de);case ke:var pe=ee._init;return ae(L,T,O,pe(ee._payload),de)}if(pr(ee)||oe(ee))return L=L.get(O)||null,K(T,L,ee,de,null);Da(T,ee)}return null}function ue(L,T,O,ee){for(var de=null,pe=null,me=T,ye=T=0,Ge=null;me!==null&&ye<O.length;ye++){me.index>ye?(Ge=me,me=null):Ge=me.sibling;var Te=V(L,me,O[ye],ee);if(Te===null){me===null&&(me=Ge);break}e&&me&&Te.alternate===null&&t(L,me),T=f(Te,T,ye),pe===null?de=Te:pe.sibling=Te,pe=Te,me=Ge}if(ye===O.length)return r(L,me),Oe&&Jr(L,ye),de;if(me===null){for(;ye<O.length;ye++)me=J(L,O[ye],ee),me!==null&&(T=f(me,T,ye),pe===null?de=me:pe.sibling=me,pe=me);return Oe&&Jr(L,ye),de}for(me=a(L,me);ye<O.length;ye++)Ge=ae(me,L,ye,O[ye],ee),Ge!==null&&(e&&Ge.alternate!==null&&me.delete(Ge.key===null?ye:Ge.key),T=f(Ge,T,ye),pe===null?de=Ge:pe.sibling=Ge,pe=Ge);return e&&me.forEach(function(Dr){return t(L,Dr)}),Oe&&Jr(L,ye),de}function ce(L,T,O,ee){var de=oe(O);if(typeof de!="function")throw Error(s(150));if(O=de.call(O),O==null)throw Error(s(151));for(var pe=de=null,me=T,ye=T=0,Ge=null,Te=O.next();me!==null&&!Te.done;ye++,Te=O.next()){me.index>ye?(Ge=me,me=null):Ge=me.sibling;var Dr=V(L,me,Te.value,ee);if(Dr===null){me===null&&(me=Ge);break}e&&me&&Dr.alternate===null&&t(L,me),T=f(Dr,T,ye),pe===null?de=Dr:pe.sibling=Dr,pe=Dr,me=Ge}if(Te.done)return r(L,me),Oe&&Jr(L,ye),de;if(me===null){for(;!Te.done;ye++,Te=O.next())Te=J(L,Te.value,ee),Te!==null&&(T=f(Te,T,ye),pe===null?de=Te:pe.sibling=Te,pe=Te);return Oe&&Jr(L,ye),de}for(me=a(L,me);!Te.done;ye++,Te=O.next())Te=ae(me,L,ye,Te.value,ee),Te!==null&&(e&&Te.alternate!==null&&me.delete(Te.key===null?ye:Te.key),T=f(Te,T,ye),pe===null?de=Te:pe.sibling=Te,pe=Te);return e&&me.forEach(function(xm){return t(L,xm)}),Oe&&Jr(L,ye),de}function Be(L,T,O,ee){if(typeof O=="object"&&O!==null&&O.type===q&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Z:e:{for(var de=O.key,pe=T;pe!==null;){if(pe.key===de){if(de=O.type,de===q){if(pe.tag===7){r(L,pe.sibling),T=d(pe,O.props.children),T.return=L,L=T;break e}}else if(pe.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ke&&bc(de)===pe.type){r(L,pe.sibling),T=d(pe,O.props),T.ref=Cs(L,pe,O),T.return=L,L=T;break e}r(L,pe);break}else t(L,pe);pe=pe.sibling}O.type===q?(T=nn(O.props.children,L.mode,ee,O.key),T.return=L,L=T):(ee=si(O.type,O.key,O.props,null,L.mode,ee),ee.ref=Cs(L,T,O),ee.return=L,L=ee)}return g(L);case B:e:{for(pe=O.key;T!==null;){if(T.key===pe)if(T.tag===4&&T.stateNode.containerInfo===O.containerInfo&&T.stateNode.implementation===O.implementation){r(L,T.sibling),T=d(T,O.children||[]),T.return=L,L=T;break e}else{r(L,T);break}else t(L,T);T=T.sibling}T=cl(O,L.mode,ee),T.return=L,L=T}return g(L);case ke:return pe=O._init,Be(L,T,pe(O._payload),ee)}if(pr(O))return ue(L,T,O,ee);if(oe(O))return ce(L,T,O,ee);Da(L,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,T!==null&&T.tag===6?(r(L,T.sibling),T=d(T,O),T.return=L,L=T):(r(L,T),T=ul(O,L.mode,ee),T.return=L,L=T),g(L)):r(L,T)}return Be}var Cn=Sc(!0),Nc=Sc(!1),Oa=kr(null),Aa=null,Tn=null,xo=null;function wo(){xo=Tn=Aa=null}function _o(e){var t=Oa.current;De(Oa),e._currentValue=t}function jo(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Pn(e,t){Aa=e,xo=Tn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ht=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},Tn===null){if(Aa===null)throw Error(s(308));Tn=e,Aa.dependencies={lanes:0,firstContext:e}}else Tn=Tn.next=e;return t}var Qr=null;function ko(e){Qr===null?Qr=[e]:Qr.push(e)}function Ec(e,t,r,a){var d=t.interleaved;return d===null?(r.next=r,ko(t)):(r.next=d.next,d.next=r),t.interleaved=r,ar(e,a)}function ar(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Nr=!1;function bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Er(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ce&2)!==0){var d=a.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),a.pending=t,ar(e,r)}return d=a.interleaved,d===null?(t.next=t,ko(a)):(t.next=d.next,d.next=t),a.interleaved=t,ar(e,r)}function $a(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,$i(e,r)}}function Tc(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var d=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?d=f=g:f=f.next=g,r=r.next}while(r!==null);f===null?d=f=t:f=f.next=t}else d=f=t;r={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ua(e,t,r,a){var d=e.updateQueue;Nr=!1;var f=d.firstBaseUpdate,g=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var b=_,$=b.next;b.next=null,g===null?f=$:g.next=$,g=b;var K=e.alternate;K!==null&&(K=K.updateQueue,_=K.lastBaseUpdate,_!==g&&(_===null?K.firstBaseUpdate=$:_.next=$,K.lastBaseUpdate=b))}if(f!==null){var J=d.baseState;g=0,K=$=b=null,_=f;do{var V=_.lane,ae=_.eventTime;if((a&V)===V){K!==null&&(K=K.next={eventTime:ae,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var ue=e,ce=_;switch(V=t,ae=r,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){J=ue.call(ae,J,V);break e}J=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,V=typeof ue=="function"?ue.call(ae,J,V):ue,V==null)break e;J=ne({},J,V);break e;case 2:Nr=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,V=d.effects,V===null?d.effects=[_]:V.push(_))}else ae={eventTime:ae,lane:V,tag:_.tag,payload:_.payload,callback:_.callback,next:null},K===null?($=K=ae,b=J):K=K.next=ae,g|=V;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;V=_,_=V.next,V.next=null,d.lastBaseUpdate=V,d.shared.pending=null}}while(!0);if(K===null&&(b=J),d.baseState=b,d.firstBaseUpdate=$,d.lastBaseUpdate=K,t=d.shared.interleaved,t!==null){d=t;do g|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Zr|=g,e.lanes=g,e.memoizedState=J}}function Pc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],d=a.callback;if(d!==null){if(a.callback=null,a=r,typeof d!="function")throw Error(s(191,d));d.call(a)}}}var Ts={},Gt=kr(Ts),Ps=kr(Ts),Rs=kr(Ts);function Yr(e){if(e===Ts)throw Error(s(174));return e}function So(e,t){switch(Re(Rs,t),Re(Ps,e),Re(Gt,Ts),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:as(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=as(t,e)}De(Gt),Re(Gt,t)}function Rn(){De(Gt),De(Ps),De(Rs)}function Rc(e){Yr(Rs.current);var t=Yr(Gt.current),r=as(t,e.type);t!==r&&(Re(Ps,e),Re(Gt,r))}function No(e){Ps.current===e&&(De(Gt),De(Ps))}var $e=kr(0);function Ma(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Eo=[];function Co(){for(var e=0;e<Eo.length;e++)Eo[e]._workInProgressVersionPrimary=null;Eo.length=0}var Fa=F.ReactCurrentDispatcher,To=F.ReactCurrentBatchConfig,Xr=0,Ue=null,qe=null,Ve=null,za=!1,Ls=!1,Is=0,zp=0;function et(){throw Error(s(321))}function Po(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Lt(e[r],t[r]))return!1;return!0}function Ro(e,t,r,a,d,f){if(Xr=f,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fa.current=e===null||e.memoizedState===null?Hp:Vp,e=r(a,d),Ls){f=0;do{if(Ls=!1,Is=0,25<=f)throw Error(s(301));f+=1,Ve=qe=null,t.updateQueue=null,Fa.current=Kp,e=r(a,d)}while(Ls)}if(Fa.current=qa,t=qe!==null&&qe.next!==null,Xr=0,Ve=qe=Ue=null,za=!1,t)throw Error(s(300));return e}function Lo(){var e=Is!==0;return Is=0,e}function Jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Ue.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function Ct(){if(qe===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=Ve===null?Ue.memoizedState:Ve.next;if(t!==null)Ve=t,qe=e;else{if(e===null)throw Error(s(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ve===null?Ue.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function Ds(e,t){return typeof t=="function"?t(e):t}function Io(e){var t=Ct(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var a=qe,d=a.baseQueue,f=r.pending;if(f!==null){if(d!==null){var g=d.next;d.next=f.next,f.next=g}a.baseQueue=d=f,r.pending=null}if(d!==null){f=d.next,a=a.baseState;var _=g=null,b=null,$=f;do{var K=$.lane;if((Xr&K)===K)b!==null&&(b=b.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),a=$.hasEagerState?$.eagerState:e(a,$.action);else{var J={lane:K,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};b===null?(_=b=J,g=a):b=b.next=J,Ue.lanes|=K,Zr|=K}$=$.next}while($!==null&&$!==f);b===null?g=a:b.next=_,Lt(a,t.memoizedState)||(ht=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=b,r.lastRenderedState=a}if(e=r.interleaved,e!==null){d=e;do f=d.lane,Ue.lanes|=f,Zr|=f,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Do(e){var t=Ct(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var a=r.dispatch,d=r.pending,f=t.memoizedState;if(d!==null){r.pending=null;var g=d=d.next;do f=e(f,g.action),g=g.next;while(g!==d);Lt(f,t.memoizedState)||(ht=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,a]}function Lc(){}function Ic(e,t){var r=Ue,a=Ct(),d=t(),f=!Lt(a.memoizedState,d);if(f&&(a.memoizedState=d,ht=!0),a=a.queue,Oo(Ac.bind(null,r,a,e),[e]),a.getSnapshot!==t||f||Ve!==null&&Ve.memoizedState.tag&1){if(r.flags|=2048,Os(9,Oc.bind(null,r,a,d,t),void 0,null),Ke===null)throw Error(s(349));(Xr&30)!==0||Dc(r,t,d)}return d}function Dc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Oc(e,t,r,a){t.value=r,t.getSnapshot=a,$c(t)&&Uc(e)}function Ac(e,t,r){return r(function(){$c(t)&&Uc(e)})}function $c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Lt(e,r)}catch{return!0}}function Uc(e){var t=ar(e,1);t!==null&&$t(t,e,1,-1)}function Mc(e){var t=Jt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:e},t.queue=e,e=e.dispatch=qp.bind(null,Ue,e),[t.memoizedState,e]}function Os(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function Fc(){return Ct().memoizedState}function Ba(e,t,r,a){var d=Jt();Ue.flags|=e,d.memoizedState=Os(1|t,r,void 0,a===void 0?null:a)}function Wa(e,t,r,a){var d=Ct();a=a===void 0?null:a;var f=void 0;if(qe!==null){var g=qe.memoizedState;if(f=g.destroy,a!==null&&Po(a,g.deps)){d.memoizedState=Os(t,r,f,a);return}}Ue.flags|=e,d.memoizedState=Os(1|t,r,f,a)}function zc(e,t){return Ba(8390656,8,e,t)}function Oo(e,t){return Wa(2048,8,e,t)}function Bc(e,t){return Wa(4,2,e,t)}function Wc(e,t){return Wa(4,4,e,t)}function qc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hc(e,t,r){return r=r!=null?r.concat([e]):null,Wa(4,4,qc.bind(null,t,e),r)}function Ao(){}function Vc(e,t){var r=Ct();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Po(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Kc(e,t){var r=Ct();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Po(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Gc(e,t,r){return(Xr&21)===0?(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=r):(Lt(r,t)||(r=bu(),Ue.lanes|=r,Zr|=r,e.baseState=!0),t)}function Bp(e,t){var r=Pe;Pe=r!==0&&4>r?r:4,e(!0);var a=To.transition;To.transition={};try{e(!1),t()}finally{Pe=r,To.transition=a}}function Jc(){return Ct().memoizedState}function Wp(e,t,r){var a=Rr(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Qc(e))Yc(t,r);else if(r=Ec(e,t,r,a),r!==null){var d=ot();$t(r,e,a,d),Xc(r,t,a)}}function qp(e,t,r){var a=Rr(e),d={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qc(e))Yc(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,_=f(g,r);if(d.hasEagerState=!0,d.eagerState=_,Lt(_,g)){var b=t.interleaved;b===null?(d.next=d,ko(t)):(d.next=b.next,b.next=d),t.interleaved=d;return}}catch{}finally{}r=Ec(e,t,d,a),r!==null&&(d=ot(),$t(r,e,a,d),Xc(r,t,a))}}function Qc(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function Yc(e,t){Ls=za=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Xc(e,t,r){if((r&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,$i(e,r)}}var qa={readContext:Et,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Hp={readContext:Et,useCallback:function(e,t){return Jt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:zc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ba(4194308,4,qc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var r=Jt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=Jt();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Wp.bind(null,Ue,e),[a.memoizedState,e]},useRef:function(e){var t=Jt();return e={current:e},t.memoizedState=e},useState:Mc,useDebugValue:Ao,useDeferredValue:function(e){return Jt().memoizedState=e},useTransition:function(){var e=Mc(!1),t=e[0];return e=Bp.bind(null,e[1]),Jt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Ue,d=Jt();if(Oe){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),Ke===null)throw Error(s(349));(Xr&30)!==0||Dc(a,t,r)}d.memoizedState=r;var f={value:r,getSnapshot:t};return d.queue=f,zc(Ac.bind(null,a,f,e),[e]),a.flags|=2048,Os(9,Oc.bind(null,a,f,r,t),void 0,null),r},useId:function(){var e=Jt(),t=Ke.identifierPrefix;if(Oe){var r=sr,a=nr;r=(a&~(1<<32-Rt(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Is++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=zp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vp={readContext:Et,useCallback:Vc,useContext:Et,useEffect:Oo,useImperativeHandle:Hc,useInsertionEffect:Bc,useLayoutEffect:Wc,useMemo:Kc,useReducer:Io,useRef:Fc,useState:function(){return Io(Ds)},useDebugValue:Ao,useDeferredValue:function(e){var t=Ct();return Gc(t,qe.memoizedState,e)},useTransition:function(){var e=Io(Ds)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Lc,useSyncExternalStore:Ic,useId:Jc,unstable_isNewReconciler:!1},Kp={readContext:Et,useCallback:Vc,useContext:Et,useEffect:Oo,useImperativeHandle:Hc,useInsertionEffect:Bc,useLayoutEffect:Wc,useMemo:Kc,useReducer:Do,useRef:Fc,useState:function(){return Do(Ds)},useDebugValue:Ao,useDeferredValue:function(e){var t=Ct();return qe===null?t.memoizedState=e:Gc(t,qe.memoizedState,e)},useTransition:function(){var e=Do(Ds)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Lc,useSyncExternalStore:Ic,useId:Jc,unstable_isNewReconciler:!1};function Dt(e,t){if(e&&e.defaultProps){t=ne({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function $o(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:ne({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ha={isMounted:function(e){return(e=e._reactInternals)?Hr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=ot(),d=Rr(e),f=ir(a,d);f.payload=t,r!=null&&(f.callback=r),t=Er(e,f,d),t!==null&&($t(t,e,d,a),$a(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=ot(),d=Rr(e),f=ir(a,d);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=Er(e,f,d),t!==null&&($t(t,e,d,a),$a(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ot(),a=Rr(e),d=ir(r,a);d.tag=2,t!=null&&(d.callback=t),t=Er(e,d,a),t!==null&&($t(t,e,a,r),$a(t,e,a))}};function Zc(e,t,r,a,d,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,g):t.prototype&&t.prototype.isPureReactComponent?!_s(r,a)||!_s(d,f):!0}function ed(e,t,r){var a=!1,d=br,f=t.contextType;return typeof f=="object"&&f!==null?f=Et(f):(d=dt(t)?Kr:Ze.current,a=t.contextTypes,f=(a=a!=null)?bn(e,d):br),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ha,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function td(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Ha.enqueueReplaceState(t,t.state,null)}function Uo(e,t,r,a){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},bo(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=Et(f):(f=dt(t)?Kr:Ze.current,d.context=bn(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&($o(e,t,f,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Ha.enqueueReplaceState(d,d.state,null),Ua(e,r,d,a),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Ln(e,t){try{var r="",a=t;do r+=z(a),a=a.return;while(a);var d=r}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function Mo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Fo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Gp=typeof WeakMap=="function"?WeakMap:Map;function rd(e,t,r){r=ir(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Xa||(Xa=!0,tl=a),Fo(e,t)},r}function nd(e,t,r){r=ir(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var d=t.value;r.payload=function(){return a(d)},r.callback=function(){Fo(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){Fo(e,t),typeof a!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function sd(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new Gp;var d=new Set;a.set(t,d)}else d=a.get(t),d===void 0&&(d=new Set,a.set(t,d));d.has(r)||(d.add(r),e=lm.bind(null,e,t,r),t.then(e,e))}function ad(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function id(e,t,r,a,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ir(-1,1),t.tag=2,Er(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Jp=F.ReactCurrentOwner,ht=!1;function it(e,t,r,a){t.child=e===null?Nc(t,null,r,a):Cn(t,e.child,r,a)}function od(e,t,r,a,d){r=r.render;var f=t.ref;return Pn(t,d),a=Ro(e,t,r,a,f,d),r=Lo(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,or(e,t,d)):(Oe&&r&&po(t),t.flags|=1,it(e,t,a,d),t.child)}function ld(e,t,r,a,d){if(e===null){var f=r.type;return typeof f=="function"&&!ll(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,ud(e,t,f,a,d)):(e=si(r.type,null,a,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var g=f.memoizedProps;if(r=r.compare,r=r!==null?r:_s,r(g,a)&&e.ref===t.ref)return or(e,t,d)}return t.flags|=1,e=Ir(f,a),e.ref=t.ref,e.return=t,t.child=e}function ud(e,t,r,a,d){if(e!==null){var f=e.memoizedProps;if(_s(f,a)&&e.ref===t.ref)if(ht=!1,t.pendingProps=a=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(ht=!0);else return t.lanes=e.lanes,or(e,t,d)}return zo(e,t,r,a,d)}function cd(e,t,r){var a=t.pendingProps,d=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Dn,kt),kt|=r;else{if((r&1073741824)===0)return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(Dn,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:r,Re(Dn,kt),kt|=a}else f!==null?(a=f.baseLanes|r,t.memoizedState=null):a=r,Re(Dn,kt),kt|=a;return it(e,t,d,r),t.child}function dd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function zo(e,t,r,a,d){var f=dt(r)?Kr:Ze.current;return f=bn(t,f),Pn(t,d),r=Ro(e,t,r,a,f,d),a=Lo(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,or(e,t,d)):(Oe&&a&&po(t),t.flags|=1,it(e,t,r,d),t.child)}function hd(e,t,r,a,d){if(dt(r)){var f=!0;Ta(t)}else f=!1;if(Pn(t,d),t.stateNode===null)Ka(e,t),ed(t,r,a),Uo(t,r,a,d),a=!0;else if(e===null){var g=t.stateNode,_=t.memoizedProps;g.props=_;var b=g.context,$=r.contextType;typeof $=="object"&&$!==null?$=Et($):($=dt(r)?Kr:Ze.current,$=bn(t,$));var K=r.getDerivedStateFromProps,J=typeof K=="function"||typeof g.getSnapshotBeforeUpdate=="function";J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==a||b!==$)&&td(t,g,a,$),Nr=!1;var V=t.memoizedState;g.state=V,Ua(t,a,g,d),b=t.memoizedState,_!==a||V!==b||ct.current||Nr?(typeof K=="function"&&($o(t,r,K,a),b=t.memoizedState),(_=Nr||Zc(t,r,_,a,V,b,$))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),g.props=a,g.state=b,g.context=$,a=_):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,Cc(e,t),_=t.memoizedProps,$=t.type===t.elementType?_:Dt(t.type,_),g.props=$,J=t.pendingProps,V=g.context,b=r.contextType,typeof b=="object"&&b!==null?b=Et(b):(b=dt(r)?Kr:Ze.current,b=bn(t,b));var ae=r.getDerivedStateFromProps;(K=typeof ae=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==J||V!==b)&&td(t,g,a,b),Nr=!1,V=t.memoizedState,g.state=V,Ua(t,a,g,d);var ue=t.memoizedState;_!==J||V!==ue||ct.current||Nr?(typeof ae=="function"&&($o(t,r,ae,a),ue=t.memoizedState),($=Nr||Zc(t,r,$,a,V,ue,b)||!1)?(K||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,ue,b),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,ue,b)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ue),g.props=a,g.state=ue,g.context=b,a=$):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),a=!1)}return Bo(e,t,r,a,f,d)}function Bo(e,t,r,a,d,f){dd(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return d&&yc(t,r,!1),or(e,t,f);a=t.stateNode,Jp.current=t;var _=g&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=Cn(t,e.child,null,f),t.child=Cn(t,null,_,f)):it(e,t,_,f),t.memoizedState=a.state,d&&yc(t,r,!0),t.child}function fd(e){var t=e.stateNode;t.pendingContext?mc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mc(e,t.context,!1),So(e,t.containerInfo)}function pd(e,t,r,a,d){return En(),vo(d),t.flags|=256,it(e,t,r,a),t.child}var Wo={dehydrated:null,treeContext:null,retryLane:0};function qo(e){return{baseLanes:e,cachePool:null,transitions:null}}function md(e,t,r){var a=t.pendingProps,d=$e.current,f=!1,g=(t.flags&128)!==0,_;if((_=g)||(_=e!==null&&e.memoizedState===null?!1:(d&2)!==0),_?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Re($e,d&1),e===null)return yo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=a.children,e=a.fallback,f?(a=t.mode,f=t.child,g={mode:"hidden",children:g},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=ai(g,a,0,null),e=nn(e,a,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=qo(r),t.memoizedState=Wo,e):Ho(t,g));if(d=e.memoizedState,d!==null&&(_=d.dehydrated,_!==null))return Qp(e,t,g,a,_,d,r);if(f){f=a.fallback,g=t.mode,d=e.child,_=d.sibling;var b={mode:"hidden",children:a.children};return(g&1)===0&&t.child!==d?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=Ir(d,b),a.subtreeFlags=d.subtreeFlags&14680064),_!==null?f=Ir(_,f):(f=nn(f,g,r,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,g=e.child.memoizedState,g=g===null?qo(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~r,t.memoizedState=Wo,a}return f=e.child,e=f.sibling,a=Ir(f,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Ho(e,t){return t=ai({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Va(e,t,r,a){return a!==null&&vo(a),Cn(t,e.child,null,r),e=Ho(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qp(e,t,r,a,d,f,g){if(r)return t.flags&256?(t.flags&=-257,a=Mo(Error(s(422))),Va(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,d=t.mode,a=ai({mode:"visible",children:a.children},d,0,null),f=nn(f,d,g,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,(t.mode&1)!==0&&Cn(t,e.child,null,g),t.child.memoizedState=qo(g),t.memoizedState=Wo,f);if((t.mode&1)===0)return Va(e,t,g,null);if(d.data==="$!"){if(a=d.nextSibling&&d.nextSibling.dataset,a)var _=a.dgst;return a=_,f=Error(s(419)),a=Mo(f,a,void 0),Va(e,t,g,a)}if(_=(g&e.childLanes)!==0,ht||_){if(a=Ke,a!==null){switch(g&-g){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(a.suspendedLanes|g))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,ar(e,d),$t(a,e,d,-1))}return ol(),a=Mo(Error(s(421))),Va(e,t,g,a)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=um.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,jt=jr(d.nextSibling),_t=t,Oe=!0,It=null,e!==null&&(St[Nt++]=nr,St[Nt++]=sr,St[Nt++]=Gr,nr=e.id,sr=e.overflow,Gr=t),t=Ho(t,a.children),t.flags|=4096,t)}function gd(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),jo(e.return,t,r)}function Vo(e,t,r,a,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=r,f.tailMode=d)}function yd(e,t,r){var a=t.pendingProps,d=a.revealOrder,f=a.tail;if(it(e,t,a.children,r),a=$e.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gd(e,r,t);else if(e.tag===19)gd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Re($e,a),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&Ma(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Vo(t,!1,d,r,f);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Ma(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Vo(t,!0,r,null,f);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function or(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Zr|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=Ir(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ir(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Yp(e,t,r){switch(t.tag){case 3:fd(t),En();break;case 5:Rc(t);break;case 1:dt(t.type)&&Ta(t);break;case 4:So(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,d=t.memoizedProps.value;Re(Oa,a._currentValue),a._currentValue=d;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Re($e,$e.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?md(e,t,r):(Re($e,$e.current&1),e=or(e,t,r),e!==null?e.sibling:null);Re($e,$e.current&1);break;case 19:if(a=(r&t.childLanes)!==0,(e.flags&128)!==0){if(a)return yd(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Re($e,$e.current),a)break;return null;case 22:case 23:return t.lanes=0,cd(e,t,r)}return or(e,t,r)}var vd,Ko,xd,wd;vd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ko=function(){},xd=function(e,t,r,a){var d=e.memoizedProps;if(d!==a){e=t.stateNode,Yr(Gt.current);var f=null;switch(r){case"input":d=lt(e,d),a=lt(e,a),f=[];break;case"select":d=ne({},d,{value:void 0}),a=ne({},a,{value:void 0}),f=[];break;case"textarea":d=ns(e,d),a=ns(e,a),f=[];break;default:typeof d.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Na)}Wr(r,a);var g;r=null;for($ in d)if(!a.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var _=d[$];for(g in _)_.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(u.hasOwnProperty($)?f||(f=[]):(f=f||[]).push($,null));for($ in a){var b=a[$];if(_=d?.[$],a.hasOwnProperty($)&&b!==_&&(b!=null||_!=null))if($==="style")if(_){for(g in _)!_.hasOwnProperty(g)||b&&b.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in b)b.hasOwnProperty(g)&&_[g]!==b[g]&&(r||(r={}),r[g]=b[g])}else r||(f||(f=[]),f.push($,r)),r=b;else $==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,_=_?_.__html:void 0,b!=null&&_!==b&&(f=f||[]).push($,b)):$==="children"?typeof b!="string"&&typeof b!="number"||(f=f||[]).push($,""+b):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(u.hasOwnProperty($)?(b!=null&&$==="onScroll"&&Ie("scroll",e),f||_===b||(f=[])):(f=f||[]).push($,b))}r&&(f=f||[]).push("style",r);var $=f;(t.updateQueue=$)&&(t.flags|=4)}},wd=function(e,t,r,a){r!==a&&(t.flags|=4)};function As(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,a|=d.subtreeFlags&14680064,a|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function Xp(e,t,r){var a=t.pendingProps;switch(mo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return dt(t.type)&&Ca(),tt(t),null;case 3:return a=t.stateNode,Rn(),De(ct),De(Ze),Co(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ia(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,It!==null&&(sl(It),It=null))),Ko(e,t),tt(t),null;case 5:No(t);var d=Yr(Rs.current);if(r=t.type,e!==null&&t.stateNode!=null)xd(e,t,r,a,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(s(166));return tt(t),null}if(e=Yr(Gt.current),Ia(t)){a=t.stateNode,r=t.type;var f=t.memoizedProps;switch(a[Kt]=t,a[Ns]=f,e=(t.mode&1)!==0,r){case"dialog":Ie("cancel",a),Ie("close",a);break;case"iframe":case"object":case"embed":Ie("load",a);break;case"video":case"audio":for(d=0;d<ks.length;d++)Ie(ks[d],a);break;case"source":Ie("error",a);break;case"img":case"image":case"link":Ie("error",a),Ie("load",a);break;case"details":Ie("toggle",a);break;case"input":qt(a,f),Ie("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Ie("invalid",a);break;case"textarea":ss(a,f),Ie("invalid",a)}Wr(r,f),d=null;for(var g in f)if(f.hasOwnProperty(g)){var _=f[g];g==="children"?typeof _=="string"?a.textContent!==_&&(f.suppressHydrationWarning!==!0&&Sa(a.textContent,_,e),d=["children",_]):typeof _=="number"&&a.textContent!==""+_&&(f.suppressHydrationWarning!==!0&&Sa(a.textContent,_,e),d=["children",""+_]):u.hasOwnProperty(g)&&_!=null&&g==="onScroll"&&Ie("scroll",a)}switch(r){case"input":ie(a),na(a,f,!0);break;case"textarea":ie(a),Zt(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=Na)}a=d,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ut(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(r,{is:a.is}):(e=g.createElement(r),r==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,r),e[Kt]=t,e[Ns]=a,vd(e,t,!1,!1),t.stateNode=e;e:{switch(g=xt(r,a),r){case"dialog":Ie("cancel",e),Ie("close",e),d=a;break;case"iframe":case"object":case"embed":Ie("load",e),d=a;break;case"video":case"audio":for(d=0;d<ks.length;d++)Ie(ks[d],e);d=a;break;case"source":Ie("error",e),d=a;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),d=a;break;case"details":Ie("toggle",e),d=a;break;case"input":qt(e,a),d=lt(e,a),Ie("invalid",e);break;case"option":d=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},d=ne({},a,{value:void 0}),Ie("invalid",e);break;case"textarea":ss(e,a),d=ns(e,a),Ie("invalid",e);break;default:d=a}Wr(r,d),_=d;for(f in _)if(_.hasOwnProperty(f)){var b=_[f];f==="style"?bt(e,b):f==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&zr(e,b)):f==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&xe(e,b):typeof b=="number"&&xe(e,""+b):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(u.hasOwnProperty(f)?b!=null&&f==="onScroll"&&Ie("scroll",e):b!=null&&C(e,f,b,g))}switch(r){case"input":ie(e),na(e,a,!1);break;case"textarea":ie(e),Zt(e);break;case"option":a.value!=null&&e.setAttribute("value",""+ve(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Xt(e,!!a.multiple,f,!1):a.defaultValue!=null&&Xt(e,!!a.multiple,a.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Na)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)wd(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(r=Yr(Rs.current),Yr(Gt.current),Ia(t)){if(a=t.stateNode,r=t.memoizedProps,a[Kt]=t,(f=a.nodeValue!==r)&&(e=_t,e!==null))switch(e.tag){case 3:Sa(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sa(a.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Kt]=t,t.stateNode=a}return tt(t),null;case 13:if(De($e),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&jt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)kc(),En(),t.flags|=98560,f=!1;else if(f=Ia(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Kt]=t}else En(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;tt(t),f=!1}else It!==null&&(sl(It),It=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||($e.current&1)!==0?He===0&&(He=3):ol())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return Rn(),Ko(e,t),e===null&&bs(t.stateNode.containerInfo),tt(t),null;case 10:return _o(t.type._context),tt(t),null;case 17:return dt(t.type)&&Ca(),tt(t),null;case 19:if(De($e),f=t.memoizedState,f===null)return tt(t),null;if(a=(t.flags&128)!==0,g=f.rendering,g===null)if(a)As(f,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Ma(e),g!==null){for(t.flags|=128,As(f,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)f=r,e=a,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Re($e,$e.current&1|2),t.child}e=e.sibling}f.tail!==null&&ze()>On&&(t.flags|=128,a=!0,As(f,!1),t.lanes=4194304)}else{if(!a)if(e=Ma(g),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),As(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Oe)return tt(t),null}else 2*ze()-f.renderingStartTime>On&&r!==1073741824&&(t.flags|=128,a=!0,As(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(r=f.last,r!==null?r.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=ze(),t.sibling=null,r=$e.current,Re($e,a?r&1|2:r&1),t):(tt(t),null);case 22:case 23:return il(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(kt&1073741824)!==0&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Zp(e,t){switch(mo(t),t.tag){case 1:return dt(t.type)&&Ca(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rn(),De(ct),De(Ze),Co(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return No(t),null;case 13:if(De($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));En()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De($e),null;case 4:return Rn(),null;case 10:return _o(t.type._context),null;case 22:case 23:return il(),null;case 24:return null;default:return null}}var Ga=!1,rt=!1,em=typeof WeakSet=="function"?WeakSet:Set,le=null;function In(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Me(e,t,a)}else r.current=null}function Go(e,t,r){try{r()}catch(a){Me(e,t,a)}}var _d=!1;function tm(e,t){if(ao=pa,e=Zu(),Yi(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var d=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var g=0,_=-1,b=-1,$=0,K=0,J=e,V=null;t:for(;;){for(var ae;J!==r||d!==0&&J.nodeType!==3||(_=g+d),J!==f||a!==0&&J.nodeType!==3||(b=g+a),J.nodeType===3&&(g+=J.nodeValue.length),(ae=J.firstChild)!==null;)V=J,J=ae;for(;;){if(J===e)break t;if(V===r&&++$===d&&(_=g),V===f&&++K===a&&(b=g),(ae=J.nextSibling)!==null)break;J=V,V=J.parentNode}J=ae}r=_===-1||b===-1?null:{start:_,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(io={focusedElem:e,selectionRange:r},pa=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var ue=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,Be=ue.memoizedState,L=t.stateNode,T=L.getSnapshotBeforeUpdate(t.elementType===t.type?ce:Dt(t.type,ce),Be);L.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(ee){Me(t,t.return,ee)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return ue=_d,_d=!1,ue}function $s(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&Go(t,r,f)}d=d.next}while(d!==a)}}function Ja(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Jo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jd(e){var t=e.alternate;t!==null&&(e.alternate=null,jd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kt],delete t[Ns],delete t[co],delete t[$p],delete t[Up])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kd(e){return e.tag===5||e.tag===3||e.tag===4}function bd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qo(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Na));else if(a!==4&&(e=e.child,e!==null))for(Qo(e,t,r),e=e.sibling;e!==null;)Qo(e,t,r),e=e.sibling}function Yo(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Yo(e,t,r),e=e.sibling;e!==null;)Yo(e,t,r),e=e.sibling}var Ye=null,Ot=!1;function Cr(e,t,r){for(r=r.child;r!==null;)Sd(e,t,r),r=r.sibling}function Sd(e,t,r){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(la,r)}catch{}switch(r.tag){case 5:rt||In(r,t);case 6:var a=Ye,d=Ot;Ye=null,Cr(e,t,r),Ye=a,Ot=d,Ye!==null&&(Ot?(e=Ye,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ye.removeChild(r.stateNode));break;case 18:Ye!==null&&(Ot?(e=Ye,r=r.stateNode,e.nodeType===8?uo(e.parentNode,r):e.nodeType===1&&uo(e,r),ms(e)):uo(Ye,r.stateNode));break;case 4:a=Ye,d=Ot,Ye=r.stateNode.containerInfo,Ot=!0,Cr(e,t,r),Ye=a,Ot=d;break;case 0:case 11:case 14:case 15:if(!rt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){d=a=a.next;do{var f=d,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&Go(r,t,g),d=d.next}while(d!==a)}Cr(e,t,r);break;case 1:if(!rt&&(In(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(_){Me(r,t,_)}Cr(e,t,r);break;case 21:Cr(e,t,r);break;case 22:r.mode&1?(rt=(a=rt)||r.memoizedState!==null,Cr(e,t,r),rt=a):Cr(e,t,r);break;default:Cr(e,t,r)}}function Nd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new em),t.forEach(function(a){var d=cm.bind(null,e,a);r.has(a)||(r.add(a),a.then(d,d))})}}function At(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var d=r[a];try{var f=e,g=t,_=g;e:for(;_!==null;){switch(_.tag){case 5:Ye=_.stateNode,Ot=!1;break e;case 3:Ye=_.stateNode.containerInfo,Ot=!0;break e;case 4:Ye=_.stateNode.containerInfo,Ot=!0;break e}_=_.return}if(Ye===null)throw Error(s(160));Sd(f,g,d),Ye=null,Ot=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch($){Me(d,t,$)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ed(t,e),t=t.sibling}function Ed(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Qt(e),a&4){try{$s(3,e,e.return),Ja(3,e)}catch(ce){Me(e,e.return,ce)}try{$s(5,e,e.return)}catch(ce){Me(e,e.return,ce)}}break;case 1:At(t,e),Qt(e),a&512&&r!==null&&In(r,r.return);break;case 5:if(At(t,e),Qt(e),a&512&&r!==null&&In(r,r.return),e.flags&32){var d=e.stateNode;try{xe(d,"")}catch(ce){Me(e,e.return,ce)}}if(a&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,g=r!==null?r.memoizedProps:f,_=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{_==="input"&&f.type==="radio"&&f.name!=null&&dn(d,f),xt(_,g);var $=xt(_,f);for(g=0;g<b.length;g+=2){var K=b[g],J=b[g+1];K==="style"?bt(d,J):K==="dangerouslySetInnerHTML"?zr(d,J):K==="children"?xe(d,J):C(d,K,J,$)}switch(_){case"input":Mr(d,f);break;case"textarea":sa(d,f);break;case"select":var V=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var ae=f.value;ae!=null?Xt(d,!!f.multiple,ae,!1):V!==!!f.multiple&&(f.defaultValue!=null?Xt(d,!!f.multiple,f.defaultValue,!0):Xt(d,!!f.multiple,f.multiple?[]:"",!1))}d[Ns]=f}catch(ce){Me(e,e.return,ce)}}break;case 6:if(At(t,e),Qt(e),a&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(ce){Me(e,e.return,ce)}}break;case 3:if(At(t,e),Qt(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{ms(t.containerInfo)}catch(ce){Me(e,e.return,ce)}break;case 4:At(t,e),Qt(e);break;case 13:At(t,e),Qt(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(el=ze())),a&4&&Nd(e);break;case 22:if(K=r!==null&&r.memoizedState!==null,e.mode&1?(rt=($=rt)||K,At(t,e),rt=$):At(t,e),Qt(e),a&8192){if($=e.memoizedState!==null,(e.stateNode.isHidden=$)&&!K&&(e.mode&1)!==0)for(le=e,K=e.child;K!==null;){for(J=le=K;le!==null;){switch(V=le,ae=V.child,V.tag){case 0:case 11:case 14:case 15:$s(4,V,V.return);break;case 1:In(V,V.return);var ue=V.stateNode;if(typeof ue.componentWillUnmount=="function"){a=V,r=V.return;try{t=a,ue.props=t.memoizedProps,ue.state=t.memoizedState,ue.componentWillUnmount()}catch(ce){Me(a,r,ce)}}break;case 5:In(V,V.return);break;case 22:if(V.memoizedState!==null){Pd(J);continue}}ae!==null?(ae.return=V,le=ae):Pd(J)}K=K.sibling}e:for(K=null,J=e;;){if(J.tag===5){if(K===null){K=J;try{d=J.stateNode,$?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(_=J.stateNode,b=J.memoizedProps.style,g=b!=null&&b.hasOwnProperty("display")?b.display:null,_.style.display=Ht("display",g))}catch(ce){Me(e,e.return,ce)}}}else if(J.tag===6){if(K===null)try{J.stateNode.nodeValue=$?"":J.memoizedProps}catch(ce){Me(e,e.return,ce)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===e)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===e)break e;for(;J.sibling===null;){if(J.return===null||J.return===e)break e;K===J&&(K=null),J=J.return}K===J&&(K=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:At(t,e),Qt(e),a&4&&Nd(e);break;case 21:break;default:At(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(kd(r)){var a=r;break e}r=r.return}throw Error(s(160))}switch(a.tag){case 5:var d=a.stateNode;a.flags&32&&(xe(d,""),a.flags&=-33);var f=bd(e);Yo(e,f,d);break;case 3:case 4:var g=a.stateNode.containerInfo,_=bd(e);Qo(e,_,g);break;default:throw Error(s(161))}}catch(b){Me(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rm(e,t,r){le=e,Cd(e)}function Cd(e,t,r){for(var a=(e.mode&1)!==0;le!==null;){var d=le,f=d.child;if(d.tag===22&&a){var g=d.memoizedState!==null||Ga;if(!g){var _=d.alternate,b=_!==null&&_.memoizedState!==null||rt;_=Ga;var $=rt;if(Ga=g,(rt=b)&&!$)for(le=d;le!==null;)g=le,b=g.child,g.tag===22&&g.memoizedState!==null?Rd(d):b!==null?(b.return=g,le=b):Rd(d);for(;f!==null;)le=f,Cd(f),f=f.sibling;le=d,Ga=_,rt=$}Td(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,le=f):Td(e)}}function Td(e){for(;le!==null;){var t=le;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:rt||Ja(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!rt)if(r===null)a.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:Dt(t.type,r.memoizedProps);a.componentDidUpdate(d,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Pc(t,f,a);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Pc(t,g,r)}break;case 5:var _=t.stateNode;if(r===null&&t.flags&4){r=_;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var $=t.alternate;if($!==null){var K=$.memoizedState;if(K!==null){var J=K.dehydrated;J!==null&&ms(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}rt||t.flags&512&&Jo(t)}catch(V){Me(t,t.return,V)}}if(t===e){le=null;break}if(r=t.sibling,r!==null){r.return=t.return,le=r;break}le=t.return}}function Pd(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var r=t.sibling;if(r!==null){r.return=t.return,le=r;break}le=t.return}}function Rd(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ja(4,t)}catch(b){Me(t,r,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var d=t.return;try{a.componentDidMount()}catch(b){Me(t,d,b)}}var f=t.return;try{Jo(t)}catch(b){Me(t,f,b)}break;case 5:var g=t.return;try{Jo(t)}catch(b){Me(t,g,b)}}}catch(b){Me(t,t.return,b)}if(t===e){le=null;break}var _=t.sibling;if(_!==null){_.return=t.return,le=_;break}le=t.return}}var nm=Math.ceil,Qa=F.ReactCurrentDispatcher,Xo=F.ReactCurrentOwner,Tt=F.ReactCurrentBatchConfig,Ce=0,Ke=null,We=null,Xe=0,kt=0,Dn=kr(0),He=0,Us=null,Zr=0,Ya=0,Zo=0,Ms=null,ft=null,el=0,On=1/0,lr=null,Xa=!1,tl=null,Tr=null,Za=!1,Pr=null,ei=0,Fs=0,rl=null,ti=-1,ri=0;function ot(){return(Ce&6)!==0?ze():ti!==-1?ti:ti=ze()}function Rr(e){return(e.mode&1)===0?1:(Ce&2)!==0&&Xe!==0?Xe&-Xe:Fp.transition!==null?(ri===0&&(ri=bu()),ri):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:Iu(e.type)),e)}function $t(e,t,r,a){if(50<Fs)throw Fs=0,rl=null,Error(s(185));cs(e,r,a),((Ce&2)===0||e!==Ke)&&(e===Ke&&((Ce&2)===0&&(Ya|=r),He===4&&Lr(e,Xe)),pt(e,a),r===1&&Ce===0&&(t.mode&1)===0&&(On=ze()+500,Pa&&Sr()))}function pt(e,t){var r=e.callbackNode;Ff(e,t);var a=da(e,e===Ke?Xe:0);if(a===0)r!==null&&_u(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&_u(r),t===1)e.tag===0?Mp(Id.bind(null,e)):vc(Id.bind(null,e)),Op(function(){(Ce&6)===0&&Sr()}),r=null;else{switch(Su(a)){case 1:r=Di;break;case 4:r=ju;break;case 16:r=oa;break;case 536870912:r=ku;break;default:r=oa}r=zd(r,Ld.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ld(e,t){if(ti=-1,ri=0,(Ce&6)!==0)throw Error(s(327));var r=e.callbackNode;if(An()&&e.callbackNode!==r)return null;var a=da(e,e===Ke?Xe:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=ni(e,a);else{t=a;var d=Ce;Ce|=2;var f=Od();(Ke!==e||Xe!==t)&&(lr=null,On=ze()+500,tn(e,t));do try{im();break}catch(_){Dd(e,_)}while(!0);wo(),Qa.current=f,Ce=d,We!==null?t=0:(Ke=null,Xe=0,t=He)}if(t!==0){if(t===2&&(d=Oi(e),d!==0&&(a=d,t=nl(e,d))),t===1)throw r=Us,tn(e,0),Lr(e,a),pt(e,ze()),r;if(t===6)Lr(e,a);else{if(d=e.current.alternate,(a&30)===0&&!sm(d)&&(t=ni(e,a),t===2&&(f=Oi(e),f!==0&&(a=f,t=nl(e,f))),t===1))throw r=Us,tn(e,0),Lr(e,a),pt(e,ze()),r;switch(e.finishedWork=d,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:rn(e,ft,lr);break;case 3:if(Lr(e,a),(a&130023424)===a&&(t=el+500-ze(),10<t)){if(da(e,0)!==0)break;if(d=e.suspendedLanes,(d&a)!==a){ot(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=lo(rn.bind(null,e,ft,lr),t);break}rn(e,ft,lr);break;case 4:if(Lr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,d=-1;0<a;){var g=31-Rt(a);f=1<<g,g=t[g],g>d&&(d=g),a&=~f}if(a=d,a=ze()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*nm(a/1960))-a,10<a){e.timeoutHandle=lo(rn.bind(null,e,ft,lr),a);break}rn(e,ft,lr);break;case 5:rn(e,ft,lr);break;default:throw Error(s(329))}}}return pt(e,ze()),e.callbackNode===r?Ld.bind(null,e):null}function nl(e,t){var r=Ms;return e.current.memoizedState.isDehydrated&&(tn(e,t).flags|=256),e=ni(e,t),e!==2&&(t=ft,ft=r,t!==null&&sl(t)),e}function sl(e){ft===null?ft=e:ft.push.apply(ft,e)}function sm(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var d=r[a],f=d.getSnapshot;d=d.value;try{if(!Lt(f(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lr(e,t){for(t&=~Zo,t&=~Ya,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Rt(t),a=1<<r;e[r]=-1,t&=~a}}function Id(e){if((Ce&6)!==0)throw Error(s(327));An();var t=da(e,0);if((t&1)===0)return pt(e,ze()),null;var r=ni(e,t);if(e.tag!==0&&r===2){var a=Oi(e);a!==0&&(t=a,r=nl(e,a))}if(r===1)throw r=Us,tn(e,0),Lr(e,t),pt(e,ze()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,rn(e,ft,lr),pt(e,ze()),null}function al(e,t){var r=Ce;Ce|=1;try{return e(t)}finally{Ce=r,Ce===0&&(On=ze()+500,Pa&&Sr())}}function en(e){Pr!==null&&Pr.tag===0&&(Ce&6)===0&&An();var t=Ce;Ce|=1;var r=Tt.transition,a=Pe;try{if(Tt.transition=null,Pe=1,e)return e()}finally{Pe=a,Tt.transition=r,Ce=t,(Ce&6)===0&&Sr()}}function il(){kt=Dn.current,De(Dn)}function tn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Dp(r)),We!==null)for(r=We.return;r!==null;){var a=r;switch(mo(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ca();break;case 3:Rn(),De(ct),De(Ze),Co();break;case 5:No(a);break;case 4:Rn();break;case 13:De($e);break;case 19:De($e);break;case 10:_o(a.type._context);break;case 22:case 23:il()}r=r.return}if(Ke=e,We=e=Ir(e.current,null),Xe=kt=t,He=0,Us=null,Zo=Ya=Zr=0,ft=Ms=null,Qr!==null){for(t=0;t<Qr.length;t++)if(r=Qr[t],a=r.interleaved,a!==null){r.interleaved=null;var d=a.next,f=r.pending;if(f!==null){var g=f.next;f.next=d,a.next=g}r.pending=a}Qr=null}return e}function Dd(e,t){do{var r=We;try{if(wo(),Fa.current=qa,za){for(var a=Ue.memoizedState;a!==null;){var d=a.queue;d!==null&&(d.pending=null),a=a.next}za=!1}if(Xr=0,Ve=qe=Ue=null,Ls=!1,Is=0,Xo.current=null,r===null||r.return===null){He=1,Us=t,We=null;break}e:{var f=e,g=r.return,_=r,b=t;if(t=Xe,_.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var $=b,K=_,J=K.tag;if((K.mode&1)===0&&(J===0||J===11||J===15)){var V=K.alternate;V?(K.updateQueue=V.updateQueue,K.memoizedState=V.memoizedState,K.lanes=V.lanes):(K.updateQueue=null,K.memoizedState=null)}var ae=ad(g);if(ae!==null){ae.flags&=-257,id(ae,g,_,f,t),ae.mode&1&&sd(f,$,t),t=ae,b=$;var ue=t.updateQueue;if(ue===null){var ce=new Set;ce.add(b),t.updateQueue=ce}else ue.add(b);break e}else{if((t&1)===0){sd(f,$,t),ol();break e}b=Error(s(426))}}else if(Oe&&_.mode&1){var Be=ad(g);if(Be!==null){(Be.flags&65536)===0&&(Be.flags|=256),id(Be,g,_,f,t),vo(Ln(b,_));break e}}f=b=Ln(b,_),He!==4&&(He=2),Ms===null?Ms=[f]:Ms.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var L=rd(f,b,t);Tc(f,L);break e;case 1:_=b;var T=f.type,O=f.stateNode;if((f.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Tr===null||!Tr.has(O)))){f.flags|=65536,t&=-t,f.lanes|=t;var ee=nd(f,_,t);Tc(f,ee);break e}}f=f.return}while(f!==null)}$d(r)}catch(de){t=de,We===r&&r!==null&&(We=r=r.return);continue}break}while(!0)}function Od(){var e=Qa.current;return Qa.current=qa,e===null?qa:e}function ol(){(He===0||He===3||He===2)&&(He=4),Ke===null||(Zr&268435455)===0&&(Ya&268435455)===0||Lr(Ke,Xe)}function ni(e,t){var r=Ce;Ce|=2;var a=Od();(Ke!==e||Xe!==t)&&(lr=null,tn(e,t));do try{am();break}catch(d){Dd(e,d)}while(!0);if(wo(),Ce=r,Qa.current=a,We!==null)throw Error(s(261));return Ke=null,Xe=0,He}function am(){for(;We!==null;)Ad(We)}function im(){for(;We!==null&&!Rf();)Ad(We)}function Ad(e){var t=Fd(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?$d(e):We=t,Xo.current=null}function $d(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Xp(r,t,kt),r!==null){We=r;return}}else{if(r=Zp(r,t),r!==null){r.flags&=32767,We=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,We=null;return}}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);He===0&&(He=5)}function rn(e,t,r){var a=Pe,d=Tt.transition;try{Tt.transition=null,Pe=1,om(e,t,r,a)}finally{Tt.transition=d,Pe=a}return null}function om(e,t,r,a){do An();while(Pr!==null);if((Ce&6)!==0)throw Error(s(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(zf(e,f),e===Ke&&(We=Ke=null,Xe=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Za||(Za=!0,zd(oa,function(){return An(),null})),f=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||f){f=Tt.transition,Tt.transition=null;var g=Pe;Pe=1;var _=Ce;Ce|=4,Xo.current=null,tm(e,r),Ed(r,e),Ep(io),pa=!!ao,io=ao=null,e.current=r,rm(r),Lf(),Ce=_,Pe=g,Tt.transition=f}else e.current=r;if(Za&&(Za=!1,Pr=e,ei=d),f=e.pendingLanes,f===0&&(Tr=null),Of(r.stateNode),pt(e,ze()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],a(d.value,{componentStack:d.stack,digest:d.digest});if(Xa)throw Xa=!1,e=tl,tl=null,e;return(ei&1)!==0&&e.tag!==0&&An(),f=e.pendingLanes,(f&1)!==0?e===rl?Fs++:(Fs=0,rl=e):Fs=0,Sr(),null}function An(){if(Pr!==null){var e=Su(ei),t=Tt.transition,r=Pe;try{if(Tt.transition=null,Pe=16>e?16:e,Pr===null)var a=!1;else{if(e=Pr,Pr=null,ei=0,(Ce&6)!==0)throw Error(s(331));var d=Ce;for(Ce|=4,le=e.current;le!==null;){var f=le,g=f.child;if((le.flags&16)!==0){var _=f.deletions;if(_!==null){for(var b=0;b<_.length;b++){var $=_[b];for(le=$;le!==null;){var K=le;switch(K.tag){case 0:case 11:case 15:$s(8,K,f)}var J=K.child;if(J!==null)J.return=K,le=J;else for(;le!==null;){K=le;var V=K.sibling,ae=K.return;if(jd(K),K===$){le=null;break}if(V!==null){V.return=ae,le=V;break}le=ae}}}var ue=f.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var Be=ce.sibling;ce.sibling=null,ce=Be}while(ce!==null)}}le=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,le=g;else e:for(;le!==null;){if(f=le,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:$s(9,f,f.return)}var L=f.sibling;if(L!==null){L.return=f.return,le=L;break e}le=f.return}}var T=e.current;for(le=T;le!==null;){g=le;var O=g.child;if((g.subtreeFlags&2064)!==0&&O!==null)O.return=g,le=O;else e:for(g=T;le!==null;){if(_=le,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:Ja(9,_)}}catch(de){Me(_,_.return,de)}if(_===g){le=null;break e}var ee=_.sibling;if(ee!==null){ee.return=_.return,le=ee;break e}le=_.return}}if(Ce=d,Sr(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(la,e)}catch{}a=!0}return a}finally{Pe=r,Tt.transition=t}}return!1}function Ud(e,t,r){t=Ln(r,t),t=rd(e,t,1),e=Er(e,t,1),t=ot(),e!==null&&(cs(e,1,t),pt(e,t))}function Me(e,t,r){if(e.tag===3)Ud(e,e,r);else for(;t!==null;){if(t.tag===3){Ud(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Tr===null||!Tr.has(a))){e=Ln(r,e),e=nd(t,e,1),t=Er(t,e,1),e=ot(),t!==null&&(cs(t,1,e),pt(t,e));break}}t=t.return}}function lm(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=ot(),e.pingedLanes|=e.suspendedLanes&r,Ke===e&&(Xe&r)===r&&(He===4||He===3&&(Xe&130023424)===Xe&&500>ze()-el?tn(e,0):Zo|=r),pt(e,t)}function Md(e,t){t===0&&((e.mode&1)===0?t=1:(t=ca,ca<<=1,(ca&130023424)===0&&(ca=4194304)));var r=ot();e=ar(e,t),e!==null&&(cs(e,t,r),pt(e,r))}function um(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Md(e,r)}function cm(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}a!==null&&a.delete(t),Md(e,r)}var Fd;Fd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)ht=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return ht=!1,Yp(e,t,r);ht=(e.flags&131072)!==0}else ht=!1,Oe&&(t.flags&1048576)!==0&&xc(t,La,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ka(e,t),e=t.pendingProps;var d=bn(t,Ze.current);Pn(t,r),d=Ro(null,t,a,e,d,r);var f=Lo();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(a)?(f=!0,Ta(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,bo(t),d.updater=Ha,t.stateNode=d,d._reactInternals=t,Uo(t,a,e,r),t=Bo(null,t,a,!0,f,r)):(t.tag=0,Oe&&f&&po(t),it(null,t,d,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,d=a._init,a=d(a._payload),t.type=a,d=t.tag=hm(a),e=Dt(a,e),d){case 0:t=zo(null,t,a,e,r);break e;case 1:t=hd(null,t,a,e,r);break e;case 11:t=od(null,t,a,e,r);break e;case 14:t=ld(null,t,a,Dt(a.type,e),r);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,d=t.pendingProps,d=t.elementType===a?d:Dt(a,d),zo(e,t,a,d,r);case 1:return a=t.type,d=t.pendingProps,d=t.elementType===a?d:Dt(a,d),hd(e,t,a,d,r);case 3:e:{if(fd(t),e===null)throw Error(s(387));a=t.pendingProps,f=t.memoizedState,d=f.element,Cc(e,t),Ua(t,a,null,r);var g=t.memoizedState;if(a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=Ln(Error(s(423)),t),t=pd(e,t,a,r,d);break e}else if(a!==d){d=Ln(Error(s(424)),t),t=pd(e,t,a,r,d);break e}else for(jt=jr(t.stateNode.containerInfo.firstChild),_t=t,Oe=!0,It=null,r=Nc(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(En(),a===d){t=or(e,t,r);break e}it(e,t,a,r)}t=t.child}return t;case 5:return Rc(t),e===null&&yo(t),a=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,g=d.children,oo(a,d)?g=null:f!==null&&oo(a,f)&&(t.flags|=32),dd(e,t),it(e,t,g,r),t.child;case 6:return e===null&&yo(t),null;case 13:return md(e,t,r);case 4:return So(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Cn(t,null,a,r):it(e,t,a,r),t.child;case 11:return a=t.type,d=t.pendingProps,d=t.elementType===a?d:Dt(a,d),od(e,t,a,d,r);case 7:return it(e,t,t.pendingProps,r),t.child;case 8:return it(e,t,t.pendingProps.children,r),t.child;case 12:return it(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,d=t.pendingProps,f=t.memoizedProps,g=d.value,Re(Oa,a._currentValue),a._currentValue=g,f!==null)if(Lt(f.value,g)){if(f.children===d.children&&!ct.current){t=or(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var _=f.dependencies;if(_!==null){g=f.child;for(var b=_.firstContext;b!==null;){if(b.context===a){if(f.tag===1){b=ir(-1,r&-r),b.tag=2;var $=f.updateQueue;if($!==null){$=$.shared;var K=$.pending;K===null?b.next=b:(b.next=K.next,K.next=b),$.pending=b}}f.lanes|=r,b=f.alternate,b!==null&&(b.lanes|=r),jo(f.return,r,t),_.lanes|=r;break}b=b.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(s(341));g.lanes|=r,_=g.alternate,_!==null&&(_.lanes|=r),jo(g,r,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}it(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,a=t.pendingProps.children,Pn(t,r),d=Et(d),a=a(d),t.flags|=1,it(e,t,a,r),t.child;case 14:return a=t.type,d=Dt(a,t.pendingProps),d=Dt(a.type,d),ld(e,t,a,d,r);case 15:return ud(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,d=t.pendingProps,d=t.elementType===a?d:Dt(a,d),Ka(e,t),t.tag=1,dt(a)?(e=!0,Ta(t)):e=!1,Pn(t,r),ed(t,a,d),Uo(t,a,d,r),Bo(null,t,a,!0,e,r);case 19:return yd(e,t,r);case 22:return cd(e,t,r)}throw Error(s(156,t.tag))};function zd(e,t){return wu(e,t)}function dm(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,r,a){return new dm(e,t,r,a)}function ll(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hm(e){if(typeof e=="function")return ll(e)?1:0;if(e!=null){if(e=e.$$typeof,e===H)return 11;if(e===fe)return 14}return 2}function Ir(e,t){var r=e.alternate;return r===null?(r=Pt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function si(e,t,r,a,d,f){var g=2;if(a=e,typeof e=="function")ll(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case q:return nn(r.children,d,f,t);case ge:g=8,d|=8;break;case we:return e=Pt(12,r,t,d|2),e.elementType=we,e.lanes=f,e;case se:return e=Pt(13,r,t,d),e.elementType=se,e.lanes=f,e;case Q:return e=Pt(19,r,t,d),e.elementType=Q,e.lanes=f,e;case je:return ai(r,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W:g=10;break e;case D:g=9;break e;case H:g=11;break e;case fe:g=14;break e;case ke:g=16,a=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=Pt(g,r,t,d),t.elementType=e,t.type=a,t.lanes=f,t}function nn(e,t,r,a){return e=Pt(7,e,a,t),e.lanes=r,e}function ai(e,t,r,a){return e=Pt(22,e,a,t),e.elementType=je,e.lanes=r,e.stateNode={isHidden:!1},e}function ul(e,t,r){return e=Pt(6,e,null,t),e.lanes=r,e}function cl(e,t,r){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fm(e,t,r,a,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ai(0),this.expirationTimes=Ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.identifierPrefix=a,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function dl(e,t,r,a,d,f,g,_,b){return e=new fm(e,t,r,_,b),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Pt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bo(f),e}function pm(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function Bd(e){if(!e)return br;e=e._reactInternals;e:{if(Hr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(dt(r))return gc(e,r,t)}return t}function Wd(e,t,r,a,d,f,g,_,b){return e=dl(r,a,!0,e,d,f,g,_,b),e.context=Bd(null),r=e.current,a=ot(),d=Rr(r),f=ir(a,d),f.callback=t??null,Er(r,f,d),e.current.lanes=d,cs(e,d,a),pt(e,a),e}function ii(e,t,r,a){var d=t.current,f=ot(),g=Rr(d);return r=Bd(r),t.context===null?t.context=r:t.pendingContext=r,t=ir(f,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Er(d,t,g),e!==null&&($t(e,d,g,f),$a(e,d,g)),g}function oi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function hl(e,t){qd(e,t),(e=e.alternate)&&qd(e,t)}function mm(){return null}var Hd=typeof reportError=="function"?reportError:function(e){console.error(e)};function fl(e){this._internalRoot=e}li.prototype.render=fl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));ii(e,t,null,null)},li.prototype.unmount=fl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;en(function(){ii(null,e,null,null)}),t[tr]=null}};function li(e){this._internalRoot=e}li.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xr.length&&t!==0&&t<xr[r].priority;r++);xr.splice(r,0,e),r===0&&Ru(e)}};function pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ui(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vd(){}function gm(e,t,r,a,d){if(d){if(typeof a=="function"){var f=a;a=function(){var $=oi(g);f.call($)}}var g=Wd(t,a,e,0,null,!1,!1,"",Vd);return e._reactRootContainer=g,e[tr]=g.current,bs(e.nodeType===8?e.parentNode:e),en(),g}for(;d=e.lastChild;)e.removeChild(d);if(typeof a=="function"){var _=a;a=function(){var $=oi(b);_.call($)}}var b=dl(e,0,!1,null,null,!1,!1,"",Vd);return e._reactRootContainer=b,e[tr]=b.current,bs(e.nodeType===8?e.parentNode:e),en(function(){ii(t,b,r,a)}),b}function ci(e,t,r,a,d){var f=r._reactRootContainer;if(f){var g=f;if(typeof d=="function"){var _=d;d=function(){var b=oi(g);_.call(b)}}ii(t,g,e,d)}else g=gm(r,t,e,d,a);return oi(g)}Nu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=us(t.pendingLanes);r!==0&&($i(t,r|1),pt(t,ze()),(Ce&6)===0&&(On=ze()+500,Sr()))}break;case 13:en(function(){var a=ar(e,1);if(a!==null){var d=ot();$t(a,e,1,d)}}),hl(e,1)}},Ui=function(e){if(e.tag===13){var t=ar(e,134217728);if(t!==null){var r=ot();$t(t,e,134217728,r)}hl(e,134217728)}},Eu=function(e){if(e.tag===13){var t=Rr(e),r=ar(e,t);if(r!==null){var a=ot();$t(r,e,t,a)}hl(e,t)}},Cu=function(){return Pe},Tu=function(e,t){var r=Pe;try{return Pe=e,t()}finally{Pe=r}},qr=function(e,t,r){switch(t){case"input":if(Mr(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var d=Ea(a);if(!d)throw Error(s(90));Ne(a),Mr(a,d)}}}break;case"textarea":sa(e,r);break;case"select":t=r.value,t!=null&&Xt(e,!!r.multiple,t,!1)}},fu=al,pu=en;var ym={usingClientEntryPoint:!1,Events:[Es,jn,Ea,du,hu,al]},zs={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vm={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vu(e),e===null?null:e.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||mm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!di.isDisabled&&di.supportsFiber)try{la=di.inject(vm),Vt=di}catch{}}return mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ym,mt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pl(t))throw Error(s(200));return pm(e,t,null,r)},mt.createRoot=function(e,t){if(!pl(e))throw Error(s(299));var r=!1,a="",d=Hd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=dl(e,1,!1,null,null,r,!1,a,d),e[tr]=t.current,bs(e.nodeType===8?e.parentNode:e),new fl(t)},mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=vu(t),e=e===null?null:e.stateNode,e},mt.flushSync=function(e){return en(e)},mt.hydrate=function(e,t,r){if(!ui(t))throw Error(s(200));return ci(null,e,t,!0,r)},mt.hydrateRoot=function(e,t,r){if(!pl(e))throw Error(s(405));var a=r!=null&&r.hydratedSources||null,d=!1,f="",g=Hd;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=Wd(t,null,e,1,r??null,d,!1,f,g),e[tr]=t.current,bs(e),a)for(e=0;e<a.length;e++)r=a[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new li(t)},mt.render=function(e,t,r){if(!ui(t))throw Error(s(200));return ci(null,e,t,!1,r)},mt.unmountComponentAtNode=function(e){if(!ui(e))throw Error(s(40));return e._reactRootContainer?(en(function(){ci(null,null,e,!1,function(){e._reactRootContainer=null,e[tr]=null})}),!0):!1},mt.unstable_batchedUpdates=al,mt.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!ui(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return ci(e,t,r,!1,a)},mt.version="18.3.1-next-f1338f8080-20240426",mt}var eh;function Cm(){if(eh)return yl.exports;eh=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),yl.exports=Em(),yl.exports}var th;function Tm(){if(th)return hi;th=1;var l=Cm();return hi.createRoot=l.createRoot,hi.hydrateRoot=l.hydrateRoot,hi}var Pm=Tm();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rh="popstate";function Rm(l={}){function n(o,u){let{pathname:c,search:h,hash:m}=o.location;return Rl("",{pathname:c,search:h,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function s(o,u){return typeof u=="string"?u:Js(u)}return Im(n,s,null,l)}function Ae(l,n){if(l===!1||l===null||typeof l>"u")throw new Error(n)}function Ft(l,n){if(!l){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Lm(){return Math.random().toString(36).substring(2,10)}function nh(l,n){return{usr:l.state,key:l.key,idx:n}}function Rl(l,n,s=null,o){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof n=="string"?Zn(n):n,state:s,key:n&&n.key||o||Lm()}}function Js({pathname:l="/",search:n="",hash:s=""}){return n&&n!=="?"&&(l+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(l+=s.charAt(0)==="#"?s:"#"+s),l}function Zn(l){let n={};if(l){let s=l.indexOf("#");s>=0&&(n.hash=l.substring(s),l=l.substring(0,s));let o=l.indexOf("?");o>=0&&(n.search=l.substring(o),l=l.substring(0,o)),l&&(n.pathname=l)}return n}function Im(l,n,s,o={}){let{window:u=document.defaultView,v5Compat:c=!1}=o,h=u.history,m="POP",p=null,y=v();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function v(){return(h.state||{idx:null}).idx}function w(){m="POP";let j=v(),P=j==null?null:j-y;y=j,p&&p({action:m,location:A.location,delta:P})}function S(j,P){m="PUSH";let M=Rl(A.location,j,P);y=v()+1;let C=nh(M,y),F=A.createHref(M);try{h.pushState(C,"",F)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;u.location.assign(F)}c&&p&&p({action:m,location:A.location,delta:1})}function I(j,P){m="REPLACE";let M=Rl(A.location,j,P);y=v();let C=nh(M,y),F=A.createHref(M);h.replaceState(C,"",F),c&&p&&p({action:m,location:A.location,delta:0})}function E(j){return Dm(j)}let A={get action(){return m},get location(){return l(u,h)},listen(j){if(p)throw new Error("A history only accepts one active listener");return u.addEventListener(rh,w),p=j,()=>{u.removeEventListener(rh,w),p=null}},createHref(j){return n(u,j)},createURL:E,encodeLocation(j){let P=E(j);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:S,replace:I,go(j){return h.go(j)}};return A}function Dm(l,n=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Ae(s,"No window.location.(origin|href) available to create URL");let o=typeof l=="string"?l:Js(l);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=s+o),new URL(o,s)}function Ah(l,n,s="/"){return Om(l,n,s,!1)}function Om(l,n,s,o){let u=typeof n=="string"?Zn(n):n,c=fr(u.pathname||"/",s);if(c==null)return null;let h=$h(l);Am(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let y=Km(c);m=Hm(h[p],y,o)}return m}function $h(l,n=[],s=[],o=""){let u=(c,h,m)=>{let p={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};p.relativePath.startsWith("/")&&(Ae(p.relativePath.startsWith(o),`Absolute route path "${p.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(o.length));let y=hr([o,p.relativePath]),v=s.concat(p);c.children&&c.children.length>0&&(Ae(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),$h(c.children,n,v,y)),!(c.path==null&&!c.index)&&n.push({path:y,score:Wm(y,c.index),routesMeta:v})};return l.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))u(c,h);else for(let m of Uh(c.path))u(c,h,m)}),n}function Uh(l){let n=l.split("/");if(n.length===0)return[];let[s,...o]=n,u=s.endsWith("?"),c=s.replace(/\?$/,"");if(o.length===0)return u?[c,""]:[c];let h=Uh(o.join("/")),m=[];return m.push(...h.map(p=>p===""?c:[c,p].join("/"))),u&&m.push(...h),m.map(p=>l.startsWith("/")&&p===""?"/":p)}function Am(l){l.sort((n,s)=>n.score!==s.score?s.score-n.score:qm(n.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}var $m=/^:[\w-]+$/,Um=3,Mm=2,Fm=1,zm=10,Bm=-2,sh=l=>l==="*";function Wm(l,n){let s=l.split("/"),o=s.length;return s.some(sh)&&(o+=Bm),n&&(o+=Mm),s.filter(u=>!sh(u)).reduce((u,c)=>u+($m.test(c)?Um:c===""?Fm:zm),o)}function qm(l,n){return l.length===n.length&&l.slice(0,-1).every((o,u)=>o===n[u])?l[l.length-1]-n[n.length-1]:0}function Hm(l,n,s=!1){let{routesMeta:o}=l,u={},c="/",h=[];for(let m=0;m<o.length;++m){let p=o[m],y=m===o.length-1,v=c==="/"?n:n.slice(c.length)||"/",w=ji({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),S=p.route;if(!w&&y&&s&&!o[o.length-1].route.index&&(w=ji({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!w)return null;Object.assign(u,w.params),h.push({params:u,pathname:hr([c,w.pathname]),pathnameBase:Ym(hr([c,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(c=hr([c,w.pathnameBase]))}return h}function ji(l,n){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[s,o]=Vm(l.path,l.caseSensitive,l.end),u=n.match(s);if(!u)return null;let c=u[0],h=c.replace(/(.)\/+$/,"$1"),m=u.slice(1);return{params:o.reduce((y,{paramName:v,isOptional:w},S)=>{if(v==="*"){let E=m[S]||"";h=c.slice(0,c.length-E.length).replace(/(.)\/+$/,"$1")}const I=m[S];return w&&!I?y[v]=void 0:y[v]=(I||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:l}}function Vm(l,n=!1,s=!0){Ft(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let o=[],u="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(o.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(o.push({paramName:"*"}),u+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":l!==""&&l!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,n?void 0:"i"),o]}function Km(l){try{return l.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Ft(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),l}}function fr(l,n){if(n==="/")return l;if(!l.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,o=l.charAt(s);return o&&o!=="/"?null:l.slice(s)||"/"}function Gm(l,n="/"){let{pathname:s,search:o="",hash:u=""}=typeof l=="string"?Zn(l):l;return{pathname:s?s.startsWith("/")?s:Jm(s,n):n,search:Xm(o),hash:Zm(u)}}function Jm(l,n){let s=n.replace(/\/+$/,"").split("/");return l.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function wl(l,n,s,o){return`Cannot include a '${l}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Qm(l){return l.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function Vl(l){let n=Qm(l);return n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase)}function Kl(l,n,s,o=!1){let u;typeof l=="string"?u=Zn(l):(u={...l},Ae(!u.pathname||!u.pathname.includes("?"),wl("?","pathname","search",u)),Ae(!u.pathname||!u.pathname.includes("#"),wl("#","pathname","hash",u)),Ae(!u.search||!u.search.includes("#"),wl("#","search","hash",u)));let c=l===""||u.pathname==="",h=c?"/":u.pathname,m;if(h==null)m=s;else{let w=n.length-1;if(!o&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),w-=1;u.pathname=S.join("/")}m=w>=0?n[w]:"/"}let p=Gm(u,m),y=h&&h!=="/"&&h.endsWith("/"),v=(c||h===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var hr=l=>l.join("/").replace(/\/\/+/g,"/"),Ym=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),Xm=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Zm=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function eg(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var Mh=["POST","PUT","PATCH","DELETE"];new Set(Mh);var tg=["GET",...Mh];new Set(tg);var es=k.createContext(null);es.displayName="DataRouter";var Ni=k.createContext(null);Ni.displayName="DataRouterState";k.createContext(!1);var Fh=k.createContext({isTransitioning:!1});Fh.displayName="ViewTransition";var rg=k.createContext(new Map);rg.displayName="Fetchers";var ng=k.createContext(null);ng.displayName="Await";var zt=k.createContext(null);zt.displayName="Navigation";var Xs=k.createContext(null);Xs.displayName="Location";var Bt=k.createContext({outlet:null,matches:[],isDataRoute:!1});Bt.displayName="Route";var Gl=k.createContext(null);Gl.displayName="RouteError";function sg(l,{relative:n}={}){Ae(ts(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:o}=k.useContext(zt),{hash:u,pathname:c,search:h}=Zs(l,{relative:n}),m=c;return s!=="/"&&(m=c==="/"?s:hr([s,c])),o.createHref({pathname:m,search:h,hash:u})}function ts(){return k.useContext(Xs)!=null}function Yt(){return Ae(ts(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Xs).location}var zh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Bh(l){k.useContext(zt).static||k.useLayoutEffect(l)}function Jl(){let{isDataRoute:l}=k.useContext(Bt);return l?xg():ag()}function ag(){Ae(ts(),"useNavigate() may be used only in the context of a <Router> component.");let l=k.useContext(es),{basename:n,navigator:s}=k.useContext(zt),{matches:o}=k.useContext(Bt),{pathname:u}=Yt(),c=JSON.stringify(Vl(o)),h=k.useRef(!1);return Bh(()=>{h.current=!0}),k.useCallback((p,y={})=>{if(Ft(h.current,zh),!h.current)return;if(typeof p=="number"){s.go(p);return}let v=Kl(p,JSON.parse(c),u,y.relative==="path");l==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:hr([n,v.pathname])),(y.replace?s.replace:s.push)(v,y.state,y)},[n,s,c,u,l])}var ig=k.createContext(null);function og(l){let n=k.useContext(Bt).outlet;return n&&k.createElement(ig.Provider,{value:l},n)}function Zs(l,{relative:n}={}){let{matches:s}=k.useContext(Bt),{pathname:o}=Yt(),u=JSON.stringify(Vl(s));return k.useMemo(()=>Kl(l,JSON.parse(u),o,n==="path"),[l,u,o,n])}function lg(l,n){return Wh(l,n)}function Wh(l,n,s,o){Ae(ts(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=k.useContext(zt),{matches:c}=k.useContext(Bt),h=c[c.length-1],m=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",v=h&&h.route;{let P=v&&v.path||"";qh(p,!v||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let w=Yt(),S;if(n){let P=typeof n=="string"?Zn(n):n;Ae(y==="/"||P.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${P.pathname}" was given in the \`location\` prop.`),S=P}else S=w;let I=S.pathname||"/",E=I;if(y!=="/"){let P=y.replace(/^\//,"").split("/");E="/"+I.replace(/^\//,"").split("/").slice(P.length).join("/")}let A=Ah(l,{pathname:E});Ft(v||A!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Ft(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=fg(A&&A.map(P=>Object.assign({},P,{params:Object.assign({},m,P.params),pathname:hr([y,u.encodeLocation?u.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?y:hr([y,u.encodeLocation?u.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),c,s,o);return n&&j?k.createElement(Xs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},j):j}function ug(){let l=vg(),n=eg(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),s=l instanceof Error?l.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},c={padding:"2px 4px",backgroundColor:o},h=null;return console.error("Error handled by React Router default ErrorBoundary:",l),h=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:c},"ErrorBoundary")," or"," ",k.createElement("code",{style:c},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},n),s?k.createElement("pre",{style:u},s):null,h)}var cg=k.createElement(ug,null),dg=class extends k.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,n){return n.location!==l.location||n.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:n.error,location:n.location,revalidation:l.revalidation||n.revalidation}}componentDidCatch(l,n){console.error("React Router caught the following error during render",l,n)}render(){return this.state.error!==void 0?k.createElement(Bt.Provider,{value:this.props.routeContext},k.createElement(Gl.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hg({routeContext:l,match:n,children:s}){let o=k.useContext(es);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Bt.Provider,{value:l},s)}function fg(l,n=[],s=null,o=null){if(l==null){if(!s)return null;if(s.errors)l=s.matches;else if(n.length===0&&!s.initialized&&s.matches.length>0)l=s.matches;else return null}let u=l,c=s?.errors;if(c!=null){let p=u.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Ae(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),u=u.slice(0,Math.min(u.length,p+1))}let h=!1,m=-1;if(s)for(let p=0;p<u.length;p++){let y=u[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=p),y.route.id){let{loaderData:v,errors:w}=s,S=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||S){h=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((p,y,v)=>{let w,S=!1,I=null,E=null;s&&(w=c&&y.route.id?c[y.route.id]:void 0,I=y.route.errorElement||cg,h&&(m<0&&v===0?(qh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):m===v&&(S=!0,E=y.route.hydrateFallbackElement||null)));let A=n.concat(u.slice(0,v+1)),j=()=>{let P;return w?P=I:S?P=E:y.route.Component?P=k.createElement(y.route.Component,null):y.route.element?P=y.route.element:P=p,k.createElement(hg,{match:y,routeContext:{outlet:p,matches:A,isDataRoute:s!=null},children:P})};return s&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?k.createElement(dg,{location:s.location,revalidation:s.revalidation,component:I,error:w,children:j(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):j()},null)}function Ql(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pg(l){let n=k.useContext(es);return Ae(n,Ql(l)),n}function mg(l){let n=k.useContext(Ni);return Ae(n,Ql(l)),n}function gg(l){let n=k.useContext(Bt);return Ae(n,Ql(l)),n}function Yl(l){let n=gg(l),s=n.matches[n.matches.length-1];return Ae(s.route.id,`${l} can only be used on routes that contain a unique "id"`),s.route.id}function yg(){return Yl("useRouteId")}function vg(){let l=k.useContext(Gl),n=mg("useRouteError"),s=Yl("useRouteError");return l!==void 0?l:n.errors?.[s]}function xg(){let{router:l}=pg("useNavigate"),n=Yl("useNavigate"),s=k.useRef(!1);return Bh(()=>{s.current=!0}),k.useCallback(async(u,c={})=>{Ft(s.current,zh),s.current&&(typeof u=="number"?l.navigate(u):await l.navigate(u,{fromRouteId:n,...c}))},[l,n])}var ah={};function qh(l,n,s){!n&&!ah[l]&&(ah[l]=!0,Ft(!1,s))}k.memo(wg);function wg({routes:l,future:n,state:s}){return Wh(l,void 0,s,n)}function _g({to:l,replace:n,state:s,relative:o}){Ae(ts(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=k.useContext(zt);Ft(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=k.useContext(Bt),{pathname:h}=Yt(),m=Jl(),p=Kl(l,Vl(c),h,o==="path"),y=JSON.stringify(p);return k.useEffect(()=>{m(JSON.parse(y),{replace:n,state:s,relative:o})},[m,y,o,n,s]),null}function Hh(l){return og(l.context)}function yt(l){Ae(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jg({basename:l="/",children:n=null,location:s,navigationType:o="POP",navigator:u,static:c=!1}){Ae(!ts(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=l.replace(/^\/*/,"/"),m=k.useMemo(()=>({basename:h,navigator:u,static:c,future:{}}),[h,u,c]);typeof s=="string"&&(s=Zn(s));let{pathname:p="/",search:y="",hash:v="",state:w=null,key:S="default"}=s,I=k.useMemo(()=>{let E=fr(p,h);return E==null?null:{location:{pathname:E,search:y,hash:v,state:w,key:S},navigationType:o}},[h,p,y,v,w,S,o]);return Ft(I!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:k.createElement(zt.Provider,{value:m},k.createElement(Xs.Provider,{children:n,value:I}))}function kg({children:l,location:n}){return lg(Ll(l),n)}function Ll(l,n=[]){let s=[];return k.Children.forEach(l,(o,u)=>{if(!k.isValidElement(o))return;let c=[...n,u];if(o.type===k.Fragment){s.push.apply(s,Ll(o.props.children,c));return}Ae(o.type===yt,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ae(!o.props.index||!o.props.children,"An index route cannot have child routes.");let h={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=Ll(o.props.children,c)),s.push(h)}),s}var vi="get",xi="application/x-www-form-urlencoded";function Ei(l){return l!=null&&typeof l.tagName=="string"}function bg(l){return Ei(l)&&l.tagName.toLowerCase()==="button"}function Sg(l){return Ei(l)&&l.tagName.toLowerCase()==="form"}function Ng(l){return Ei(l)&&l.tagName.toLowerCase()==="input"}function Eg(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function Cg(l,n){return l.button===0&&(!n||n==="_self")&&!Eg(l)}var fi=null;function Tg(){if(fi===null)try{new FormData(document.createElement("form"),0),fi=!1}catch{fi=!0}return fi}var Pg=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _l(l){return l!=null&&!Pg.has(l)?(Ft(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xi}"`),null):l}function Rg(l,n){let s,o,u,c,h;if(Sg(l)){let m=l.getAttribute("action");o=m?fr(m,n):null,s=l.getAttribute("method")||vi,u=_l(l.getAttribute("enctype"))||xi,c=new FormData(l)}else if(bg(l)||Ng(l)&&(l.type==="submit"||l.type==="image")){let m=l.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=l.getAttribute("formaction")||m.getAttribute("action");if(o=p?fr(p,n):null,s=l.getAttribute("formmethod")||m.getAttribute("method")||vi,u=_l(l.getAttribute("formenctype"))||_l(m.getAttribute("enctype"))||xi,c=new FormData(m,l),!Tg()){let{name:y,type:v,value:w}=l;if(v==="image"){let S=y?`${y}.`:"";c.append(`${S}x`,"0"),c.append(`${S}y`,"0")}else y&&c.append(y,w)}}else{if(Ei(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=vi,o=null,u=xi,h=l}return c&&u==="text/plain"&&(h=c,c=void 0),{action:o,method:s.toLowerCase(),encType:u,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xl(l,n){if(l===!1||l===null||typeof l>"u")throw new Error(n)}function Lg(l,n,s){let o=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o.pathname==="/"?o.pathname=`_root.${s}`:n&&fr(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function Ig(l,n){if(l.id in n)return n[l.id];try{let s=await import(l.module);return n[l.id]=s,s}catch(s){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Dg(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function Og(l,n,s){let o=await Promise.all(l.map(async u=>{let c=n.routes[u.route.id];if(c){let h=await Ig(c,s);return h.links?h.links():[]}return[]}));return Mg(o.flat(1).filter(Dg).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function ih(l,n,s,o,u,c){let h=(p,y)=>s[y]?p.route.id!==s[y].route.id:!0,m=(p,y)=>s[y].pathname!==p.pathname||s[y].route.path?.endsWith("*")&&s[y].params["*"]!==p.params["*"];return c==="assets"?n.filter((p,y)=>h(p,y)||m(p,y)):c==="data"?n.filter((p,y)=>{let v=o.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,y)||m(p,y))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function Ag(l,n,{includeHydrateFallback:s}={}){return $g(l.map(o=>{let u=n.routes[o.route.id];if(!u)return[];let c=[u.module];return u.clientActionModule&&(c=c.concat(u.clientActionModule)),u.clientLoaderModule&&(c=c.concat(u.clientLoaderModule)),s&&u.hydrateFallbackModule&&(c=c.concat(u.hydrateFallbackModule)),u.imports&&(c=c.concat(u.imports)),c}).flat(1))}function $g(l){return[...new Set(l)]}function Ug(l){let n={},s=Object.keys(l).sort();for(let o of s)n[o]=l[o];return n}function Mg(l,n){let s=new Set;return new Set(n),l.reduce((o,u)=>{let c=JSON.stringify(Ug(u));return s.has(c)||(s.add(c),o.push({key:c,link:u})),o},[])}function Vh(){let l=k.useContext(es);return Xl(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Fg(){let l=k.useContext(Ni);return Xl(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var Zl=k.createContext(void 0);Zl.displayName="FrameworkContext";function Kh(){let l=k.useContext(Zl);return Xl(l,"You must render this element inside a <HydratedRouter> element"),l}function zg(l,n){let s=k.useContext(Zl),[o,u]=k.useState(!1),[c,h]=k.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:w}=n,S=k.useRef(null);k.useEffect(()=>{if(l==="render"&&h(!0),l==="viewport"){let A=P=>{P.forEach(M=>{h(M.isIntersecting)})},j=new IntersectionObserver(A,{threshold:.5});return S.current&&j.observe(S.current),()=>{j.disconnect()}}},[l]),k.useEffect(()=>{if(o){let A=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(A)}}},[o]);let I=()=>{u(!0)},E=()=>{u(!1),h(!1)};return s?l!=="intent"?[c,S,{}]:[c,S,{onFocus:Ws(m,I),onBlur:Ws(p,E),onMouseEnter:Ws(y,I),onMouseLeave:Ws(v,E),onTouchStart:Ws(w,I)}]:[!1,S,{}]}function Ws(l,n){return s=>{l&&l(s),s.defaultPrevented||n(s)}}function Bg({page:l,...n}){let{router:s}=Vh(),o=k.useMemo(()=>Ah(s.routes,l,s.basename),[s.routes,l,s.basename]);return o?k.createElement(qg,{page:l,matches:o,...n}):null}function Wg(l){let{manifest:n,routeModules:s}=Kh(),[o,u]=k.useState([]);return k.useEffect(()=>{let c=!1;return Og(l,n,s).then(h=>{c||u(h)}),()=>{c=!0}},[l,n,s]),o}function qg({page:l,matches:n,...s}){let o=Yt(),{manifest:u,routeModules:c}=Kh(),{basename:h}=Vh(),{loaderData:m,matches:p}=Fg(),y=k.useMemo(()=>ih(l,n,p,u,o,"data"),[l,n,p,u,o]),v=k.useMemo(()=>ih(l,n,p,u,o,"assets"),[l,n,p,u,o]),w=k.useMemo(()=>{if(l===o.pathname+o.search+o.hash)return[];let E=new Set,A=!1;if(n.forEach(P=>{let M=u.routes[P.route.id];!M||!M.hasLoader||(!y.some(C=>C.route.id===P.route.id)&&P.route.id in m&&c[P.route.id]?.shouldRevalidate||M.hasClientLoader?A=!0:E.add(P.route.id))}),E.size===0)return[];let j=Lg(l,h,"data");return A&&E.size>0&&j.searchParams.set("_routes",n.filter(P=>E.has(P.route.id)).map(P=>P.route.id).join(",")),[j.pathname+j.search]},[h,m,o,u,y,n,l,c]),S=k.useMemo(()=>Ag(v,u),[v,u]),I=Wg(v);return k.createElement(k.Fragment,null,w.map(E=>k.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...s})),S.map(E=>k.createElement("link",{key:E,rel:"modulepreload",href:E,...s})),I.map(({key:E,link:A})=>k.createElement("link",{key:E,...A})))}function Hg(...l){return n=>{l.forEach(s=>{typeof s=="function"?s(n):s!=null&&(s.current=n)})}}var Gh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gh&&(window.__reactRouterVersion="7.7.1")}catch{}function Vg({basename:l,children:n,window:s}){let o=k.useRef();o.current==null&&(o.current=Rm({window:s,v5Compat:!0}));let u=o.current,[c,h]=k.useState({action:u.action,location:u.location}),m=k.useCallback(p=>{k.startTransition(()=>h(p))},[h]);return k.useLayoutEffect(()=>u.listen(m),[u,m]),k.createElement(jg,{basename:l,children:n,location:c.location,navigationType:c.action,navigator:u})}var Jh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qh=k.forwardRef(function({onClick:n,discover:s="render",prefetch:o="none",relative:u,reloadDocument:c,replace:h,state:m,target:p,to:y,preventScrollReset:v,viewTransition:w,...S},I){let{basename:E}=k.useContext(zt),A=typeof y=="string"&&Jh.test(y),j,P=!1;if(typeof y=="string"&&A&&(j=y,Gh))try{let we=new URL(window.location.href),W=y.startsWith("//")?new URL(we.protocol+y):new URL(y),D=fr(W.pathname,E);W.origin===we.origin&&D!=null?y=D+W.search+W.hash:P=!0}catch{Ft(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=sg(y,{relative:u}),[C,F,Z]=zg(o,S),B=Jg(y,{replace:h,state:m,target:p,preventScrollReset:v,relative:u,viewTransition:w});function q(we){n&&n(we),we.defaultPrevented||B(we)}let ge=k.createElement("a",{...S,...Z,href:j||M,onClick:P||c?n:q,ref:Hg(I,F),target:p,"data-discover":!A&&s==="render"?"true":void 0});return C&&!A?k.createElement(k.Fragment,null,ge,k.createElement(Bg,{page:M})):ge});Qh.displayName="Link";var eu=k.forwardRef(function({"aria-current":n="page",caseSensitive:s=!1,className:o="",end:u=!1,style:c,to:h,viewTransition:m,children:p,...y},v){let w=Zs(h,{relative:y.relative}),S=Yt(),I=k.useContext(Ni),{navigator:E,basename:A}=k.useContext(zt),j=I!=null&&e0(w)&&m===!0,P=E.encodeLocation?E.encodeLocation(w).pathname:w.pathname,M=S.pathname,C=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;s||(M=M.toLowerCase(),C=C?C.toLowerCase():null,P=P.toLowerCase()),C&&A&&(C=fr(C,A)||C);const F=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let Z=M===P||!u&&M.startsWith(P)&&M.charAt(F)==="/",B=C!=null&&(C===P||!u&&C.startsWith(P)&&C.charAt(P.length)==="/"),q={isActive:Z,isPending:B,isTransitioning:j},ge=Z?n:void 0,we;typeof o=="function"?we=o(q):we=[o,Z?"active":null,B?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let W=typeof c=="function"?c(q):c;return k.createElement(Qh,{...y,"aria-current":ge,className:we,ref:v,style:W,to:h,viewTransition:m},typeof p=="function"?p(q):p)});eu.displayName="NavLink";var Kg=k.forwardRef(({discover:l="render",fetcherKey:n,navigate:s,reloadDocument:o,replace:u,state:c,method:h=vi,action:m,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:w,...S},I)=>{let E=Xg(),A=Zg(m,{relative:y}),j=h.toLowerCase()==="get"?"get":"post",P=typeof m=="string"&&Jh.test(m),M=C=>{if(p&&p(C),C.defaultPrevented)return;C.preventDefault();let F=C.nativeEvent.submitter,Z=F?.getAttribute("formmethod")||h;E(F||C.currentTarget,{fetcherKey:n,method:Z,navigate:s,replace:u,state:c,relative:y,preventScrollReset:v,viewTransition:w})};return k.createElement("form",{ref:I,method:j,action:A,onSubmit:o?p:M,...S,"data-discover":!P&&l==="render"?"true":void 0})});Kg.displayName="Form";function Gg(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yh(l){let n=k.useContext(es);return Ae(n,Gg(l)),n}function Jg(l,{target:n,replace:s,state:o,preventScrollReset:u,relative:c,viewTransition:h}={}){let m=Jl(),p=Yt(),y=Zs(l,{relative:c});return k.useCallback(v=>{if(Cg(v,n)){v.preventDefault();let w=s!==void 0?s:Js(p)===Js(y);m(l,{replace:w,state:o,preventScrollReset:u,relative:c,viewTransition:h})}},[p,m,y,s,o,n,l,u,c,h])}var Qg=0,Yg=()=>`__${String(++Qg)}__`;function Xg(){let{router:l}=Yh("useSubmit"),{basename:n}=k.useContext(zt),s=yg();return k.useCallback(async(o,u={})=>{let{action:c,method:h,encType:m,formData:p,body:y}=Rg(o,n);if(u.navigate===!1){let v=u.fetcherKey||Yg();await l.fetch(v,s,u.action||c,{preventScrollReset:u.preventScrollReset,formData:p,body:y,formMethod:u.method||h,formEncType:u.encType||m,flushSync:u.flushSync})}else await l.navigate(u.action||c,{preventScrollReset:u.preventScrollReset,formData:p,body:y,formMethod:u.method||h,formEncType:u.encType||m,replace:u.replace,state:u.state,fromRouteId:s,flushSync:u.flushSync,viewTransition:u.viewTransition})},[l,n,s])}function Zg(l,{relative:n}={}){let{basename:s}=k.useContext(zt),o=k.useContext(Bt);Ae(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),c={...Zs(l||".",{relative:n})},h=Yt();if(l==null){c.search=h.search;let m=new URLSearchParams(c.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(w=>w).forEach(w=>m.append("index",w));let v=m.toString();c.search=v?`?${v}`:""}}return(!l||l===".")&&u.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(c.pathname=c.pathname==="/"?s:hr([s,c.pathname])),Js(c)}function e0(l,{relative:n}={}){let s=k.useContext(Fh);Ae(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Yh("useViewTransitionState"),u=Zs(l,{relative:n});if(!s.isTransitioning)return!1;let c=fr(s.currentLocation.pathname,o)||s.currentLocation.pathname,h=fr(s.nextLocation.pathname,o)||s.nextLocation.pathname;return ji(u.pathname,h)!=null||ji(u.pathname,c)!=null}const t0="modulepreload",r0=function(l){return"/"+l},oh={},ea=function(n,s,o){let u=Promise.resolve();if(s&&s.length>0){let y=function(v){return Promise.all(v.map(w=>Promise.resolve(w).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};var h=y;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");u=y(s.map(v=>{if(v=r0(v),v in oh)return;oh[v]=!0;const w=v.endsWith(".css"),S=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${S}`))return;const I=document.createElement("link");if(I.rel=w?"stylesheet":t0,w||(I.as="script"),I.crossOrigin="",I.href=v,p&&I.setAttribute("nonce",p),document.head.appendChild(I),w)return new Promise((E,A)=>{I.addEventListener("load",E),I.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return u.then(m=>{for(const p of m||[])p.status==="rejected"&&c(p.reason);return n().catch(c)})},n0=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>ea(async()=>{const{default:o}=await Promise.resolve().then(()=>rs);return{default:o}},[]).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)};class tu extends Error{constructor(n,s="FunctionsError",o){super(n),this.name=s,this.context=o}}class s0 extends tu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class lh extends tu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class uh extends tu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Il;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(Il||(Il={}));var a0=function(l,n,s,o){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function m(v){try{y(o.next(v))}catch(w){h(w)}}function p(v){try{y(o.throw(v))}catch(w){h(w)}}function y(v){v.done?c(v.value):u(v.value).then(m,p)}y((o=o.apply(l,n||[])).next())})};class i0{constructor(n,{headers:s={},customFetch:o,region:u=Il.Any}={}){this.url=n,this.headers=s,this.region=u,this.fetch=n0(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var o;return a0(this,void 0,void 0,function*(){try{const{headers:u,method:c,body:h}=s;let m={},{region:p}=s;p||(p=this.region);const y=new URL(`${this.url}/${n}`);p&&p!=="any"&&(m["x-region"]=p,y.searchParams.set("forceFunctionRegion",p));let v;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=h):typeof h=="string"?(m["Content-Type"]="text/plain",v=h):typeof FormData<"u"&&h instanceof FormData?v=h:(m["Content-Type"]="application/json",v=JSON.stringify(h)));const w=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),u),body:v}).catch(A=>{throw new s0(A)}),S=w.headers.get("x-relay-error");if(S&&S==="true")throw new lh(w);if(!w.ok)throw new uh(w);let I=((o=w.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),E;return I==="application/json"?E=yield w.json():I==="application/octet-stream"?E=yield w.blob():I==="text/event-stream"?E=w:I==="multipart/form-data"?E=yield w.formData():E=yield w.text(),{data:E,error:null,response:w}}catch(u){return{data:null,error:u,response:u instanceof uh||u instanceof lh?u.context:void 0}}})}}var Je={},$n={},Un={},Mn={},Fn={},zn={},o0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yn=o0();const l0=Yn.fetch,Xh=Yn.fetch.bind(Yn),Zh=Yn.Headers,u0=Yn.Request,c0=Yn.Response,rs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zh,Request:u0,Response:c0,default:Xh,fetch:l0},Symbol.toStringTag,{value:"Module"})),d0=_m(rs);var pi={},ch;function ef(){if(ch)return pi;ch=1,Object.defineProperty(pi,"__esModule",{value:!0});class l extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return pi.default=l,pi}var dh;function tf(){if(dh)return zn;dh=1;var l=zn&&zn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(zn,"__esModule",{value:!0});const n=l(d0),s=l(ef());class o{constructor(c){this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=c.headers,this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=c.shouldThrowOnError,this.signal=c.signal,this.isMaybeSingle=c.isMaybeSingle,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,h){return this.headers=Object.assign({},this.headers),this.headers[c]=h,this}then(c,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var v,w,S;let I=null,E=null,A=null,j=y.status,P=y.statusText;if(y.ok){if(this.method!=="HEAD"){const Z=await y.text();Z===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?E=Z:E=JSON.parse(Z))}const C=(v=this.headers.Prefer)===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),F=(w=y.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");C&&F&&F.length>1&&(A=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(I={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,A=null,j=406,P="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const C=await y.text();try{I=JSON.parse(C),Array.isArray(I)&&y.status===404&&(E=[],I=null,j=200,P="OK")}catch{y.status===404&&C===""?(j=204,P="No Content"):I={message:C}}if(I&&this.isMaybeSingle&&(!((S=I?.details)===null||S===void 0)&&S.includes("0 rows"))&&(I=null,j=200,P="OK"),I&&this.shouldThrowOnError)throw new s.default(I)}return{error:I,data:E,count:A,status:j,statusText:P}});return this.shouldThrowOnError||(p=p.catch(y=>{var v,w,S;return{error:{message:`${(v=y?.name)!==null&&v!==void 0?v:"FetchError"}: ${y?.message}`,details:`${(w=y?.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(S=y?.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),p.then(c,h)}returns(){return this}overrideTypes(){return this}}return zn.default=o,zn}var hh;function rf(){if(hh)return Fn;hh=1;var l=Fn&&Fn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Fn,"__esModule",{value:!0});const n=l(tf());class s extends n.default{select(u){let c=!1;const h=(u??"*").split("").map(m=>/\s/.test(m)&&!c?"":(m==='"'&&(c=!c),m)).join("");return this.url.searchParams.set("select",h),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(u,{ascending:c=!0,nullsFirst:h,foreignTable:m,referencedTable:p=m}={}){const y=p?`${p}.order`:"order",v=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${v?`${v},`:""}${u}.${c?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:c,referencedTable:h=c}={}){const m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${u}`),this}range(u,c,{foreignTable:h,referencedTable:m=h}={}){const p=typeof m>"u"?"offset":`${m}.offset`,y=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${u}`),this.url.searchParams.set(y,`${c-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:u=!1,verbose:c=!1,settings:h=!1,buffers:m=!1,wal:p=!1,format:y="text"}={}){var v;const w=[u?"analyze":null,c?"verbose":null,h?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),S=(v=this.headers.Accept)!==null&&v!==void 0?v:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${y}; for="${S}"; options=${w};`,y==="json"?this:this}rollback(){var u;return((u=this.headers.Prefer)!==null&&u!==void 0?u:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Fn.default=s,Fn}var fh;function ru(){if(fh)return Mn;fh=1;var l=Mn&&Mn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Mn,"__esModule",{value:!0});const n=l(rf());class s extends n.default{eq(u,c){return this.url.searchParams.append(u,`eq.${c}`),this}neq(u,c){return this.url.searchParams.append(u,`neq.${c}`),this}gt(u,c){return this.url.searchParams.append(u,`gt.${c}`),this}gte(u,c){return this.url.searchParams.append(u,`gte.${c}`),this}lt(u,c){return this.url.searchParams.append(u,`lt.${c}`),this}lte(u,c){return this.url.searchParams.append(u,`lte.${c}`),this}like(u,c){return this.url.searchParams.append(u,`like.${c}`),this}likeAllOf(u,c){return this.url.searchParams.append(u,`like(all).{${c.join(",")}}`),this}likeAnyOf(u,c){return this.url.searchParams.append(u,`like(any).{${c.join(",")}}`),this}ilike(u,c){return this.url.searchParams.append(u,`ilike.${c}`),this}ilikeAllOf(u,c){return this.url.searchParams.append(u,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(u,c){return this.url.searchParams.append(u,`ilike(any).{${c.join(",")}}`),this}is(u,c){return this.url.searchParams.append(u,`is.${c}`),this}in(u,c){const h=Array.from(new Set(c)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${h})`),this}contains(u,c){return typeof c=="string"?this.url.searchParams.append(u,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(u,`cs.{${c.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(c)}`),this}containedBy(u,c){return typeof c=="string"?this.url.searchParams.append(u,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(u,`cd.{${c.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(c)}`),this}rangeGt(u,c){return this.url.searchParams.append(u,`sr.${c}`),this}rangeGte(u,c){return this.url.searchParams.append(u,`nxl.${c}`),this}rangeLt(u,c){return this.url.searchParams.append(u,`sl.${c}`),this}rangeLte(u,c){return this.url.searchParams.append(u,`nxr.${c}`),this}rangeAdjacent(u,c){return this.url.searchParams.append(u,`adj.${c}`),this}overlaps(u,c){return typeof c=="string"?this.url.searchParams.append(u,`ov.${c}`):this.url.searchParams.append(u,`ov.{${c.join(",")}}`),this}textSearch(u,c,{config:h,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const y=h===void 0?"":`(${h})`;return this.url.searchParams.append(u,`${p}fts${y}.${c}`),this}match(u){return Object.entries(u).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(u,c,h){return this.url.searchParams.append(u,`not.${c}.${h}`),this}or(u,{foreignTable:c,referencedTable:h=c}={}){const m=h?`${h}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,c,h){return this.url.searchParams.append(u,`${c}.${h}`),this}}return Mn.default=s,Mn}var ph;function nf(){if(ph)return Un;ph=1;var l=Un&&Un.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Un,"__esModule",{value:!0});const n=l(ru());class s{constructor(u,{headers:c={},schema:h,fetch:m}){this.url=u,this.headers=c,this.schema=h,this.fetch=m}select(u,{head:c=!1,count:h}={}){const m=c?"HEAD":"GET";let p=!1;const y=(u??"*").split("").map(v=>/\s/.test(v)&&!p?"":(v==='"'&&(p=!p),v)).join("");return this.url.searchParams.set("select",y),h&&(this.headers.Prefer=`count=${h}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(u,{count:c,defaultToNull:h=!0}={}){const m="POST",p=[];if(this.headers.Prefer&&p.push(this.headers.Prefer),c&&p.push(`count=${c}`),h||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(u)){const y=u.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(y.length>0){const v=[...new Set(y)].map(w=>`"${w}"`);this.url.searchParams.set("columns",v.join(","))}}return new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:this.fetch,allowEmpty:!1})}upsert(u,{onConflict:c,ignoreDuplicates:h=!1,count:m,defaultToNull:p=!0}={}){const y="POST",v=[`resolution=${h?"ignore":"merge"}-duplicates`];if(c!==void 0&&this.url.searchParams.set("on_conflict",c),this.headers.Prefer&&v.push(this.headers.Prefer),m&&v.push(`count=${m}`),p||v.push("missing=default"),this.headers.Prefer=v.join(","),Array.isArray(u)){const w=u.reduce((S,I)=>S.concat(Object.keys(I)),[]);if(w.length>0){const S=[...new Set(w)].map(I=>`"${I}"`);this.url.searchParams.set("columns",S.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:this.fetch,allowEmpty:!1})}update(u,{count:c}={}){const h="PATCH",m=[];return this.headers.Prefer&&m.push(this.headers.Prefer),c&&m.push(`count=${c}`),this.headers.Prefer=m.join(","),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:this.fetch,allowEmpty:!1})}delete({count:u}={}){const c="DELETE",h=[];return u&&h.push(`count=${u}`),this.headers.Prefer&&h.unshift(this.headers.Prefer),this.headers.Prefer=h.join(","),new n.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Un.default=s,Un}var qs={},Hs={},mh;function h0(){return mh||(mh=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.version=void 0,Hs.version="0.0.0-automated"),Hs}var gh;function f0(){if(gh)return qs;gh=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.DEFAULT_HEADERS=void 0;const l=h0();return qs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${l.version}`},qs}var yh;function p0(){if(yh)return $n;yh=1;var l=$n&&$n.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty($n,"__esModule",{value:!0});const n=l(nf()),s=l(ru()),o=f0();class u{constructor(h,{headers:m={},schema:p,fetch:y}={}){this.url=h,this.headers=Object.assign(Object.assign({},o.DEFAULT_HEADERS),m),this.schemaName=p,this.fetch=y}from(h){const m=new URL(`${this.url}/${h}`);return new n.default(m,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new u(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,m={},{head:p=!1,get:y=!1,count:v}={}){let w;const S=new URL(`${this.url}/rpc/${h}`);let I;p||y?(w=p?"HEAD":"GET",Object.entries(m).filter(([A,j])=>j!==void 0).map(([A,j])=>[A,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([A,j])=>{S.searchParams.append(A,j)})):(w="POST",I=m);const E=Object.assign({},this.headers);return v&&(E.Prefer=`count=${v}`),new s.default({method:w,url:S,headers:E,schema:this.schemaName,body:I,fetch:this.fetch,allowEmpty:!1})}}return $n.default=u,$n}var vh;function m0(){if(vh)return Je;vh=1;var l=Je&&Je.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Je,"__esModule",{value:!0}),Je.PostgrestError=Je.PostgrestBuilder=Je.PostgrestTransformBuilder=Je.PostgrestFilterBuilder=Je.PostgrestQueryBuilder=Je.PostgrestClient=void 0;const n=l(p0());Je.PostgrestClient=n.default;const s=l(nf());Je.PostgrestQueryBuilder=s.default;const o=l(ru());Je.PostgrestFilterBuilder=o.default;const u=l(rf());Je.PostgrestTransformBuilder=u.default;const c=l(tf());Je.PostgrestBuilder=c.default;const h=l(ef());return Je.PostgrestError=h.default,Je.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:c.default,PostgrestError:h.default},Je}var g0=m0();const y0=wm(g0),{PostgrestClient:v0,PostgrestQueryBuilder:$v,PostgrestFilterBuilder:Uv,PostgrestTransformBuilder:Mv,PostgrestBuilder:Fv,PostgrestError:zv}=y0;function x0(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const w0=x0(),_0="2.11.15",j0=`realtime-js/${_0}`,k0="1.0.0",sf=1e4,b0=1e3;var Ks;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Ks||(Ks={}));var nt;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(nt||(nt={}));var Mt;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Mt||(Mt={}));var Dl;(function(l){l.websocket="websocket"})(Dl||(Dl={}));var ln;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(ln||(ln={}));class S0{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),o=new TextDecoder;return this._decodeBroadcast(n,s,o)}_decodeBroadcast(n,s,o){const u=s.getUint8(1),c=s.getUint8(2);let h=this.HEADER_LENGTH+2;const m=o.decode(n.slice(h,h+u));h=h+u;const p=o.decode(n.slice(h,h+c));h=h+c;const y=JSON.parse(o.decode(n.slice(h,n.byteLength)));return{ref:null,topic:m,event:p,payload:y}}}class af{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Le||(Le={}));const xh=(l,n,s={})=>{var o;const u=(o=s.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(n).reduce((c,h)=>(c[h]=N0(h,l,n,u),c),{})},N0=(l,n,s,o)=>{const u=n.find(m=>m.name===l),c=u?.type,h=s[l];return c&&!o.includes(c)?of(c,h):Ol(h)},of=(l,n)=>{if(l.charAt(0)==="_"){const s=l.slice(1,l.length);return P0(n,s)}switch(l){case Le.bool:return E0(n);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return C0(n);case Le.json:case Le.jsonb:return T0(n);case Le.timestamp:return R0(n);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return Ol(n);default:return Ol(n)}},Ol=l=>l,E0=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},C0=l=>{if(typeof l=="string"){const n=parseFloat(l);if(!Number.isNaN(n))return n}return l},T0=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(n){return console.log(`JSON parse error: ${n}`),l}return l},P0=(l,n)=>{if(typeof l!="string")return l;const s=l.length-1,o=l[s];if(l[0]==="{"&&o==="}"){let c;const h=l.slice(1,s);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(m=>of(n,m))}return l},R0=l=>typeof l=="string"?l.replace(" ","T"):l,lf=l=>{let n=l;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")};class jl{constructor(n,s,o={},u=sf){this.channel=n,this.event=s,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var o;return this._hasReceived(n)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var wh;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(wh||(wh={}));class Gs{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:c,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gs.syncState(this.state,u,c,h),this.pendingDiffs.forEach(p=>{this.state=Gs.syncDiff(this.state,p,c,h)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},u=>{const{onJoin:c,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Gs.syncDiff(this.state,u,c,h),m())}),this.onJoin((u,c,h)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:c,newPresences:h})}),this.onLeave((u,c,h)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,o,u){const c=this.cloneDeep(n),h=this.transformState(s),m={},p={};return this.map(c,(y,v)=>{h[y]||(p[y]=v)}),this.map(h,(y,v)=>{const w=c[y];if(w){const S=v.map(j=>j.presence_ref),I=w.map(j=>j.presence_ref),E=v.filter(j=>I.indexOf(j.presence_ref)<0),A=w.filter(j=>S.indexOf(j.presence_ref)<0);E.length>0&&(m[y]=E),A.length>0&&(p[y]=A)}else m[y]=v}),this.syncDiff(c,{joins:m,leaves:p},o,u)}static syncDiff(n,s,o,u){const{joins:c,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(c,(m,p)=>{var y;const v=(y=n[m])!==null&&y!==void 0?y:[];if(n[m]=this.cloneDeep(p),v.length>0){const w=n[m].map(I=>I.presence_ref),S=v.filter(I=>w.indexOf(I.presence_ref)<0);n[m].unshift(...S)}o(m,v,p)}),this.map(h,(m,p)=>{let y=n[m];if(!y)return;const v=p.map(w=>w.presence_ref);y=y.filter(w=>v.indexOf(w.presence_ref)<0),n[m]=y,u(m,y,p),y.length===0&&delete n[m]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(o=>s(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,o)=>{const u=n[o];return"metas"in u?s[o]=u.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[o]=u,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _h;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(_h||(_h={}));var jh;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(jh||(jh={}));var cr;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(cr||(cr={}));class nu{constructor(n,s={config:{}},o){this.topic=n,this.params=s,this.socket=o,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new jl(this,Mt.join,this.params,this.timeout),this.rejoinTimer=new af(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mt.reply,{},(u,c)=>{this._trigger(this._replyEventName(c),u)}),this.presence=new Gs(this),this.broadcastEndpointURL=lf(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:c,presence:h,private:m}}=this.params;this._onError(v=>n?.(cr.CHANNEL_ERROR,v)),this._onClose(()=>n?.(cr.CLOSED));const p={},y={broadcast:c,presence:h,postgres_changes:(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(v=>v.filter))!==null&&u!==void 0?u:[],private:m};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket.setAuth(),v===void 0){n?.(cr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,I=(w=S?.length)!==null&&w!==void 0?w:0,E=[];for(let A=0;A<I;A++){const j=S[A],{filter:{event:P,schema:M,table:C,filter:F}}=j,Z=v&&v[A];if(Z&&Z.event===P&&Z.schema===M&&Z.table===C&&Z.filter===F)E.push(Object.assign(Object.assign({},j),{id:Z.id}));else{this.unsubscribe(),this.state=nt.errored,n?.(cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,n&&n(cr.SUBSCRIBED);return}}).receive("error",v=>{this.state=nt.errored,n?.(cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{n?.(cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,o){return this._on(n,s,o)}async send(n,s={}){var o,u;if(!this._canPush()&&n.type==="broadcast"){const{event:c,payload:h}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=y.body)===null||u===void 0?void 0:u.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,m,p;const y=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&c("ok"),y.receive("ok",()=>c("ok")),y.receive("error",()=>c("error")),y.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=nt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new jl(this,Mt.leave,{},n),o.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(n,s,o){const u=new AbortController,c=setTimeout(()=>u.abort(),o),h=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(c),h}_push(n,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new jl(this,n,s,o);return this._canPush()?u.send():(u.startTimeout(),this.pushBuffer.push(u)),u}_onMessage(n,s,o){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,o){var u,c;const h=n.toLocaleLowerCase(),{close:m,error:p,leave:y,join:v}=Mt;if(o&&[m,p,y,v].indexOf(h)>=0&&o!==this._joinRef())return;let S=this._onMessage(h,s,o);if(s&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(I=>{var E,A,j;return((E=I.filter)===null||E===void 0?void 0:E.event)==="*"||((j=(A=I.filter)===null||A===void 0?void 0:A.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===h}).map(I=>I.callback(S,o)):(c=this.bindings[h])===null||c===void 0||c.filter(I=>{var E,A,j,P,M,C;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in I){const F=I.id,Z=(E=I.filter)===null||E===void 0?void 0:E.event;return F&&((A=s.ids)===null||A===void 0?void 0:A.includes(F))&&(Z==="*"||Z?.toLocaleLowerCase()===((j=s.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const F=(M=(P=I?.filter)===null||P===void 0?void 0:P.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return F==="*"||F===((C=s?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===h}).map(I=>{if(typeof S=="object"&&"ids"in S){const E=S.data,{schema:A,table:j,commit_timestamp:P,type:M,errors:C}=E;S=Object.assign(Object.assign({},{schema:A,table:j,commit_timestamp:P,eventType:M,new:{},old:{},errors:C}),this._getPayloadRecords(E))}I.callback(S,o)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,o){const u=n.toLocaleLowerCase(),c={type:u,filter:s,callback:o};return this.bindings[u]?this.bindings[u].push(c):this.bindings[u]=[c],this}_off(n,s){const o=n.toLocaleLowerCase();return this.bindings[o]=this.bindings[o].filter(u=>{var c;return!(((c=u.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&nu.isEqual(u.filter,s))}),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const o in n)if(n[o]!==s[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Mt.close,{},n)}_onError(n){this._on(Mt.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=xh(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=xh(n.columns,n.old_record)),s}}const kh=()=>{},L0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class I0{constructor(n,s){var o;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sf,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=kh,this.ref=0,this.logger=kh,this.conn=null,this.sendBuffer=[],this.serializer=new S0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=c=>{let h;return c?h=c:typeof fetch>"u"?h=(...m)=>ea(async()=>{const{default:p}=await Promise.resolve().then(()=>rs);return{default:p}},void 0).then(({default:p})=>p(...m)):h=fetch,(...m)=>h(...m)},this.endPoint=`${n}/${Dl.websocket}`,this.httpEndpoint=lf(n),s?.transport?this.transport=s.transport:this.transport=null,s?.params&&(this.params=s.params),s?.timeout&&(this.timeout=s.timeout),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const u=(o=s?.params)===null||o===void 0?void 0:o.apikey;if(u&&(this.accessTokenValue=u,this.apiKey=u),this.reconnectAfterMs=s?.reconnectAfterMs?s.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=s?.encode?s.encode:(c,h)=>h(JSON.stringify(c)),this.decode=s?.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new af(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s?.fetch),s?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=s?.worker||!1,this.workerUrl=s?.workerUrl}this.accessToken=s?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=w0),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:k0}))}disconnect(n,s){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(o=>o.teardown()))}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,o){this.logger(n,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ks.connecting:return ln.Connecting;case Ks.open:return ln.Open;case Ks.closing:return ln.Closing;default:return ln.Closed}}isConnected(){return this.connectionState()===ln.Open}channel(n,s={config:{}}){const o=`realtime:${n}`,u=this.getChannels().find(c=>c.topic===o);if(u)return u;{const c=new nu(`realtime:${n}`,s,this);return this.channels.push(c),c}}push(n){const{topic:s,event:o,payload:u,ref:c}=n,h=()=>{this.encode(n,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${s} ${o} (${c})`,u),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){let s=n||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(o=>{const u={access_token:s,version:j0};s&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(Mt.access_token,{access_token:s})}))}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(n=this.conn)===null||n===void 0||n.close(b0,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_onConnMessage(n){this.decode(n.data,s=>{let{topic:o,event:u,payload:c,ref:h}=s;o==="phoenix"&&u==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),h&&h===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${o} ${u} ${h&&"("+h+")"||""}`,c),Array.from(this.channels).filter(m=>m._isMember(o)).forEach(m=>m._trigger(u,c,h)),this.stateChangeCallbacks.message.forEach(m=>m(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(n=>n())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(n))}_onConnError(n){this.log("transport",`${n}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(Mt.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const o=n.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${n}${o}${u}`}_workerObjectUrl(n){let s;if(n)s=n;else{const o=new Blob([L0],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}}class su extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Qe(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class D0 extends su{constructor(n,s,o){super(n),this.name="StorageApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Al extends su{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var O0=function(l,n,s,o){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function m(v){try{y(o.next(v))}catch(w){h(w)}}function p(v){try{y(o.throw(v))}catch(w){h(w)}}function y(v){v.done?c(v.value):u(v.value).then(m,p)}y((o=o.apply(l,n||[])).next())})};const uf=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>ea(async()=>{const{default:o}=await Promise.resolve().then(()=>rs);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},A0=()=>O0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ea(()=>Promise.resolve().then(()=>rs),void 0)).Response:Response}),$l=l=>{if(Array.isArray(l))return l.map(s=>$l(s));if(typeof l=="function"||l!==Object(l))return l;const n={};return Object.entries(l).forEach(([s,o])=>{const u=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[u]=$l(o)}),n},$0=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)};var cn=function(l,n,s,o){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function m(v){try{y(o.next(v))}catch(w){h(w)}}function p(v){try{y(o.throw(v))}catch(w){h(w)}}function y(v){v.done?c(v.value):u(v.value).then(m,p)}y((o=o.apply(l,n||[])).next())})};const kl=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),U0=(l,n,s)=>cn(void 0,void 0,void 0,function*(){const o=yield A0();l instanceof o&&!s?.noResolveJson?l.json().then(u=>{const c=l.status||500,h=u?.statusCode||c+"";n(new D0(kl(u),c,h))}).catch(u=>{n(new Al(kl(u),u))}):n(new Al(kl(l),l))}),M0=(l,n,s,o)=>{const u={method:l,headers:n?.headers||{}};return l==="GET"||!o?u:($0(o)?(u.headers=Object.assign({"Content-Type":"application/json"},n?.headers),u.body=JSON.stringify(o)):u.body=o,Object.assign(Object.assign({},u),s))};function ta(l,n,s,o,u,c){return cn(this,void 0,void 0,function*(){return new Promise((h,m)=>{l(s,M0(n,o,u,c)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>U0(p,m,o))})})}function ki(l,n,s,o){return cn(this,void 0,void 0,function*(){return ta(l,"GET",n,s,o)})}function dr(l,n,s,o,u){return cn(this,void 0,void 0,function*(){return ta(l,"POST",n,o,u,s)})}function Ul(l,n,s,o,u){return cn(this,void 0,void 0,function*(){return ta(l,"PUT",n,o,u,s)})}function F0(l,n,s,o){return cn(this,void 0,void 0,function*(){return ta(l,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),o)})}function cf(l,n,s,o,u){return cn(this,void 0,void 0,function*(){return ta(l,"DELETE",n,o,u,s)})}var gt=function(l,n,s,o){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function m(v){try{y(o.next(v))}catch(w){h(w)}}function p(v){try{y(o.throw(v))}catch(w){h(w)}}function y(v){v.done?c(v.value):u(v.value).then(m,p)}y((o=o.apply(l,n||[])).next())})};const z0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class B0{constructor(n,s={},o,u){this.url=n,this.headers=s,this.bucketId=o,this.fetch=uf(u)}uploadOrUpdate(n,s,o,u){return gt(this,void 0,void 0,function*(){try{let c;const h=Object.assign(Object.assign({},bh),u);let m=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&o instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),p&&c.append("metadata",this.encodeMetadata(p)),c.append("",o)):typeof FormData<"u"&&o instanceof FormData?(c=o,c.append("cacheControl",h.cacheControl),p&&c.append("metadata",this.encodeMetadata(p))):(c=o,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),u?.headers&&(m=Object.assign(Object.assign({},m),u.headers));const y=this._removeEmptyFolders(s),v=this._getFinalPath(y),w=yield(n=="PUT"?Ul:dr)(this.fetch,`${this.url}/object/${v}`,c,Object.assign({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:y,id:w.Id,fullPath:w.Key},error:null}}catch(c){if(Qe(c))return{data:null,error:c};throw c}})}upload(n,s,o){return gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,o)})}uploadToSignedUrl(n,s,o,u){return gt(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),m=new URL(this.url+`/object/upload/sign/${h}`);m.searchParams.set("token",s);try{let p;const y=Object.assign({upsert:bh.upsert},u),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",y.cacheControl)):(p=o,v["cache-control"]=`max-age=${y.cacheControl}`,v["content-type"]=y.contentType);const w=yield Ul(this.fetch,m.toString(),p,{headers:v});return{data:{path:c,fullPath:w.Key},error:null}}catch(p){if(Qe(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,s){return gt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n);const u=Object.assign({},this.headers);s?.upsert&&(u["x-upsert"]="true");const c=yield dr(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:u}),h=new URL(this.url+c.url),m=h.searchParams.get("token");if(!m)throw new su("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:m},error:null}}catch(o){if(Qe(o))return{data:null,error:o};throw o}})}update(n,s,o){return gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,o)})}move(n,s,o){return gt(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(Qe(u))return{data:null,error:u};throw u}})}copy(n,s,o){return gt(this,void 0,void 0,function*(){try{return{data:{path:(yield dr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(Qe(u))return{data:null,error:u};throw u}})}createSignedUrl(n,s,o){return gt(this,void 0,void 0,function*(){try{let u=this._getFinalPath(n),c=yield dr(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:s},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${h}`)},{data:c,error:null}}catch(u){if(Qe(u))return{data:null,error:u};throw u}})}createSignedUrls(n,s,o){return gt(this,void 0,void 0,function*(){try{const u=yield dr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),c=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:u.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${c}`):null})),error:null}}catch(u){if(Qe(u))return{data:null,error:u};throw u}})}download(n,s){return gt(this,void 0,void 0,function*(){const u=typeof s?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(s?.transform||{}),h=c?`?${c}`:"";try{const m=this._getFinalPath(n);return{data:yield(yield ki(this.fetch,`${this.url}/${u}/${m}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(Qe(m))return{data:null,error:m};throw m}})}info(n){return gt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const o=yield ki(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:$l(o),error:null}}catch(o){if(Qe(o))return{data:null,error:o};throw o}})}exists(n){return gt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield F0(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(Qe(o)&&o instanceof Al){const u=o.originalError;if([400,404].includes(u?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(n,s){const o=this._getFinalPath(n),u=[],c=s?.download?`download=${s.download===!0?"":s.download}`:"";c!==""&&u.push(c);const m=typeof s?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(s?.transform||{});p!==""&&u.push(p);let y=u.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${o}${y}`)}}}remove(n){return gt(this,void 0,void 0,function*(){try{return{data:yield cf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(Qe(s))return{data:null,error:s};throw s}})}list(n,s,o){return gt(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},z0),s),{prefix:n||""});return{data:yield dr(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},o),error:null}}catch(u){if(Qe(u))return{data:null,error:u};throw u}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const W0="2.10.4",q0={"X-Client-Info":`storage-js/${W0}`};var Bn=function(l,n,s,o){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function m(v){try{y(o.next(v))}catch(w){h(w)}}function p(v){try{y(o.throw(v))}catch(w){h(w)}}function y(v){v.done?c(v.value):u(v.value).then(m,p)}y((o=o.apply(l,n||[])).next())})};class H0{constructor(n,s={},o,u){const c=new URL(n);u?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},q0),s),this.fetch=uf(o)}listBuckets(){return Bn(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}})}getBucket(n){return Bn(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(Qe(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return Bn(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(Qe(o))return{data:null,error:o};throw o}})}updateBucket(n,s){return Bn(this,void 0,void 0,function*(){try{return{data:yield Ul(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(Qe(o))return{data:null,error:o};throw o}})}emptyBucket(n){return Bn(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Qe(s))return{data:null,error:s};throw s}})}deleteBucket(n){return Bn(this,void 0,void 0,function*(){try{return{data:yield cf(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(Qe(s))return{data:null,error:s};throw s}})}}class V0 extends H0{constructor(n,s={},o,u){super(n,s,o,u)}from(n){return new B0(this.url,this.headers,n,this.fetch)}}const K0="2.53.0";let Vs="";typeof Deno<"u"?Vs="deno":typeof document<"u"?Vs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vs="react-native":Vs="node";const G0={"X-Client-Info":`supabase-js-${Vs}/${K0}`},J0={headers:G0},Q0={schema:"public"},Y0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},X0={};var Z0=function(l,n,s,o){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function m(v){try{y(o.next(v))}catch(w){h(w)}}function p(v){try{y(o.throw(v))}catch(w){h(w)}}function y(v){v.done?c(v.value):u(v.value).then(m,p)}y((o=o.apply(l,n||[])).next())})};const ey=l=>{let n;return l?n=l:typeof fetch>"u"?n=Xh:n=fetch,(...s)=>n(...s)},ty=()=>typeof Headers>"u"?Zh:Headers,ry=(l,n,s)=>{const o=ey(s),u=ty();return(c,h)=>Z0(void 0,void 0,void 0,function*(){var m;const p=(m=yield n())!==null&&m!==void 0?m:l;let y=new u(h?.headers);return y.has("apikey")||y.set("apikey",l),y.has("Authorization")||y.set("Authorization",`Bearer ${p}`),o(c,Object.assign(Object.assign({},h),{headers:y}))})};var ny=function(l,n,s,o){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function m(v){try{y(o.next(v))}catch(w){h(w)}}function p(v){try{y(o.throw(v))}catch(w){h(w)}}function y(v){v.done?c(v.value):u(v.value).then(m,p)}y((o=o.apply(l,n||[])).next())})};function sy(l){return l.endsWith("/")?l:l+"/"}function ay(l,n){var s,o;const{db:u,auth:c,realtime:h,global:m}=l,{db:p,auth:y,realtime:v,global:w}=n,S={db:Object.assign(Object.assign({},p),u),auth:Object.assign(Object.assign({},y),c),realtime:Object.assign(Object.assign({},v),h),storage:{},global:Object.assign(Object.assign(Object.assign({},w),m),{headers:Object.assign(Object.assign({},(s=w?.headers)!==null&&s!==void 0?s:{}),(o=m?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>ny(this,void 0,void 0,function*(){return""})};return l.accessToken?S.accessToken=l.accessToken:delete S.accessToken,S}const df="2.71.1",Kn=30*1e3,Ml=3,bl=Ml*Kn,iy="http://localhost:9999",oy="supabase.auth.token",ly={"X-Client-Info":`gotrue-js/${df}`},Fl="X-Supabase-Api-Version",hf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cy=600*1e3;class au extends Error{constructor(n,s,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function _e(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class dy extends au{constructor(n,s,o){super(n,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function hy(l){return _e(l)&&l.name==="AuthApiError"}class ff extends au{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class Ur extends au{constructor(n,s,o,u){super(n,o,u),this.name=s,this.status=o}}class Ar extends Ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fy(l){return _e(l)&&l.name==="AuthSessionMissingError"}class mi extends Ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gi extends Ur{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class yi extends Ur{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function py(l){return _e(l)&&l.name==="AuthImplicitGrantRedirectError"}class Sh extends Ur{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zl extends Ur{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function Sl(l){return _e(l)&&l.name==="AuthRetryableFetchError"}class Nh extends Ur{constructor(n,s,o){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class Bl extends Ur{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Eh=` 	
\r=`.split(""),my=(()=>{const l=new Array(128);for(let n=0;n<l.length;n+=1)l[n]=-1;for(let n=0;n<Eh.length;n+=1)l[Eh[n].charCodeAt(0)]=-2;for(let n=0;n<bi.length;n+=1)l[bi[n].charCodeAt(0)]=n;return l})();function Ch(l,n,s){if(l!==null)for(n.queue=n.queue<<8|l,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(bi[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(bi[o]),n.queuedBits-=6}}function pf(l,n,s){const o=my[l];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function Th(l){const n=[],s=h=>{n.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},c=h=>{vy(h,o,s)};for(let h=0;h<l.length;h+=1)pf(l.charCodeAt(h),u,c);return n.join("")}function gy(l,n){if(l<=127){n(l);return}else if(l<=2047){n(192|l>>6),n(128|l&63);return}else if(l<=65535){n(224|l>>12),n(128|l>>6&63),n(128|l&63);return}else if(l<=1114111){n(240|l>>18),n(128|l>>12&63),n(128|l>>6&63),n(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function yy(l,n){for(let s=0;s<l.length;s+=1){let o=l.charCodeAt(s);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(l.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}gy(o,n)}}function vy(l,n,s){if(n.utf8seq===0){if(l<=127){s(l);return}for(let o=1;o<6;o+=1)if((l>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=l&31;else if(n.utf8seq===3)n.codepoint=l&15;else if(n.utf8seq===4)n.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|l&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function xy(l){const n=[],s={queue:0,queuedBits:0},o=u=>{n.push(u)};for(let u=0;u<l.length;u+=1)pf(l.charCodeAt(u),s,o);return new Uint8Array(n)}function wy(l){const n=[];return yy(l,s=>n.push(s)),new Uint8Array(n)}function _y(l){const n=[],s={queue:0,queuedBits:0},o=u=>{n.push(u)};return l.forEach(u=>Ch(u,s,o)),Ch(null,s,o),n.join("")}function jy(l){return Math.round(Date.now()/1e3)+l}function ky(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const n=Math.random()*16|0;return(l=="x"?n:n&3|8).toString(16)})}const Ut=()=>typeof window<"u"&&typeof document<"u",sn={tested:!1,writable:!1},mf=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sn.tested)return sn.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),sn.tested=!0,sn.writable=!0}catch{sn.tested=!0,sn.writable=!1}return sn.writable};function by(l){const n={},s=new URL(l);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,c)=>{n[c]=u})}catch{}return s.searchParams.forEach((o,u)=>{n[u]=o}),n}const gf=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>ea(async()=>{const{default:o}=await Promise.resolve().then(()=>rs);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},Sy=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",Gn=async(l,n,s)=>{await l.setItem(n,JSON.stringify(s))},an=async(l,n)=>{const s=await l.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Or=async(l,n)=>{await l.removeItem(n)};class Ci{constructor(){this.promise=new Ci.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Ci.promiseConstructor=Promise;function Nl(l){const n=l.split(".");if(n.length!==3)throw new Bl("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!uy.test(n[o]))throw new Bl("JWT not in base64url format");return{header:JSON.parse(Th(n[0])),payload:JSON.parse(Th(n[1])),signature:xy(n[2]),raw:{header:n[0],payload:n[1]}}}async function Ny(l){return await new Promise(n=>{setTimeout(()=>n(null),l)})}function Ey(l,n){return new Promise((o,u)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await l(c);if(!n(c,null,h)){o(h);return}}catch(h){if(!n(c,h)){u(h);return}}})()})}function Cy(l){return("0"+l.toString(16)).substr(-2)}function Ty(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let u="";for(let c=0;c<56;c++)u+=s.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(n),Array.from(n,Cy).join("")}async function Py(l){const s=new TextEncoder().encode(l),o=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(o);return Array.from(u).map(c=>String.fromCharCode(c)).join("")}async function Ry(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const s=await Py(l);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wn(l,n,s=!1){const o=Ty();let u=o;s&&(u+="/PASSWORD_RECOVERY"),await Gn(l,`${n}-code-verifier`,u);const c=await Ry(o);return[c,o===c?"plain":"s256"]}const Ly=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Iy(l){const n=l.headers.get(Fl);if(!n||!n.match(Ly))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Dy(l){if(!l)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(l<=n)throw new Error("JWT has expired")}function Oy(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ay=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qn(l){if(!Ay.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function El(){const l={};return new Proxy(l,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ph(l){return JSON.parse(JSON.stringify(l))}var $y=function(l,n){var s={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&n.indexOf(o)<0&&(s[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(l);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(l,o[u])&&(s[o[u]]=l[o[u]]);return s};const on=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Uy=[502,503,504];async function Rh(l){var n;if(!Sy(l))throw new zl(on(l),0);if(Uy.includes(l.status))throw new zl(on(l),l.status);let s;try{s=await l.json()}catch(c){throw new ff(on(c),c)}let o;const u=Iy(l);if(u&&u.getTime()>=hf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new Nh(on(s),l.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new Ar}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new Nh(on(s),l.status,s.weak_password.reasons);throw new dy(on(s),l.status||500,o)}const My=(l,n,s,o)=>{const u={method:l,headers:n?.headers||{}};return l==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),s))};async function Se(l,n,s,o){var u;const c=Object.assign({},o?.headers);c[Fl]||(c[Fl]=hf["2024-01-01"].name),o?.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const h=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await Fy(l,n,s+m,{headers:c,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function Fy(l,n,s,o,u,c){const h=My(n,o,u,c);let m;try{m=await l(s,Object.assign({},h))}catch(p){throw console.error(p),new zl(on(p),0)}if(m.ok||await Rh(m),o?.noResolveJson)return m;try{return await m.json()}catch(p){await Rh(p)}}function ur(l){var n;let s=null;qy(l)&&(s=Object.assign({},l),l.expires_at||(s.expires_at=jy(l.expires_in)));const o=(n=l.user)!==null&&n!==void 0?n:l;return{data:{session:s,user:o},error:null}}function Lh(l){const n=ur(l);return!n.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(n.data.weak_password=l.weak_password),n}function $r(l){var n;return{data:{user:(n=l.user)!==null&&n!==void 0?n:l},error:null}}function zy(l){return{data:l,error:null}}function By(l){const{action_link:n,email_otp:s,hashed_token:o,redirect_to:u,verification_type:c}=l,h=$y(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:s,hashed_token:o,redirect_to:u,verification_type:c},p=Object.assign({},h);return{data:{properties:m,user:p},error:null}}function Wy(l){return l}function qy(l){return l.access_token&&l.refresh_token&&l.expires_in}const Cl=["global","local","others"];var Hy=function(l,n){var s={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&n.indexOf(o)<0&&(s[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(l);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(l,o[u])&&(s[o[u]]=l[o[u]]);return s};class Vy{constructor({url:n="",headers:s={},fetch:o}){this.url=n,this.headers=s,this.fetch=gf(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s=Cl[0]){if(Cl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cl.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(_e(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,s={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:$r})}catch(o){if(_e(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:s}=n,o=Hy(n,["options"]),u=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:By,redirectTo:s?.redirectTo})}catch(s){if(_e(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:$r})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,o,u,c,h,m,p;try{const y={nextPage:null,lastPage:0,total:0},v=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(c=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Wy});if(v.error)throw v.error;const w=await v.json(),S=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,I=(p=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return I.length>0&&(I.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(E.split(";")[1].split("=")[1]);y[`${j}Page`]=A}),y.total=parseInt(S)),{data:Object.assign(Object.assign({},w),y),error:null}}catch(y){if(_e(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){qn(n);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:$r})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){qn(n);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:$r})}catch(o){if(_e(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,s=!1){qn(n);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:$r})}catch(o){if(_e(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){qn(n.userId);try{const{data:s,error:o}=await Se(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:o}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _deleteFactor(n){qn(n.userId),qn(n.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}}function Ih(l={}){return{getItem:n=>l[n]||null,setItem:(n,s)=>{l[n]=s},removeItem:n=>{delete l[n]}}}function Ky(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Hn={debug:!!(globalThis&&mf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yf extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Gy extends yf{}async function Jy(l,n,s){Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,u.name);try{return await s()}finally{Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,u.name)}}else{if(n===0)throw Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Gy(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Hn.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Ky();const Qy={url:iy,storageKey:oy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ly,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dh(l,n,s){return await s()}const Vn={};class Qs{constructor(n){var s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qs.nextInstanceID,Qs.nextInstanceID+=1,this.instanceID>0&&Ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},Qy),n);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Vy({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=gf(u.fetch),this.lock=u.lock||Dh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:Ut()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=Jy:this.lock=Dh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:mf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ih(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Ih(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var n,s;return(s=(n=Vn[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Vn[this.storageKey]=Object.assign(Object.assign({},Vn[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Vn[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Vn[this.storageKey]=Object.assign(Object.assign({},Vn[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${df}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=by(window.location.href);let o="none";if(this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce"),Ut()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:c}=await this._getSessionFromURL(s,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),py(c)){const p=(n=c.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:h,redirectType:m}=u;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return _e(s)?{error:s}:{error:new ff("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,o,u;try{const c=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=n?.options)===null||u===void 0?void 0:u.captchaToken}},xform:ur}),{data:h,error:m}=c;if(m||!h)return{data:{user:null,session:null},error:m};const p=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(c){if(_e(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var s,o,u;try{let c;if("email"in n){const{email:v,password:w,options:S}=n;let I=null,E=null;this.flowType==="pkce"&&([I,E]=await Wn(this.storage,this.storageKey)),c=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:v,password:w,data:(s=S?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:I,code_challenge_method:E},xform:ur})}else if("phone"in n){const{phone:v,password:w,options:S}=n;c=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(o=S?.data)!==null&&o!==void 0?o:{},channel:(u=S?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:ur})}else throw new gi("You must provide either an email or phone number and a password");const{data:h,error:m}=c;if(m||!h)return{data:{user:null,session:null},error:m};const p=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(c){if(_e(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{let s;if("email"in n){const{email:c,password:h,options:m}=n;s=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Lh})}else if("phone"in n){const{phone:c,password:h,options:m}=n;s=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Lh})}else throw new gi("You must provide either an email or phone number and a password");const{data:o,error:u}=s;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new mi}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,o,u,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;if(s==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(n){var s,o,u,c,h,m,p,y,v,w,S,I;let E,A;if("message"in n)E=n.message,A=n.signature;else{const{chain:j,wallet:P,statement:M,options:C}=n;let F;if(Ut())if(typeof P=="object")F=P;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))F=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=P}const Z=new URL((s=C?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in F&&F.signIn){const B=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),M?{statement:M}:null));let q;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")q=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)q=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in q&&"signature"in q&&(typeof q.signedMessage=="string"||q.signedMessage instanceof Uint8Array)&&q.signature instanceof Uint8Array)E=typeof q.signedMessage=="string"?q.signedMessage:new TextDecoder().decode(q.signedMessage),A=q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${Z.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(u=(o=C?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((c=C?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((h=C?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((m=C?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((p=C?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((y=C?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((w=(v=C?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...C.signInWithSolana.resources.map(q=>`- ${q}`)]:[]].join(`
`);const B=await F.signMessage(new TextEncoder().encode(E),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=B}}try{const{data:j,error:P}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:_y(A)},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(I=n.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:ur});if(P)throw P;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new mi}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:P})}catch(j){if(_e(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(n){const s=await an(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(s??"").split("/");try{const{data:c,error:h}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:ur});if(await Or(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new mi}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:u??null}),error:h})}catch(c){if(_e(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(n){try{const{options:s,provider:o,token:u,access_token:c,nonce:h}=n,m=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:ur}),{data:p,error:y}=m;return y?{data:{user:null,session:null},error:y}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new mi}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:y})}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,o,u,c,h;try{if("email"in n){const{email:m,options:p}=n;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Wn(this.storage,this.storageKey));const{error:w}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:y,code_challenge_method:v},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in n){const{phone:m,options:p}=n,{data:y,error:v}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(u=p?.data)!==null&&u!==void 0?u:{},create_user:(c=p?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(h=p?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:y?.message_id},error:v}}throw new gi("You must provide either an email or phone number.")}catch(m){if(_e(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(n){var s,o;try{let u,c;"options"in n&&(u=(s=n.options)===null||s===void 0?void 0:s.redirectTo,c=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:m}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:u,xform:ur});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,y=h.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(u){if(_e(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(n){var s,o,u;try{let c=null,h=null;return this.flowType==="pkce"&&([c,h]=await Wn(this.storage,this.storageKey)),await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=n?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:zy})}catch(c){if(_e(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)throw o;if(!s)throw new Ar;const{error:u}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:u}})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:o,type:u,options:c}=n,{error:h}=await Se(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:o,type:u,options:c}=n,{data:h,error:m}=await Se(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new gi("You must provide either an email or phone number and a type")}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await an(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<bl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const h=await an(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=El()}if(this.storage.isServer&&n.user){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(p,y,v)=>(!h&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,y,v))})}return{data:{session:n},error:null}}const{session:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:$r}):await this._useSession(async s=>{var o,u,c;const{data:h,error:m}=s;if(m)throw m;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ar}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0,xform:$r})})}catch(s){if(_e(s))return fy(s)&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async o=>{const{data:u,error:c}=o;if(c)throw c;if(!u.session)throw new Ar;const h=u.session;let m=null,p=null;this.flowType==="pkce"&&n.email!=null&&([m,p]=await Wn(this.storage,this.storageKey));const{data:y,error:v}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:p}),jwt:h.access_token,xform:$r});if(v)throw v;return h.user=y.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(o){if(_e(o))return{data:{user:null},error:o};throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Ar;const s=Date.now()/1e3;let o=s,u=!0,c=null;const{payload:h}=Nl(n.access_token);if(h.exp&&(o=h.exp,u=o<=s),u){const{session:m,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};c=m}else{const{data:m,error:p}=await this._getUser(n.access_token);if(p)throw p;c={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(s){if(_e(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var o;if(!n){const{data:h,error:m}=s;if(m)throw m;n=(o=h.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new Ar;const{session:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!Ut())throw new yi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new yi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Sh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Sh("No code detected.");const{data:M,error:C}=await this._exchangeCodeForSession(n.code);if(C)throw C;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:c,refresh_token:h,expires_in:m,expires_at:p,token_type:y}=n;if(!c||!m||!h||!y)throw new yi("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(m);let S=v+w;p&&(S=parseInt(p));const I=S-v;I*1e3<=Kn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${w}s`);const E=S-w;v-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,S,v):v-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,S,v);const{data:A,error:j}=await this._getUser(c);if(j)throw j;const P={provider_token:o,provider_refresh_token:u,access_token:c,expires_in:w,expires_at:S,refresh_token:h,token_type:y,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:n.type},error:null}}catch(o){if(_e(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await an(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:u,error:c}=s;if(c)return{error:c};const h=(o=u.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:m}=await this.admin.signOut(h,n);if(m&&!(hy(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return n!=="others"&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=ky(),o={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async s=>{var o,u;try{const{data:{session:c},error:h}=s;if(h)throw h;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,s={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await Wn(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(_e(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:o,error:u}=await this._useSession(async c=>{var h,m,p,y,v;const{data:w,error:S}=c;if(S)throw S;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",I,{headers:this.headers,jwt:(v=(y=w.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:void 0})});if(u)throw u;return Ut()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(_e(o))return{data:{provider:n.provider,url:null},error:o};throw o}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var o,u;const{data:c,error:h}=s;if(h)throw h;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await Ey(async u=>(u>0&&await Ny(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:ur})),(u,c)=>{const h=200*Math.pow(2,u);return c&&Sl(c)&&Date.now()+h-o<Kn})}catch(o){if(this._debug(s,"error",o),_e(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",o),Ut()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await an(this.storage,this.storageKey);if(u&&this.userStorage){let h=await an(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:u.user},await Gn(this.userStorage,this.storageKey+"-user",h)),u.user=(n=h?.user)!==null&&n!==void 0?n:El()}else if(u&&!u.user&&!u.user){const h=await an(this.storage,this.storageKey+"-user");h&&h?.user?(u.user=h.user,await Or(this.storage,this.storageKey+"-user"),await Gn(this.storage,this.storageKey,u)):u.user=El()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const c=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<bl;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${bl}s`),c){if(this.autoRefreshToken&&u.refresh_token){const{error:h}=await this._callRefreshToken(u.refresh_token);h&&(console.error(h),Sl(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(u.access_token);!m&&h?.user?(u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var s,o;if(!n)throw new Ar;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Ci;const{data:c,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!c.session)throw new Ar;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const m={session:c.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(c){if(this._debug(u,"error",c),_e(c)){const h={session:null,error:c};return Sl(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,s,o=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:s});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,s)}catch(p){c.push(p)}});if(await Promise.all(h),c.length>0){for(let m=0;m<c.length;m+=1)console.error(c[m]);throw c[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await Gn(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const c=Ph(u);await Gn(this.storage,this.storageKey,c)}else{const u=Ph(s);await Gn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await Or(this.storage,this.storageKey),await Or(this.storage,this.storageKey+"-code-verifier"),await Or(this.storage,this.storageKey+"-user"),this.userStorage&&await Or(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Ut()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Kn);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-n)/Kn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Kn}ms, refresh threshold is ${Ml} ticks`),u<=Ml&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof yf)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,o){const u=[`provider=${encodeURIComponent(s)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,h]=await Wn(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});u.push(m.toString())}if(o?.queryParams){const c=new URLSearchParams(o.queryParams);u.push(c.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var o;const{data:u,error:c}=s;return c?{data:null,error:c}:await Se(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var o,u;const{data:c,error:h}=s;if(h)return{data:null,error:h};const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:p,error:y}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return y?{data:null,error:y}:(n.factorType==="totp"&&(!((u=p?.totp)===null||u===void 0)&&u.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:u,error:c}=s;if(c)return{data:null,error:c};const{data:h,error:m}=await Se(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:m})})}catch(s){if(_e(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:u,error:c}=s;return c?{data:null,error:c}:await Se(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(_e(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:o}=await this._challenge({factorId:n.factorId});return o?{data:null,error:o}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o=n?.factors||[],u=o.filter(h=>h.factor_type==="totp"&&h.status==="verified"),c=o.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:o,totp:u,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,o;const{data:{session:u},error:c}=n;if(c)return{data:null,error:c};if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Nl(u.access_token);let m=null;h.aal&&(m=h.aal);let p=m;((o=(s=u.user.factors)===null||s===void 0?void 0:s.filter(w=>w.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const v=h.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(n,s={keys:[]}){let o=s.keys.find(m=>m.kid===n);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(m=>m.kid===n),o&&this.jwks_cached_at+cy>u)return o;const{data:c,error:h}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=u,o=c.keys.find(m=>m.kid===n),!o)?null:o}async getClaims(n,s={}){try{let o=n;if(!o){const{data:I,error:E}=await this.getSession();if(E||!I.session)return{data:null,error:E};o=I.session.access_token}const{header:u,payload:c,signature:h,raw:{header:m,payload:p}}=Nl(o);s?.allowExpired||Dy(c.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!y){const{error:I}=await this.getUser(o);if(I)throw I;return{data:{claims:c,header:u,signature:h},error:null}}const v=Oy(u.alg),w=await crypto.subtle.importKey("jwk",y,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,h,wy(`${m}.${p}`)))throw new Bl("Invalid JWT signature");return{data:{claims:c,header:u,signature:h},error:null}}catch(o){if(_e(o))return{data:null,error:o};throw o}}}Qs.nextInstanceID=0;const Yy=Qs;class Xy extends Yy{constructor(n){super(n)}}var Zy=function(l,n,s,o){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function m(v){try{y(o.next(v))}catch(w){h(w)}}function p(v){try{y(o.throw(v))}catch(w){h(w)}}function y(v){v.done?c(v.value):u(v.value).then(m,p)}y((o=o.apply(l,n||[])).next())})};class ev{constructor(n,s,o){var u,c,h;if(this.supabaseUrl=n,this.supabaseKey=s,!n)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const m=sy(n),p=new URL(m);this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const y=`sb-${p.hostname.split(".")[0]}-auth-token`,v={db:Q0,realtime:X0,auth:Object.assign(Object.assign({},Y0),{storageKey:y}),global:J0},w=ay(o??{},v);this.storageKey=(u=w.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(c=w.global.headers)!==null&&c!==void 0?c:{},w.accessToken?(this.accessToken=w.accessToken,this.auth=new Proxy({},{get:(S,I)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(I)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=w.auth)!==null&&h!==void 0?h:{},this.headers,w.global.fetch),this.fetch=ry(s,this._getAccessToken.bind(this),w.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},w.realtime)),this.rest=new v0(new URL("rest/v1",p).href,{headers:this.headers,schema:w.db.schema,fetch:this.fetch}),this.storage=new V0(this.storageUrl.href,this.headers,this.fetch,o?.storage),w.accessToken||this._listenForAuthEvents()}get functions(){return new i0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},o={}){return this.rest.rpc(n,s,o)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return Zy(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:u,storageKey:c,flowType:h,lock:m,debug:p},y,v){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xy({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),y),storageKey:c,autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:u,flowType:h,lock:m,debug:p,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new I0(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,o)=>{this._handleTokenChanged(s,"CLIENT",o?.access_token)})}_handleTokenChanged(n,s,o){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tv=(l,n,s)=>new ev(l,n,s);function rv(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const l=process.version.match(/^v(\d+)\./);return l?parseInt(l[1],10)<=18:!1}rv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const vf="https://hiuuvrguhyahfrdayfdu.supabase.co",xf="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhpdXV2cmd1aHlhaGZyZGF5ZmR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyMzMwMDksImV4cCI6MjA2OTgwOTAwOX0.psdX6FBJ4Ss-MJrU_cbIRdpaXaCQEVKi07yUEWerAdQ";console.log("Supabase Config:",{url:`${vf.substring(0,20)}...`,key:`${xf.substring(0,20)}...`});const X=tv(vf,xf,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),wf=k.createContext(void 0);function nv({children:l}){const[n,s]=k.useState(null),[o,u]=k.useState(null),[c,h]=k.useState(null),[m,p]=k.useState([]),[y,v]=k.useState(!0);k.useEffect(()=>{X.auth.getSession().then(({data:{session:M}})=>{console.log("Initial session:",M),u(M),s(M?.user??null),M?.user&&(console.log("Loading staff data for user:",M.user.id),w(M.user.id),S()),v(!1)});const{data:{subscription:P}}=X.auth.onAuthStateChange((M,C)=>{console.log("Auth state changed:",M,C),u(C),s(C?.user??null),C?.user?(w(C.user.id),S()):(h(null),p([])),v(!1)});return()=>P.unsubscribe()},[]);const w=async P=>{try{console.log("Loading staff data for user ID:",P);const{data:M,error:C}=await X.from("staff").select("*").eq("id",P).single();console.log("Staff data result:",{data:M,error:C}),!C&&M?(h(M),console.log("Staff data loaded:",M)):console.log("No staff data found or error:",C)}catch(M){console.error("Error loading staff data:",M)}},S=async()=>{try{console.log("Loading all staff data");const{data:P,error:M}=await X.from("staff").select("*").order("name");console.log("All staff data result:",{data:P,error:M}),!M&&P?(p(P),console.log("All staff data loaded:",P)):console.log("No staff data found or error:",M)}catch(P){console.error("Error loading all staff data:",P)}},j={user:n,session:o,staff:c,staffList:m,loading:y,signIn:async(P,M)=>{const{error:C}=await X.auth.signInWithPassword({email:P,password:M});return{error:C}},signUp:async(P,M)=>{const{error:C}=await X.auth.signUp({email:P,password:M});return{error:C}},signOut:async()=>{await X.auth.signOut(),h(null),p([])}};return i.jsx(wf.Provider,{value:j,children:l})}function Wt(){const l=k.useContext(wf);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ee=(l,n)=>{const s=k.forwardRef(({color:o="currentColor",size:u=24,strokeWidth:c=2,absoluteStrokeWidth:h,className:m="",children:p,...y},v)=>k.createElement("svg",{ref:v,...sv,width:u,height:u,stroke:o,strokeWidth:h?Number(c)*24/Number(u):c,className:["lucide",`lucide-${av(l)}`,m].join(" "),...y},[...n.map(([w,S])=>k.createElement(w,S)),...Array.isArray(p)?p:[p]]));return s.displayName=`${l}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=Ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Ee("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=Ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Ee("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Ee("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=Ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=Ee("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=Ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Ee("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Ee("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Ee("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Ee("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function _v({message:l,type:n,duration:s=3e3,onClose:o}){const[u,c]=k.useState(!0);k.useEffect(()=>{if(n!=="loading"){const y=setTimeout(()=>{c(!1),o&&o()},s);return()=>clearTimeout(y)}},[s,o,n]);const h=()=>{c(!1),o&&o()};if(!u)return null;const m=()=>{switch(n){case"success":return"bg-green-100 border-green-500 text-green-800";case"error":return"bg-red-100 border-red-500 text-red-800";case"loading":return"bg-blue-100 border-blue-500 text-blue-800";default:return"bg-gray-100 border-gray-500 text-gray-800"}},p=()=>{switch(n){case"success":return i.jsx(Ti,{className:"w-5 h-5 text-green-600"});case"error":return i.jsx(_f,{className:"w-5 h-5 text-red-600"});case"loading":return i.jsx(cv,{className:"w-5 h-5 text-blue-600 animate-spin"});default:return null}};return i.jsx("div",{className:"fixed top-4 right-4 z-50 flex items-center",children:i.jsxs("div",{className:`flex items-center p-4 rounded-md shadow-md border-l-4 ${m()}`,role:"alert",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-3",children:p()}),i.jsx("div",{className:"text-sm font-medium",children:l})]}),i.jsx("button",{onClick:h,className:"ml-4 text-gray-500 hover:text-gray-700 focus:outline-none",children:i.jsx(uu,{className:"w-4 h-4"})})]})})}const kf=k.createContext(void 0);function bf(){const l=k.useContext(kf);if(l===void 0)throw new Error("useToast must be used within a ToastProvider");return l}function jv({children:l}){const[n,s]=k.useState(null),o=(c,h,m=3e3)=>{s({message:c,type:h,duration:m,visible:!0})},u=()=>{s(null)};return i.jsxs(kf.Provider,{value:{showToast:o,hideToast:u},children:[l,n&&n.visible&&i.jsx(_v,{message:n.message,type:n.type,duration:n.duration,onClose:u})]})}function kv(){const{signOut:l,user:n,staff:s}=Wt(),o=Yt(),[u,c]=k.useState(!0),[h,m]=k.useState(!1);console.log("Layout rendering - user:",n,"staff:",s,"location:",o.pathname),k.useEffect(()=>{const v=()=>{window.innerWidth<1024?(c(!1),m(!1)):c(!0)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const p=[{name:"Dashboard",href:"/",icon:uv},{name:"Candidates",href:"/candidates",icon:Ys},{name:"Clients",href:"/clients",icon:Si},{name:"Training Leads",href:"/training",icon:ou},{name:"Interviews",href:"/interviews",icon:vt},{name:"Updates",href:"/updates",icon:ql},{name:"Reporting",href:"/reporting",icon:wi}],y=()=>{const v=o.pathname;return p.find(S=>S.href===v)?.name||"Dashboard"};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:`fixed inset-y-0 left-0 z-50 ${h&&window.innerWidth>=1024?"w-16":"w-64"} bg-white shadow-lg transform transition-all duration-300 ease-in-out ${u?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"flex items-center justify-between h-16 px-4 bg-nestalk-primary",children:i.jsx("span",{className:`text-xl font-bold text-white transition-opacity duration-300 ${h&&window.innerWidth>=1024?"opacity-0":"opacity-100"}`,children:h&&window.innerWidth>=1024?"N":"Nestalk"})}),i.jsx("nav",{className:`flex-1 py-6 space-y-1 ${h&&window.innerWidth>=1024?"px-2":"px-4"}`,children:p.map(v=>i.jsxs(eu,{to:v.href,className:({isActive:w})=>`flex items-center ${h&&window.innerWidth>=1024?"px-2 justify-center":"px-4"} py-2 text-sm font-medium rounded-md transition-colors ${w?"bg-nestalk-primary/10 text-nestalk-primary":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,title:h&&window.innerWidth>=1024?v.name:void 0,children:[i.jsx(v.icon,{className:`w-5 h-5 ${h&&window.innerWidth>=1024?"":"mr-3"}`}),i.jsx("span",{className:`transition-opacity duration-300 ${h&&window.innerWidth>=1024?"opacity-0 w-0 overflow-hidden":"opacity-100"}`,children:v.name})]},v.name))}),i.jsx("div",{className:`border-t border-gray-200 ${h&&window.innerWidth>=1024?"p-2":"p-4"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:`flex-1 ${h&&window.innerWidth>=1024?"hidden":""}`,children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:s?.name||n?.email||"Loading..."}),i.jsxs("p",{className:"text-sm text-gray-500",children:[s?.role||"Staff"," ",s?.username&&`(${s.username})`]})]}),i.jsx("button",{onClick:l,className:`p-2 text-gray-400 hover:text-gray-600 transition-colors ${h&&window.innerWidth>=1024?"mx-auto":""}`,title:"Sign Out",children:i.jsx(dv,{className:"w-5 h-5"})})]})})]})}),u&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>c(!1)}),i.jsxs("div",{className:`flex flex-col min-h-screen transition-all duration-300 ease-in-out ${u?h&&window.innerWidth>=1024?"lg:ml-16":"lg:ml-64":"lg:ml-0"}`,children:[i.jsxs("header",{className:"sticky top-0 z-40 bg-white shadow-sm p-4 flex items-center",children:[i.jsx("button",{onClick:()=>c(!u),className:"p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 lg:hidden",children:i.jsx(hv,{className:"h-6 w-6"})}),i.jsx("div",{className:"flex items-center space-x-4 flex-1",children:i.jsx("h1",{className:"text-xl font-bold text-gray-900 ml-2 lg:ml-0",children:y()})}),i.jsx("div",{className:"hidden lg:flex items-center",children:i.jsx("button",{onClick:()=>m(!h),className:"p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",title:h?"Expand sidebar":"Collapse sidebar",children:i.jsx(iv,{className:`w-5 h-5 transition-transform ${h?"rotate-180":""}`})})})]}),i.jsx("main",{className:"flex-1",children:i.jsx(Hh,{})})]})]})}function bv(){const[l,n]=k.useState(""),[s,o]=k.useState(""),[u,c]=k.useState(""),[h,m]=k.useState(""),[p,y]=k.useState(!1),[v,w]=k.useState(!1),[S,I]=k.useState(!1),[E,A]=k.useState(""),{signIn:j,signUp:P}=Wt(),M=async C=>{if(C.preventDefault(),I(!0),A(""),p&&h.length>4){A("Username must be 4 characters or less"),I(!1);return}try{const{error:F}=p?await P(l,s):await j(l,s);if(F)A(F.message);else if(p){const{data:{user:Z}}=await X.auth.getUser();if(Z){const{error:B}=await X.from("staff").insert({id:Z.id,name:u,username:h.toUpperCase(),email:l,role:"admin"});B&&(console.error("Error creating staff record:",B),A("Account created but staff profile failed. Please contact admin."))}}}catch{A("An unexpected error occurred")}finally{I(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("h1",{className:"text-4xl font-bold text-nestalk-primary",children:"Nestalk"})}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:p?"Create your account":"Sign in to your account"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:M,children:[E&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:E}),i.jsxs("div",{className:"space-y-4",children:[p&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),i.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:u,onChange:C=>c(C.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-nestalk-primary focus:border-nestalk-primary focus:z-10 sm:text-sm",placeholder:"Enter your full name"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username (4 characters max)"}),i.jsx("input",{id:"username",name:"username",type:"text",required:!0,maxLength:4,value:h,onChange:C=>m(C.target.value.toUpperCase()),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-nestalk-primary focus:border-nestalk-primary focus:z-10 sm:text-sm",placeholder:"e.g., JOHN"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l,onChange:C=>n(C.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"password",name:"password",type:v?"text":"password",autoComplete:p?"new-password":"current-password",required:!0,value:s,onChange:C=>o(C.target.value),className:"appearance-none relative block w-full px-3 py-2 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-nestalk-primary focus:border-nestalk-primary focus:z-10 sm:text-sm",placeholder:"Enter your password"}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w(!v),children:v?i.jsx(ov,{className:"h-4 w-4 text-gray-400"}):i.jsx(iu,{className:"h-4 w-4 text-gray-400"})})]})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:S,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-nestalk-primary hover:bg-nestalk-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nestalk-primary disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S?"Processing...":p?"Create Account":"Sign In"})}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:()=>y(!p),className:"text-sm text-nestalk-primary hover:text-nestalk-primary/90",children:p?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})}function Sv(){const{user:l}=Wt(),n=Jl(),[s,o]=k.useState({totalCandidates:0,totalClients:0,totalTrainingLeads:0,todayInterviews:0,interviewsWon:0,interviewsLost:0,candidatesLost:0,clientsLost:0}),[u,c]=k.useState({startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[h,m]=k.useState([]),[p,y]=k.useState(!0);k.useEffect(()=>{v()},[]);const v=async()=>{try{const E=new Date().toISOString().split("T")[0],[A,j,P,M,C,F,Z,B]=await Promise.all([X.from("candidates").select("id",{count:"exact",head:!0}),X.from("clients").select("id",{count:"exact",head:!0}),X.from("training_leads").select("id",{count:"exact",head:!0}),X.from("interviews").select("id",{count:"exact",head:!0}).gte("date_time",E+"T00:00:00").lt("date_time",E+"T23:59:59").eq("attended",!1),X.from("interviews").select("id",{count:"exact",head:!0}).eq("outcome","Won").gte("date_time",u.startDate).lte("date_time",u.endDate),X.from("interviews").select("id",{count:"exact",head:!0}).eq("outcome","Lost").gte("date_time",u.startDate).lte("date_time",u.endDate),X.from("candidates").select("id",{count:"exact",head:!0}).eq("status","LOST").gte("updated_at",u.startDate).lte("updated_at",u.endDate),X.from("clients").select("id",{count:"exact",head:!0}).eq("status","LOST").gte("updated_at",u.startDate).lte("updated_at",u.endDate)]);o({totalCandidates:A.count||0,totalClients:j.count||0,totalTrainingLeads:P.count||0,todayInterviews:M.count||0,interviewsWon:C.count||0,interviewsLost:F.count||0,candidatesLost:Z.count||0,clientsLost:B.count||0});const{data:q}=await X.from("updates").select(`
          *,
          users:user_id (name, role)
        `).order("created_at",{ascending:!1}).limit(10);m(q||[])}catch(E){console.error("Error loading dashboard data:",E)}finally{y(!1)}},w=(E,A)=>{c(j=>({...j,[E==="start"?"startDate":"endDate"]:A})),v()},S=[{name:"Total Candidates",value:s.totalCandidates,icon:Ys,color:"bg-blue-500",href:"/candidates"},{name:"Total Clients",value:s.totalClients,icon:Si,color:"bg-green-500",href:"/clients"},{name:"Training Leads",value:s.totalTrainingLeads,icon:ou,color:"bg-purple-500",href:"/training"},{name:"Today's Interviews",value:s.todayInterviews,icon:vt,color:"bg-orange-500",href:"/interviews"},{name:"Interviews Won",value:s.interviewsWon,icon:vt,color:"bg-green-500",href:"/interviews"},{name:"Interviews Lost",value:s.interviewsLost,icon:vt,color:"bg-red-500",href:"/interviews"},{name:"Candidates Lost",value:s.candidatesLost,icon:Ys,color:"bg-red-500",href:"/candidates"},{name:"Clients Lost",value:s.clientsLost,icon:Si,color:"bg-red-500",href:"/clients"}],I=E=>{const A=new Date(E),P=Math.floor((new Date().getTime()-A.getTime())/(1e3*60*60));if(P<1)return"Just now";if(P<24)return`${P} hours ago`;const M=Math.floor(P/24);return M===1?"1 day ago":`${M} days ago`};return p?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((E,A)=>i.jsx("div",{className:"bg-white p-6 rounded-lg shadow h-24"},A))})]})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your team activity overview."})]}),i.jsxs("div",{className:"mb-6 flex gap-4 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),i.jsx("input",{type:"date",value:u.startDate,onChange:E=>w("start",E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),i.jsx("input",{type:"date",value:u.endDate,onChange:E=>w("end",E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:S.map(E=>i.jsx("button",{onClick:()=>n(E.href),className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow text-left w-full",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`p-3 rounded-lg ${E.color}`,children:i.jsx(E.icon,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:E.name}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.value})]})]})},E.name))}),i.jsx("div",{className:"grid grid-cols-1 gap-8",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(_i,{className:"w-5 h-5 text-gray-400"}),i.jsx("h2",{className:"ml-2 text-lg font-semibold text-gray-900",children:"Recent Activity"}),h.length>0&&i.jsx("button",{onClick:()=>n("/updates"),className:"ml-auto text-sm text-nestalk-primary hover:text-nestalk-primary/80",children:"View All"})]})}),i.jsx("div",{className:"p-6",children:h.length>0?i.jsx("div",{className:"space-y-4",children:h.map(E=>i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-gray-900",children:[i.jsxs("span",{className:"font-medium",children:[E.users?.name||"Unknown"," (",E.users?.role||"User",")"]})," ",E.update_text]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:I(E.created_at)})]})]},E.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})})]})})]})}function ra({searchTerm:l,onSearchChange:n,filterStatus:s,onFilterChange:o,statusOptions:u,placeholder:c="Search..."}){return i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(yv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:c,value:l,onChange:h=>n(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(lv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsxs("select",{value:s,onChange:h=>o(h.target.value),className:"w-full sm:w-48 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent appearance-none bg-white",children:[i.jsx("option",{value:"all",children:"All Status"}),u.map(h=>i.jsx("option",{value:h,children:h},h))]})]})]})}function Pi({status:l,type:n="candidate"}){const s=(u,c)=>{const h=u.toUpperCase(),m={WON:"bg-green-100 text-green-800",LOST:"bg-red-100 text-red-800",PENDING:"bg-yellow-100 text-yellow-800",INTERVIEW_SCHEDULED:"bg-blue-100 text-blue-800",ARCHIVED:"bg-gray-200 text-gray-700"};return({candidate:m,client:{SCHEDULED:"bg-green-100 text-green-800","PROFILES-SENT":"bg-green-100 text-green-800","CLOSED-LOST":"bg-red-100 text-red-800","CALL-AGAIN-1-DAY":"bg-blue-100 text-blue-800","CALL-AGAIN-2-DAYS":"bg-blue-100 text-blue-800","CALL-AGAIN-3-DAYS":"bg-blue-100 text-blue-800","WILL-CALL-BACK":"bg-yellow-100 text-yellow-800"},training:{NEW:"bg-blue-100 text-blue-800",CONTACTED:"bg-yellow-100 text-yellow-800",INTERESTED:"bg-green-100 text-green-800",ENROLLED:"bg-emerald-100 text-emerald-800",COMPLETED:"bg-purple-100 text-purple-800","DROPPED-OFF":"bg-red-100 text-red-800"},interview:{SCHEDULED:"bg-blue-100 text-blue-800",COMPLETED:"bg-green-100 text-green-800",WON:"bg-green-100 text-green-800",LOST:"bg-red-100 text-red-800","NO-SHOW":"bg-red-100 text-red-800","NEEDS-ATTENTION":"bg-red-100 text-red-800 border border-red-500"}}[c]||m)[h]||"bg-gray-100 text-gray-800"},o=u=>u.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" ");return i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s(l,n)}`,children:o(l)})}function Nv(){const[l,n]=k.useState([]),[s,o]=k.useState([]),[u,c]=k.useState(""),[h,m]=k.useState("all"),[p,y]=k.useState({start:"",end:""}),[v,w]=k.useState(!0),[S,I]=k.useState(!1),[E,A]=k.useState(null),[j,P]=k.useState({name:"",phone:"",source:"",role:"",status:"PENDING",scheduledDateOnly:""}),[M,C]=k.useState(!1),[F,Z]=k.useState(null),[B,q]=k.useState(!1),[ge,we]=k.useState(null),[W,D]=k.useState({open:!1,candidate:null,dateOnly:""}),{user:H}=Wt(),{showToast:se}=bf(),Q=["PENDING","INTERVIEW_SCHEDULED","WON","LOST"],fe=["Nanny","House Manager","Chef","Driver","AOB","Caregiver","General","Other"],ke=["TikTok","Facebook","Instagram","Google Search","Website","Referral","LinkedIn","Walk-in poster"];k.useEffect(()=>{je();const U=X.channel("candidates-changes").on("postgres_changes",{event:"*",schema:"public",table:"candidates"},ie=>{console.log("Candidates table change detected:",ie),je()}).subscribe(),te=X.channel("interviews-changes").on("postgres_changes",{event:"*",schema:"public",table:"interviews"},ie=>{console.log("Interviews table change detected:",ie),je()}).subscribe();return()=>{U.unsubscribe(),te.unsubscribe()}},[]),k.useEffect(()=>{re()},[l,u,h,p]);const je=async()=>{w(!0),se("Loading candidates...","loading");try{const{data:U,error:te}=await X.from("candidates").select("*").neq("status","ARCHIVED").order("created_at",{ascending:!1});if(te)throw te;n(U||[]),se("Candidates loaded successfully","success")}catch(U){console.error("Error loading candidates:",U),se("Failed to load candidates","error")}finally{w(!1)}},re=()=>{let U=[...l];u&&(U=U.filter(te=>te.name.toLowerCase().includes(u.toLowerCase())||te.phone.includes(u)||te.role.toLowerCase().includes(u.toLowerCase()))),h!=="all"&&(U=U.filter(te=>te.status===h)),p.start&&p.end&&(U=U.filter(te=>{const ie=new Date(te.created_at).toISOString().split("T")[0];return ie>=p.start&&ie<=p.end})),o(U)},oe=(U,te)=>{n(ie=>ie.map(Ne=>Ne.id===U?te(Ne):Ne))},ne=async U=>{U.preventDefault(),q(!0),se(E?"Updating candidate...":"Adding new candidate...","loading");try{if(E&&E.status==="INTERVIEW_SCHEDULED"){se("Cannot edit candidates with scheduled interviews. Please use the Interviews page.","error"),q(!1);return}let te=null;if(j.status==="INTERVIEW_SCHEDULED"&&j.scheduledDateOnly){const ie=new Date(j.scheduledDateOnly);ie.setHours(14,0,0,0),te=ie.toISOString()}if(E){if(j.status==="INTERVIEW_SCHEDULED"&&!te){se("Please provide a scheduled date for the interview","error"),q(!1);return}const ie={name:j.name,phone:j.phone,source:j.source,role:j.role,status:j.status,scheduled_date:te},{error:Ne}=await X.from("candidates").update(ie).eq("id",E.id);if(Ne){if(Ne.message.includes("active interview exists")){se("Cannot modify this candidate - please manage from Interviews page","error"),q(!1);return}throw Ne}if(j.status==="INTERVIEW_SCHEDULED"&&te){const{error:Fe}=await X.from("interviews").insert({candidate_id:E.id,date_time:te,location:"Office",assigned_staff:H?.id,attended:!1,outcome:null,notes:"",status:"scheduled"});Fe&&console.warn("Interview creation failed:",Fe)}await X.from("updates").insert({linked_to_type:"candidate",linked_to_id:E.id,user_id:H?.id,update_text:`Updated candidate ${j.name}${j.status==="INTERVIEW_SCHEDULED"?" and scheduled interview":""}`}),oe(E.id,Fe=>({...Fe,...ie})),I(!1),se(`Candidate ${j.name} updated successfully`,"success")}else{if(!j.name.trim()||!j.phone.trim()||!j.role.trim()){se("Please fill in all required fields","error"),q(!1);return}const ie={name:j.name.trim(),phone:j.phone.trim(),source:j.source||"Referral",role:j.role,status:j.status,inquiry_date:new Date().toISOString().split("T")[0],assigned_to:H?.id,scheduled_date:te},{data:Ne,error:Fe}=await X.from("candidates").insert(ie).select("*").single();if(Fe){console.error("Insert error:",Fe),Fe.code==="23505"?se("A candidate with this phone number already exists","error"):se(`Failed to add candidate: ${Fe.message}`,"error"),q(!1);return}if(j.status==="INTERVIEW_SCHEDULED"&&te){const{error:lt}=await X.from("interviews").insert({candidate_id:Ne.id,date_time:te,location:"Office",assigned_staff:H?.id,attended:!1,outcome:null,notes:"",status:"scheduled"});lt&&console.warn("Interview creation failed:",lt)}await X.from("updates").insert({linked_to_type:"candidate",linked_to_id:Ne.id,user_id:H?.id,update_text:`Added candidate ${j.name}${te?" with interview scheduled":""}`}),n(lt=>[Ne,...lt]),I(!1),se(`Candidate ${j.name} added successfully`,"success")}ve()}catch(te){console.error("Error saving candidate:",te);const ie=te instanceof Error?te.message:"Unknown error occurred";se(`Failed to save candidate: ${ie}`,"error")}finally{q(!1)}},x=async U=>{try{const{error:te}=await X.from("candidates").update({status:"PENDING",scheduled_date:null}).eq("id",U.id);if(te)throw te;await X.from("updates").insert({linked_to_type:"candidate",linked_to_id:U.id,user_id:H?.id,update_text:"Marked as PENDING"}),oe(U.id,ie=>({...ie,status:"PENDING",scheduled_date:null}))}catch(te){console.error("Error updating status to pending:",te)}},R=U=>{D({open:!0,candidate:U,dateOnly:""})},G=async()=>{if(!W.candidate||!W.dateOnly)return;const U=W.candidate;try{const te=new Date(W.dateOnly);te.setHours(14,0,0,0);const ie=te.toISOString(),{error:Ne}=await X.from("candidates").update({status:"INTERVIEW_SCHEDULED",scheduled_date:ie}).eq("id",U.id);if(Ne)throw Ne;const{error:Fe}=await X.from("interviews").insert({candidate_id:U.id,date_time:ie,location:"Office",assigned_staff:H?.id,attended:!1,outcome:null,notes:""});if(Fe)throw Fe;await X.from("updates").insert({linked_to_type:"candidate",linked_to_id:U.id,user_id:H?.id,update_text:`Interview scheduled for ${U.name} on ${te.toDateString()} 2:00 PM`}),oe(U.id,lt=>({...lt,status:"INTERVIEW_SCHEDULED",scheduled_date:ie})),D({open:!1,candidate:null,dateOnly:""})}catch(te){console.error("Error scheduling interview:",te),alert("Failed to schedule interview")}},N=async U=>{try{const{error:te}=await X.from("candidates").update({status:"LOST"}).eq("id",U.id);if(te)throw te;await X.from("updates").insert({linked_to_type:"candidate",linked_to_id:U.id,user_id:H?.id,update_text:"Candidate marked as LOST"}),oe(U.id,ie=>({...ie,status:"LOST"}))}catch(te){console.error("Error marking candidate as lost:",te)}},z=U=>{const te=new Date(U),ie=te.getDate(),Ne=te.toLocaleString("default",{month:"long"}),Fe=te.getFullYear();return`${ie}${ie===1||ie===21||ie===31?"st":ie===2||ie===22?"nd":ie===3||ie===23?"rd":"th"} ${Ne} ${Fe}`},Y=()=>{const U=`Name,Phone,Source,Role,Status,Scheduled Date (YYYY-MM-DD)
John Doe,555-1234,Referral,Nanny,PENDING,
Jane Smith,555-5678,TikTok,Chef,INTERVIEW_SCHEDULED,2025-09-15`,te=new Blob([U],{type:"text/csv"}),ie=URL.createObjectURL(te),Ne=document.createElement("a");Ne.href=ie,Ne.download="candidate_upload_template.csv",document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(ie)},he=async U=>{if(U.preventDefault(),!F){alert("Please select a CSV file to upload");return}try{const ie=(await F.text()).split(/\r?\n/).filter(xe=>xe.trim());if(ie.length<2){alert("CSV file must have at least a header row and one data row");return}const Ne=xe=>{const st=[];let at="",Ht=!1;for(let bt=0;bt<xe.length;bt++){const Br=xe[bt];Br==='"'?Ht=!Ht:Br===","&&!Ht?(st.push(at.trim()),at=""):at+=Br}return st.push(at.trim()),st},Fe=ie[0],lt=ie.slice(1),qt=Ne(Fe).map(xe=>xe.trim().toLowerCase()),dn=qt.findIndex(xe=>xe.includes("name")),Mr=qt.findIndex(xe=>xe.includes("phone")),na=qt.findIndex(xe=>xe.includes("source")),Fr=qt.findIndex(xe=>xe.includes("role")),pr=qt.findIndex(xe=>xe.includes("status")),Xt=qt.findIndex(xe=>xe.includes("scheduled")||xe.includes("date"));if(dn===-1||Mr===-1||Fr===-1){alert("CSV missing required columns. Please ensure your CSV has columns for Name, Phone, and Role");return}console.log("CSV Headers found:",{nameIdx:dn,phoneIdx:Mr,roleIdx:Fr,statusIdx:pr,schedIdx:Xt}),console.log("Header columns:",qt);const{data:ns,error:ss}=await X.from("candidates").select("phone");if(ss){console.error("Error fetching existing candidates:",ss),alert("Error checking for duplicates. Please try again.");return}const sa=new Set((ns||[]).map(xe=>xe.phone)),Zt=[],ut=[];for(let xe=0;xe<lt.length;xe++){const st=lt[xe];if(st.trim())try{const at=Ne(st),Ht=at[dn]?.trim().replace(/"/g,""),bt=at[Mr]?.trim().replace(/"/g,""),Br=at[na]?.trim().replace(/"/g,"")||"Referral",Wr=at[Fr]?.trim().replace(/"/g,"");let xt=(at[pr]?.trim().replace(/"/g,"")||"").toUpperCase();const er=at[Xt]?.trim().replace(/"/g,"");if(console.log(`Row ${xe+2}:`,{name:Ht,phone:bt,role:Wr,status:xt,sched:er}),!Ht){ut.push(`Row ${xe+2}: Name is required`);continue}if(!bt){ut.push(`Row ${xe+2}: Phone is required`);continue}if(!Wr){ut.push(`Row ${xe+2}: Role is required`);continue}if(sa.has(bt)){ut.push(`Row ${xe+2}: Phone number ${bt} already exists`);continue}if(!er&&xt==="INTERVIEW_SCHEDULED"&&(xt="PENDING"),xt||(xt="PENDING"),!["PENDING","INTERVIEW_SCHEDULED","WON","LOST"].includes(xt)){ut.push(`Row ${xe+2}: Invalid status "${xt}". Must be PENDING, INTERVIEW_SCHEDULED, WON, or LOST`);continue}let hn=null;if(xt==="INTERVIEW_SCHEDULED"&&er){const qr=new Date(er);if(isNaN(qr.getTime())){ut.push(`Row ${xe+2}: Invalid date format "${er}". Use YYYY-MM-DD format`);continue}qr.setHours(14,0,0,0),hn=qr.toISOString()}Zt.push({name:Ht,phone:bt,source:Br,role:Wr,status:xt,assigned_to:H?.id,scheduled_date:hn,inquiry_date:new Date().toISOString().split("T")[0],created_at:new Date().toISOString()})}catch(at){ut.push(`Row ${xe+2}: Error parsing row - ${at}`)}}if(ut.length>0){alert("Found "+ut.length+` errors:

`+ut.slice(0,5).join(`
`)+(ut.length>5?`
...and more`:""));return}if(Zt.length===0){alert("No valid rows to insert. Please check your CSV data.");return}console.log(`Inserting ${Zt.length} candidates:`,Zt);const{data:as,error:mr}=await X.from("candidates").insert(Zt).select("id, status, scheduled_date");if(mr){console.error("Database insert error:",mr),alert(`Database error: ${mr.message}`);return}const zr=(as||[]).filter(xe=>xe.status==="INTERVIEW_SCHEDULED"&&xe.scheduled_date);if(zr.length>0){const{error:xe}=await X.from("interviews").insert(zr.map(st=>({candidate_id:st.id,date_time:st.scheduled_date,assigned_staff:H?.id,attended:!1,outcome:null,notes:""})));xe&&(console.error("Error creating interviews:",xe),alert(`Candidates added but failed to create interviews: ${xe.message}`))}await je(),C(!1),Z(null),alert(`Successfully uploaded ${Zt.length} candidates${zr.length>0?` and created ${zr.length} interviews`:""}`)}catch(te){console.error("Error bulk uploading candidates:",te),alert(`Error uploading candidates: ${te instanceof Error?te.message:"Unknown error"}`)}},ve=()=>{P({name:"",phone:"",source:"",role:"",status:"PENDING",scheduledDateOnly:""}),A(null)};return v?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),i.jsx("div",{className:"space-y-4",children:[...Array(5)].map((U,te)=>i.jsx("div",{className:"bg-white p-6 rounded-lg shadow h-32"},te))})]})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Candidates"}),i.jsx("p",{className:"text-gray-600",children:"Track candidate inquiries and outreach progress"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>C(!0),className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Bulk Upload",children:i.jsx(un,{className:"w-4 h-4"})}),i.jsxs("button",{onClick:()=>I(!0),className:"flex items-center px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:[i.jsx(un,{className:"w-4 h-4 mr-2"}),"Add Candidate"]})]})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx(ra,{searchTerm:u,onSearchChange:c,filterStatus:h,onFilterChange:m,statusOptions:Q,placeholder:"Search by name, phone, or role..."}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Date added:"}),i.jsx("input",{type:"date",value:p.start,onChange:U=>y(te=>({...te,start:U.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),i.jsx("input",{type:"date",value:p.end,onChange:U=>y(te=>({...te,end:U.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mt-3",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inquiry Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((U,te)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:te+1}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.name})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-gray-900",children:[i.jsx("span",{className:"hidden sm:inline-flex items-center",children:i.jsx(lu,{className:"w-3 h-3 mr-1"})}),U.phone]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U.source||"N/A"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U.role}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pi,{status:U.status,type:"candidate"}),U.status==="INTERVIEW_SCHEDULED"&&U.scheduled_date&&i.jsxs("span",{className:"inline-flex items-center text-xs text-gray-600",children:[i.jsx(vt,{className:"w-3 h-3 mr-1"}),z(U.scheduled_date)]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z(U.inquiry_date)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsxs("div",{className:"relative inline-flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{if(U.status==="INTERVIEW_SCHEDULED"){se("Cannot edit candidates with scheduled interviews. Please use the Interviews page to make changes.","error");return}I(!0),A(U),P({name:U.name,phone:U.phone,source:U.source||"Referral",role:U.role,status:U.status,scheduledDateOnly:U.scheduled_date?new Date(U.scheduled_date).toISOString().split("T")[0]:""})},className:`${U.status==="INTERVIEW_SCHEDULED"?"text-gray-400 cursor-not-allowed":"text-nestalk-primary hover:text-nestalk-primary/80"}`,title:U.status==="INTERVIEW_SCHEDULED"?"Cannot edit - use Interviews page":"Edit",disabled:U.status==="INTERVIEW_SCHEDULED",children:i.jsx(Xn,{className:"w-4 h-4"})}),i.jsxs("select",{onChange:ie=>{const Ne=ie.target.value;if(U.status==="INTERVIEW_SCHEDULED"){se("Cannot change status - please use Interviews page to manage scheduled candidates","error"),ie.currentTarget.selectedIndex=0;return}Ne==="PENDING"&&x(U),Ne==="INTERVIEW_SCHEDULED"&&R(U),Ne==="LOST"&&N(U),ie.currentTarget.selectedIndex=0},className:`px-2 py-1 border border-gray-300 rounded text-sm bg-white ${U.status==="INTERVIEW_SCHEDULED"?"bg-gray-100 text-gray-400 cursor-not-allowed":""}`,defaultValue:"",title:U.status==="INTERVIEW_SCHEDULED"?"Use Interviews page to manage this candidate":"Actions",disabled:U.status==="INTERVIEW_SCHEDULED",children:[i.jsx("option",{value:"",disabled:!0,children:"Actions"}),i.jsx("option",{value:"PENDING",children:"Pending"}),i.jsx("option",{value:"INTERVIEW_SCHEDULED",children:"Interview Scheduled"}),i.jsx("option",{value:"LOST",children:"Lost"})]})]})})]},U.id))})]})})}),s.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ys,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No candidates found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:u||h!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first candidate inquiry."})]}),S&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>{I(!1),ve()},children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-screen overflow-y-auto",onClick:U=>U.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:E?"Edit Candidate":"Add New Candidate"}),i.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",required:!0,value:j.name,onChange:U=>P({...j,name:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),i.jsx("input",{type:"tel",required:!0,value:j.phone,onChange:U=>P({...j,phone:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source"}),i.jsxs("select",{required:!0,value:j.source,onChange:U=>P({...j,source:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select source"}),ke.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),i.jsxs("select",{required:!0,value:j.role,onChange:U=>P({...j,role:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select role"}),fe.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),i.jsx("select",{value:j.status,onChange:U=>P({...j,status:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:Q.map(U=>i.jsx("option",{value:U,children:U.replace("_"," ")},U))})]}),j.status==="INTERVIEW_SCHEDULED"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interview Date"}),i.jsx("input",{type:"date",value:j.scheduledDateOnly,onChange:U=>P({...j,scheduledDateOnly:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Time defaults to 2:00 PM"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{I(!1),ve()},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:[E?"Update":"Add"," Candidate"]})]})]})]})})}),W.open&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>D({open:!1,candidate:null,dateOnly:""}),children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",onClick:U=>U.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Schedule Interview"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),i.jsx("input",{type:"date",value:W.dateOnly,onChange:U=>D(te=>({...te,dateOnly:U.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Time defaults to 2:00 PM"})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>D({open:!1,candidate:null,dateOnly:""}),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsxs("button",{type:"button",onClick:G,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors inline-flex items-center justify-center gap-2",children:[i.jsx(Ti,{className:"w-4 h-4"})," Confirm"]})]})]})]})})}),M&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bulk Upload Candidates"}),i.jsxs("form",{onSubmit:he,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),i.jsx("input",{type:"file",accept:".csv",onChange:U=>Z(U.target.files?.[0]||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{C(!1),Z(null)},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsx("button",{type:"button",onClick:Y,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Download Template"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:"Upload"})]})]})]})})})]})}function Sf({isOpen:l,onClose:n,linkedToType:s,linkedToId:o,linkedToName:u,candidateData:c}){const[h,m]=k.useState([]),[p,y]=k.useState([]),[v,w]=k.useState(!1),[S,I]=k.useState(!1),[E,A]=k.useState({description:"",follow_up_assigned_to:""}),{user:j,staff:P}=Wt();k.useEffect(()=>{l&&(M(),C())},[l,o]);const M=async()=>{w(!0);try{const{data:B,error:q}=await X.from("communications").select(`
          *,
          staff:user_id (name, username),
          assigned_staff:follow_up_assigned_to (name, username)
        `).eq("linked_to_type",s).eq("linked_to_id",o).order("created_at",{ascending:!1});if(q)throw q;m(B||[])}catch(B){console.error("Error loading communications:",B)}finally{w(!1)}},C=async()=>{try{const{data:B,error:q}=await X.from("staff").select("id, name, username").order("name");if(q)throw q;y(B||[])}catch(B){console.error("Error loading staff:",B)}},F=async B=>{B.preventDefault();try{const{error:q}=await X.from("communications").insert({linked_to_type:s,linked_to_id:o,user_id:j?.id,description:E.description,follow_up_assigned_to:E.follow_up_assigned_to||null});if(q)throw q;E.follow_up_assigned_to&&await X.from("updates").insert({linked_to_type:s,linked_to_id:o,user_id:j?.id,update_text:`Follow-up assigned for ${u}: ${E.description}`}),await X.from("updates").insert({linked_to_type:s,linked_to_id:o,user_id:j?.id,update_text:`Communication added for ${u}: ${E.description}`}),A({description:"",follow_up_assigned_to:""}),I(!1),M()}catch(q){console.error("Error saving communication:",q),alert("Error saving communication. Please try again.")}},Z=B=>{const q=new Date(B),ge=q.getDate(),we=q.toLocaleString("default",{month:"long"}),W=q.getFullYear();return`${ge}${ge===1||ge===21||ge===31?"st":ge===2||ge===22?"nd":ge===3||ge===23?"rd":"th"} ${we} ${W}`};return l?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Communications & Notes - ",u]}),i.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx(uu,{className:"w-5 h-5"})})]})}),c&&i.jsx("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Phone:"}),i.jsx("div",{className:"text-gray-900",children:c.phone})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Source:"}),i.jsx("div",{className:"text-gray-900",children:c.source})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Inquiry Date:"}),i.jsx("div",{className:"text-gray-900",children:Z(c.inquiry_date)})]}),c.scheduled_date&&i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Scheduled Date:"}),i.jsx("div",{className:"text-gray-900",children:Z(c.scheduled_date)})]})]})}),i.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:v?i.jsx("div",{className:"text-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-nestalk-primary mx-auto"})}):i.jsxs("div",{className:"space-y-4",children:[h.map(B=>i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(jf,{className:"w-4 h-4 text-gray-400"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[B.staff?.name," (",B.staff?.username,")"]})]}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[i.jsx(vt,{className:"w-3 h-3 mr-1"}),Z(B.created_at)," at"," ",new Date(B.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),i.jsx("p",{className:"text-gray-700 mb-2",children:B.description}),B.follow_up_assigned_to&&i.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[i.jsx(Qn,{className:"w-3 h-3 mr-1"}),"Follow-up assigned to: ",B.assigned_staff?.name," (",B.assigned_staff?.username,")"]})]},B.id)),h.length===0&&i.jsx("div",{className:"text-center py-8 text-gray-500",children:"No communications recorded yet"})]})}),i.jsx("div",{className:"p-6 border-t border-gray-200",children:S?i.jsxs("form",{onSubmit:F,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Communication/Note Description"}),i.jsx("textarea",{required:!0,rows:3,value:E.description,onChange:B=>A({...E,description:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",placeholder:"Describe the communication or add notes..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign Follow-up To (Optional)"}),i.jsxs("select",{value:E.follow_up_assigned_to,onChange:B=>A({...E,follow_up_assigned_to:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:[i.jsx("option",{value:"",children:"No follow-up assignment"}),p.map(B=>i.jsxs("option",{value:B.id,children:[B.name," (",B.username,")"]},B.id))]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{I(!1),A({description:"",follow_up_assigned_to:""})},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:"Add Communication"})]})]}):i.jsxs("button",{onClick:()=>I(!0),className:"w-full flex items-center justify-center px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:[i.jsx(un,{className:"w-4 h-4 mr-2"}),"Add Communication/Note"]})})]})}):null}function Ev(){const[l,n]=k.useState([]),[s,o]=k.useState([]),[u,c]=k.useState(""),[h,m]=k.useState("all"),[p,y]=k.useState(!0),[v,w]=k.useState(!1),[S,I]=k.useState(!1),[E,A]=k.useState(null),[j,P]=k.useState({name_company:"",contact_info:"",role_requested:"",status:"pending",reminder_date:"",notes:""}),{user:M}=Wt(),C=["pending","profiles-sent","closed-lost","call-again-1-day","call-again-2-days","call-again-3-days","will-call-back"],F=["Nanny","House Manager","Chef","Driver","AOB","Caregiver","Other"];k.useEffect(()=>{Z()},[]),k.useEffect(()=>{B()},[l,u,h]);const Z=async()=>{try{const{data:D,error:H}=await X.from("clients").select("*").order("created_at",{ascending:!1});if(H)throw H;n(D||[])}catch(D){console.error("Error loading clients:",D)}finally{y(!1)}},B=()=>{let D=l;u&&(D=D.filter(H=>H.name_company.toLowerCase().includes(u.toLowerCase())||H.contact_info.toLowerCase().includes(u.toLowerCase())||H.role_requested.toLowerCase().includes(u.toLowerCase()))),h!=="all"&&(D=D.filter(H=>H.status===h)),o(D)},q=async D=>{D.preventDefault();try{if(E){const{error:H}=await X.from("clients").update({...j,reminder_date:j.reminder_date||null}).eq("id",E.id);if(H)throw H;await X.from("updates").insert({linked_to_type:"client",linked_to_id:E.id,user_id:M?.id,update_text:`Updated client status to ${j.status}`,reminder_date:j.reminder_date||null})}else{const{error:H}=await X.from("clients").insert({...j,assigned_to:M?.id,reminder_date:j.reminder_date||null});if(H)throw H}await Z(),w(!1),ge()}catch(H){console.error("Error saving client:",H)}},ge=()=>{P({name_company:"",contact_info:"",role_requested:"",status:"pending",reminder_date:"",notes:""}),A(null)},we=D=>{A(D),P({name_company:D.name_company,contact_info:D.contact_info,role_requested:D.role_requested,status:D.status,reminder_date:D.reminder_date||"",notes:D.notes}),w(!0)},W=D=>{A(D),I(!0)};return p?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),i.jsx("div",{className:"space-y-4",children:[...Array(5)].map((D,H)=>i.jsx("div",{className:"bg-white p-6 rounded-lg shadow h-32"},H))})]})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Clients"}),i.jsx("p",{className:"text-gray-600",children:"Manage client inquiries and staffing requests"})]}),i.jsxs("button",{onClick:()=>w(!0),className:"flex items-center px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:[i.jsx(un,{className:"w-4 h-4 mr-2"}),"Add Client"]})]}),i.jsx(ra,{searchTerm:u,onSearchChange:c,filterStatus:h,onFilterChange:m,statusOptions:C,placeholder:"Search by company, contact, or role..."}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inquiry Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((D,H)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H+1}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name_company})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:D.contact_info})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.role_requested}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx(Pi,{status:D.status,type:"client"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(D.inquiry_date).toLocaleDateString()}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[i.jsxs("button",{onClick:()=>we(D),className:"text-nestalk-primary hover:text-nestalk-primary/80 inline-flex items-center",children:[i.jsx(Xn,{className:"w-4 h-4 mr-1"}),"Edit"]}),i.jsxs("button",{onClick:()=>W(D),className:"text-blue-600 hover:text-blue-800 inline-flex items-center ml-2",children:[i.jsx(iu,{className:"w-4 h-4 mr-1"}),"Comms"]})]})]},D.id))})]})})}),s.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Si,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No clients found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:u||h!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first client inquiry."})]}),v&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-screen overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:E?"Edit Client":"Add New Client"}),i.jsxs("form",{onSubmit:q,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),i.jsx("input",{type:"text",required:!0,value:j.name_company,onChange:D=>P({...j,name_company:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Info"}),i.jsx("input",{type:"text",required:!0,value:j.contact_info,onChange:D=>P({...j,contact_info:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",placeholder:"Email, phone, or contact person"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Requested"}),i.jsxs("select",{required:!0,value:j.role_requested,onChange:D=>P({...j,role_requested:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select role"}),F.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),i.jsx("select",{value:j.status,onChange:D=>P({...j,status:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:C.map(D=>i.jsx("option",{value:D,children:D.split("-").map(H=>H.charAt(0).toUpperCase()+H.slice(1)).join(" ")},D))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder Date"}),i.jsx("input",{type:"date",value:j.reminder_date,onChange:D=>P({...j,reminder_date:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),i.jsx("textarea",{rows:3,value:j.notes,onChange:D=>P({...j,notes:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",placeholder:"Add any notes about this client inquiry..."})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{w(!1),ge()},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:[E?"Update":"Add"," Client"]})]})]})]})})}),i.jsx(Sf,{isOpen:S,onClose:()=>I(!1),linkedToType:"client",linkedToId:E?.id||"",linkedToName:E?.name_company||""})]})}function Cv(){const[l,n]=k.useState([]),[s,o]=k.useState([]),[u,c]=k.useState(""),[h,m]=k.useState("all"),[p,y]=k.useState(!0),[v,w]=k.useState(!1),[S,I]=k.useState(!1),[E,A]=k.useState(null),[j,P]=k.useState({name:"",phone:"",training_type:"",status:"pending",reminder_date:"",notes:""}),{user:M}=Wt(),C=["pending","contacted","interested","enrolled","completed","dropped-off"],F=["Web Development","Data Science","Digital Marketing","UI/UX Design","Project Management","Cybersecurity","Other"];k.useEffect(()=>{Z()},[]),k.useEffect(()=>{B()},[l,u,h]);const Z=async()=>{try{const{data:D,error:H}=await X.from("training_leads").select("*").order("created_at",{ascending:!1});if(H)throw H;n(D||[])}catch(D){console.error("Error loading training leads:",D)}finally{y(!1)}},B=()=>{let D=l;u&&(D=D.filter(H=>H.name.toLowerCase().includes(u.toLowerCase())||H.phone.includes(u)||H.training_type.toLowerCase().includes(u.toLowerCase()))),h!=="all"&&(D=D.filter(H=>H.status===h)),o(D)},q=async D=>{D.preventDefault();try{if(E){const{error:H}=await X.from("training_leads").update({...j,reminder_date:j.reminder_date||null}).eq("id",E.id);if(H)throw H;await X.from("updates").insert({linked_to_type:"training_lead",linked_to_id:E.id,user_id:M?.id,update_text:`Updated training lead status to ${j.status}`,reminder_date:j.reminder_date||null})}else{const{error:H}=await X.from("training_leads").insert({...j,assigned_to:M?.id,reminder_date:j.reminder_date||null});if(H)throw H}await Z(),w(!1),ge()}catch(H){console.error("Error saving training lead:",H)}},ge=()=>{P({name:"",phone:"",training_type:"",status:"pending",reminder_date:"",notes:""}),A(null)},we=D=>{A(D),P({name:D.name,phone:D.phone,training_type:D.training_type,status:D.status,reminder_date:D.reminder_date||"",notes:D.notes}),w(!0)},W=D=>{A(D),I(!0)};return p?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),i.jsx("div",{className:"space-y-4",children:[...Array(5)].map((D,H)=>i.jsx("div",{className:"bg-white p-6 rounded-lg shadow h-32"},H))})]})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Training Leads"}),i.jsx("p",{className:"text-gray-600",children:"Track training program inquiries and enrollment"})]}),i.jsxs("button",{onClick:()=>w(!0),className:"flex items-center px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:[i.jsx(un,{className:"w-4 h-4 mr-2"}),"Add Training Lead"]})]}),i.jsx(ra,{searchTerm:u,onSearchChange:c,filterStatus:h,onFilterChange:m,statusOptions:C,placeholder:"Search by name, phone, or training type..."}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Training Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inquiry Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((D,H)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H+1}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[i.jsx(lu,{className:"w-3 h-3 mr-1"}),D.phone]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.training_type}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx(Pi,{status:D.status,type:"training"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(D.inquiry_date).toLocaleDateString()}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[i.jsxs("button",{onClick:()=>we(D),className:"text-nestalk-primary hover:text-nestalk-primary/80 inline-flex items-center",children:[i.jsx(Xn,{className:"w-4 h-4 mr-1"}),"Edit"]}),i.jsxs("button",{onClick:()=>W(D),className:"text-blue-600 hover:text-blue-800 inline-flex items-center ml-2",children:[i.jsx(iu,{className:"w-4 h-4 mr-1"}),"Comms"]})]})]},D.id))})]})})}),s.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ou,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No training leads found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:u||h!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first training inquiry."})]}),v&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-screen overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:E?"Edit Training Lead":"Add New Training Lead"}),i.jsxs("form",{onSubmit:q,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",required:!0,value:j.name,onChange:D=>P({...j,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),i.jsx("input",{type:"tel",required:!0,value:j.phone,onChange:D=>P({...j,phone:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Training Type"}),i.jsxs("select",{required:!0,value:j.training_type,onChange:D=>P({...j,training_type:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select training type"}),F.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),i.jsx("select",{value:j.status,onChange:D=>P({...j,status:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:C.map(D=>i.jsx("option",{value:D,children:D.split("-").map(H=>H.charAt(0).toUpperCase()+H.slice(1)).join(" ")},D))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder Date"}),i.jsx("input",{type:"date",value:j.reminder_date,onChange:D=>P({...j,reminder_date:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),i.jsx("textarea",{rows:3,value:j.notes,onChange:D=>P({...j,notes:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",placeholder:"Add any notes about this training inquiry..."})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{w(!1),ge()},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:[E?"Update":"Add"," Training Lead"]})]})]})]})})}),i.jsx(Sf,{isOpen:S,onClose:()=>I(!1),linkedToType:"training_lead",linkedToId:E?.id||"",linkedToName:E?.name||""})]})}function Tv(){const[l,n]=k.useState([]),[s,o]=k.useState([]),[u,c]=k.useState([]),[h,m]=k.useState(""),[p,y]=k.useState("all"),[v,w]=k.useState("created_at"),[S,I]=k.useState(!0),[E,A]=k.useState(!1),[j,P]=k.useState(null),[M,C]=k.useState({candidate_id:"",date_time:"",attended:!1,outcome:""}),[F,Z]=k.useState({open:!1,interview:null,dateTime:""}),{user:B}=Wt(),{showToast:q}=bf(),ge=["all","scheduled","won","lost"],we=["Won","Lost"];k.useEffect(()=>{Promise.all([W(),D()]);const x=X.channel("interviews-changes").on("postgres_changes",{event:"*",schema:"public",table:"interviews"},N=>{console.log("Interviews table change detected:",N),W()}).subscribe(),R=X.channel("candidates-changes-for-interviews").on("postgres_changes",{event:"*",schema:"public",table:"candidates"},N=>{console.log("Candidates table change detected:",N),D()}).subscribe(),G=setInterval(()=>{const N=new Date;n(z=>z.map(Y=>{const he=new Date(Y.date_time);return!Y.attended&&!Y.outcome&&he<N?{...Y,needsAttention:!0}:Y}))},6e4);return()=>{x.unsubscribe(),R.unsubscribe(),clearInterval(G)}},[]),k.useEffect(()=>{H()},[l,h,p,v]);const W=async()=>{try{q("Loading interviews...","loading");const{data:x,error:R}=await X.from("interviews").select(`
          *,
          candidates (name, phone, status)
        `).order("created_at",{ascending:!1});if(R)throw R;const G=new Date,N=x?.map(z=>{const Y=new Date(z.date_time);return!z.attended&&!z.outcome&&Y<G?{...z,needsAttention:!0}:z})||[];n(N),q("Interviews loaded successfully","success")}catch(x){console.error("Error loading interviews:",x),q("Failed to load interviews","error")}finally{I(!1)}},D=async()=>{try{q("Loading candidates...","loading");const{data:x,error:R}=await X.from("candidates").select("id, name").eq("status","INTERVIEW_SCHEDULED").order("name");if(R)throw R;c(x||[]),q("Candidates loaded successfully","success")}catch(x){console.error("Error loading scheduled candidates:",x),q("Failed to load candidates","error")}},H=()=>{let x=[...l];h&&(x=x.filter(R=>R.candidates?.name.toLowerCase().includes(h.toLowerCase())||R.candidates?.phone.toLowerCase().includes(h.toLowerCase())||(R.outcome||"").toLowerCase().includes(h.toLowerCase()))),p!=="all"&&(p==="scheduled"?x=x.filter(R=>!R.attended&&!R.outcome):p==="won"?x=x.filter(R=>R.outcome==="Won"):p==="lost"&&(x=x.filter(R=>R.outcome==="Lost"))),x.sort((R,G)=>{const N=R[v],z=G[v];return new Date(z).getTime()-new Date(N).getTime()}),o(x)},se=async x=>{x.preventDefault();try{if(q(j?"Updating interview...":"Scheduling interview...","loading"),!j&&M.candidate_id){const{data:R}=await X.from("interviews").select("id").eq("candidate_id",M.candidate_id).eq("status","scheduled");if(R&&R.length>0){q("This candidate already has a scheduled interview","error");return}}if(j){const{error:R}=await X.from("interviews").update({...M,status:M.outcome?"completed":"scheduled"}).eq("id",j.id);if(R)throw R;if(M.outcome){const G=M.outcome==="Won"?"WON":"LOST",{error:N}=await X.from("candidates").update({status:G}).eq("id",j.candidate_id);if(N)throw console.error("Error updating candidate status:",N),N}await X.from("updates").insert({linked_to_type:"interview",linked_to_id:j.id,user_id:B?.id,update_text:`Updated interview - ${M.attended?"Attended":"Scheduled"}${M.outcome?`: ${M.outcome}`:""}`}),q("Interview updated successfully","success")}else{const R=M.date_time,G=new Date(R);G.setHours(14,0,0,0);const N=G.toISOString(),{error:z}=await X.from("interviews").insert({candidate_id:M.candidate_id,date_time:N,location:"Office",assigned_staff:B?.id,attended:!1,outcome:null,notes:"",status:"scheduled"});if(z)throw z;const{error:Y}=await X.from("candidates").update({status:"INTERVIEW_SCHEDULED",scheduled_date:N}).eq("id",M.candidate_id);if(Y)throw console.error("Error updating candidate status:",Y),Y;await X.from("updates").insert({linked_to_type:"interview",linked_to_id:M.candidate_id,user_id:B?.id,update_text:`Interview scheduled for ${G.toDateString()} at 2:00 PM`}),q("Interview scheduled successfully","success")}await Promise.all([W(),D()]),A(!1),Q()}catch(R){console.error("Error saving interview:",R),q(`Failed to save interview: ${R instanceof Error?R.message:"Unknown error"}`,"error")}},Q=()=>{C({candidate_id:"",date_time:"",attended:!1,outcome:""}),P(null)},fe=x=>x.attended&&x.outcome==="Won"?"won":x.attended&&x.outcome==="Lost"||!x.attended&&x.outcome==="Lost"?"lost":!x.attended&&x.outcome?"no-show":x.needsAttention?"needs-attention":"scheduled",ke=async(x,R)=>{try{q(`Setting outcome to ${R}...`,"loading");const{error:G}=await X.from("interviews").update({attended:!0,outcome:R}).eq("id",x.id);if(G)throw G;const N=R==="Won"?"WON":"LOST",{error:z}=await X.from("candidates").update({status:N}).eq("id",x.candidate_id);if(z)throw console.error("Error updating candidate status:",z),z;await X.from("updates").insert({linked_to_type:"interview",linked_to_id:x.id,user_id:B?.id,update_text:`Interview outcome set to ${R}`}),await Promise.all([W(),D()]),q(`Interview outcome set to ${R}`,"success")}catch(G){console.error("Error setting outcome:",G),q(`Failed to update outcome: ${G instanceof Error?G.message:"Unknown error"}`,"error")}},je=x=>{Z({open:!0,interview:x,dateTime:""})},re=async()=>{if(!F.interview||!F.dateTime)return;const x=F.interview;try{const R={date_time:F.dateTime,status:"scheduled",attended:!1,outcome:null};q("Rescheduling interview...","loading");const G=new Date(F.dateTime);G.setHours(14,0,0,0);const N=G.toISOString(),{error:z}=await X.from("interviews").update({date_time:N,attended:!1,outcome:null}).eq("id",x.id);if(z)throw z;const{error:Y}=await X.from("candidates").update({status:"INTERVIEW_SCHEDULED",scheduled_date:N}).eq("id",x.candidate_id);if(Y)throw console.error("Error updating candidate status:",Y),Y;await X.from("updates").insert({linked_to_type:"interview",linked_to_id:x.id,user_id:B?.id,update_text:`Interview rescheduled to ${oe(N)} at 2:00 PM`}),Z({open:!1,interview:null,dateTime:""}),await W(),q("Interview rescheduled successfully","success")}catch(R){console.error("Error rescheduling interview:",R),q("Failed to reschedule interview","error")}};k.useMemo(()=>Date.now(),[]);const oe=x=>{const R=new Date(x),G=R.getDate(),N=R.toLocaleString("default",{month:"short"}),z=R.getFullYear();return`${R.toLocaleString("default",{weekday:"short"})} ${G}${G===1||G===21||G===31?"st":G===2||G===22?"nd":G===3||G===23?"rd":"th"} ${N} ${z}`},ne=x=>{if(x.outcome==="Won"||x.outcome==="Lost")return"-";const R=x.date_time,G=new Date(R).getTime()-Date.now();if(G<=0)return"-";const N=Math.floor(G/(1e3*60*60)),z=Math.floor(G%(1e3*60*60)/(1e3*60));if(N>=24){const Y=Math.floor(N/24),he=N%24;return`${Y}d ${he}h`}return`${N}h ${z}m`};return S?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),i.jsx("div",{className:"space-y-4",children:[...Array(5)].map((x,R)=>i.jsx("div",{className:"bg-white p-6 rounded-lg shadow h-32"},R))})]})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Interviews"}),i.jsx("p",{className:"text-gray-600",children:"Schedule and track candidate interviews"})]}),i.jsxs("button",{onClick:()=>A(!0),className:"flex items-center px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:[i.jsx(un,{className:"w-4 h-4 mr-2"}),"Schedule Interview"]})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx(ra,{searchTerm:h,onSearchChange:m,filterStatus:p,onFilterChange:y,statusOptions:ge,placeholder:"Search by candidate name or outcome..."}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Sort by:"}),i.jsxs("select",{value:v,onChange:x=>w(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[i.jsx("option",{value:"created_at",children:"Date Added"}),i.jsx("option",{value:"date_time",children:"Interview Date"}),i.jsx("option",{value:"scheduled_date",children:"Date Scheduled"})]})]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Candidate"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Countdown"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((x,R)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R+1}),i.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${fe(x)==="won"?"bg-green-50":fe(x)==="lost"||fe(x)==="no-show"?"bg-red-50":""}`,children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.candidates?.name}),i.jsx("div",{className:"text-sm text-gray-500",children:x.candidates?.phone})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.jsxs("div",{children:[i.jsx("div",{children:oe(x.date_time)}),i.jsx("div",{className:"text-gray-500",children:new Date(x.date_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx(Pi,{status:fe(x),type:"interview"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne(x)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsx("div",{className:"relative inline-flex items-center gap-2",children:i.jsxs("select",{onChange:G=>{const N=G.target.value;N==="WON"&&ke(x,"Won"),N==="LOST"&&ke(x,"Lost"),N==="RESCHEDULE"&&je(x),G.currentTarget.selectedIndex=0},className:"px-2 py-1 border border-gray-300 rounded text-sm bg-white",defaultValue:"",title:"Actions",children:[i.jsx("option",{value:"",disabled:!0,children:"Actions"}),i.jsx("option",{value:"WON",children:"Won"}),i.jsx("option",{value:"LOST",children:"Lost"}),i.jsx("option",{value:"RESCHEDULE",children:"Reschedule"})]})})})]},x.id))})]})})}),s.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(vt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No interviews found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:h||p!=="all"?"Try adjusting your search or filter criteria.":"Get started by scheduling your first interview."})]}),E&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-screen overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:j?"Edit Interview":"Schedule New Interview"}),i.jsxs("form",{onSubmit:se,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Candidate"}),i.jsxs("select",{required:!0,value:M.candidate_id,onChange:x=>C({...M,candidate_id:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",disabled:!!j,children:[i.jsx("option",{value:"",children:"Select candidate"}),u.map(x=>i.jsx("option",{value:x.id,children:x.name},x.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date (Time will be set to 2:00 PM)"}),i.jsx("input",{type:"date",required:!0,value:M.date_time,onChange:x=>{const R=new Date(x.target.value);R.setHours(14,0,0,0),C({...M,date_time:R.toISOString().split("T")[0]})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),j&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"attended",checked:M.attended,onChange:x=>C({...M,attended:x.target.checked}),className:"h-4 w-4 text-nestalk-primary focus:ring-nestalk-primary border-gray-300 rounded"}),i.jsx("label",{htmlFor:"attended",className:"ml-2 block text-sm font-medium text-gray-700",children:"Candidate attended"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outcome"}),i.jsxs("select",{value:M.outcome,onChange:x=>C({...M,outcome:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select outcome"}),we.map(x=>i.jsx("option",{value:x,children:x},x))]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{A(!1),Q()},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 transition-colors",children:[j?"Update":"Schedule"," Interview"]})]})]})]})})}),F.open&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>Z({open:!1,interview:null,dateTime:""}),children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",onClick:x=>x.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reschedule Interview"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Date (Time will be set to 2:00 PM)"}),i.jsx("input",{type:"date",value:F.dateTime,onChange:x=>Z(R=>({...R,dateTime:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>Z({open:!1,interview:null,dateTime:""}),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsxs("button",{type:"button",onClick:re,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors inline-flex items-center justify-center gap-2",children:[i.jsx(Ti,{className:"w-4 h-4"})," Confirm"]})]})]})]})})})]})}function Pv(){const[l,n]=k.useState([]),[s,o]=k.useState([]),[u,c]=k.useState([]),[h,m]=k.useState(!0),[p,y]=k.useState("meetings"),[v,w]=k.useState(null),[S,I]=k.useState(!1),[E,A]=k.useState(null),[j,P]=k.useState(null),[M,C]=k.useState({title:"",meeting_date:new Date().toISOString().split("T")[0],notes:[]}),{user:F,staff:Z,staffList:B}=Wt();k.useEffect(()=>{Promise.all([q(),ge(),we()])},[]);const q=async()=>{try{const{data:N,error:z}=await X.from("updates").select(`
          *,
          staff:user_id (name, username)
        `).eq("archived",!1).order("created_at",{ascending:!1}).limit(50);if(z)throw z;n(N||[])}catch(N){console.error("Error loading updates:",N)}},ge=async()=>{try{const N=new Date().toISOString().split("T")[0],z=new Date;z.setDate(z.getDate()-2);const Y=z.toISOString().split("T")[0],[he,ve,U]=await Promise.all([X.from("candidates").select("id, name, phone, source, role, inquiry_date, scheduled_date, status, notes, assigned_to").in("status",["WILL GET BACK","CALL AGAIN"]).lte("scheduled_date",N).eq("assigned_to",F?.id),X.from("clients").select("id, name_company, contact_info, inquiry_date, reminder_date, status, notes, assigned_to").lte("reminder_date",N).not("status","eq","profiles-sent").not("status","eq","closed-lost").eq("assigned_to",F?.id),X.from("training_leads").select("id, name, phone, inquiry_date, reminder_date, status, notes, assigned_to").lte("reminder_date",N).not("status","eq","completed").not("status","eq","dropped-off").eq("assigned_to",F?.id)]),te=[...(he.data||[]).map(ie=>({...ie,type:"candidate",reminder_date:ie.scheduled_date||ie.inquiry_date})),...(ve.data||[]).map(ie=>({...ie,name:ie.name_company,phone:ie.contact_info,type:"client",reminder_date:ie.reminder_date})),...(U.data||[]).map(ie=>({...ie,type:"training",reminder_date:ie.reminder_date}))];te.sort((ie,Ne)=>new Date(ie.reminder_date).getTime()-new Date(Ne.reminder_date).getTime()),o(te)}catch(N){console.error("Error loading reminders:",N)}finally{m(!1)}},we=async()=>{try{const{data:N,error:z}=await X.from("meeting_notes").select(`
          *,
          staff:created_by (name, username)
        `).order("created_at",{ascending:!1});if(z)throw z;c(N||[])}catch(N){console.error("Error loading meeting notes:",N)}},W=async N=>{N.preventDefault();try{const z=M.notes.filter(Y=>Y.trim()!=="").map(Y=>Y.startsWith("- [ ] ")?Y:`- [ ] ${Y}`);if(E){const{error:Y}=await X.from("meeting_notes").update({title:M.title,meeting_date:M.meeting_date,notes:z}).eq("id",E.id);if(Y)throw Y}else{const{error:Y}=await X.from("meeting_notes").insert({title:M.title,meeting_date:M.meeting_date,notes:z,created_by:F?.id});if(Y)throw Y}C({title:"",meeting_date:new Date().toISOString().split("T")[0],notes:[]}),I(!1),A(null),we()}catch(z){console.error("Error saving meeting note:",z)}},D=N=>{A(N),C({title:N.title,meeting_date:N.meeting_date,notes:Array.isArray(N.notes)?N.notes.map(z=>z.startsWith("- [ ] ")?z:`- [ ] ${z}`):[]}),I(!0)},H=async(N,z)=>{try{const Y=j||u.find(te=>te.id===N);if(!Y||!Array.isArray(Y.notes))return;const he=[...Y.notes],ve=he[z];he[z]=ve.includes("- [x]")?ve.replace("- [x]","- [ ]"):ve.replace("- [ ]","- [x]");const{error:U}=await X.from("meeting_notes").update({notes:he}).eq("id",N);if(U)throw U;we(),j&&j.id===N&&P({...j,notes:he})}catch(Y){console.error("Error toggling note status:",Y)}},se=async(N,z,Y)=>{try{const he=u.find(Ne=>Ne.id===N);if(!he||!Array.isArray(he.notes))return;const ve=prompt("Edit note:",Y.replace(/^- \[([ x])\] /,""));if(!ve)return;const U=[...he.notes],te=Y.includes("- [x]");U[z]=`- [${te?"x":" "}] ${ve}`;const{error:ie}=await X.from("meeting_notes").update({notes:U}).eq("id",N);if(ie)throw ie;we()}catch(he){console.error("Error editing note:",he)}},Q=async N=>{if(confirm("Are you sure you want to delete this meeting note? This action cannot be undone."))try{const{error:z}=await X.from("meeting_notes").delete().eq("id",N);if(z)throw z;we()}catch(z){console.error("Error deleting meeting:",z)}},fe=async(N,z)=>{try{const Y=u.find(U=>U.id===N);if(!Y||!Array.isArray(Y.notes)||!confirm("Are you sure you want to delete this note?"))return;const he=Y.notes.filter((U,te)=>te!==z);he.length===0&&he.push("");const{error:ve}=await X.from("meeting_notes").update({notes:he}).eq("id",N);if(ve)throw ve;we()}catch(Y){console.error("Error deleting note:",Y)}},ke=N=>{switch(N){case"candidate":return i.jsx(Qn,{className:"w-4 h-4"});case"client":return i.jsx(Qn,{className:"w-4 h-4"});case"training_lead":return i.jsx(Qn,{className:"w-4 h-4"});case"interview":return i.jsx(vt,{className:"w-4 h-4"});default:return i.jsx(ql,{className:"w-4 h-4"})}},je=N=>{switch(N){case"candidate":return"bg-blue-100 text-blue-600";case"client":return"bg-green-100 text-green-600";case"training_lead":return"bg-purple-100 text-purple-600";case"interview":return"bg-orange-100 text-orange-600";default:return"bg-gray-100 text-gray-600"}},re=N=>{const z=new Date().toISOString().split("T")[0];return N<z},oe=N=>{const z=new Date,Y=new Date(N),he=z.getTime()-Y.getTime();return Math.ceil(he/(1e3*60*60*24))},ne=async(N,z)=>{try{const Y=new Date;Y.setDate(Y.getDate()+1);const he=Y.toISOString().split("T")[0];z==="candidate"?await X.from("candidates").update({scheduled_date:he}).eq("id",N):z==="client"?await X.from("clients").update({reminder_date:he}).eq("id",N):z==="training"&&await X.from("training_leads").update({reminder_date:he}).eq("id",N),ge()}catch(Y){console.error("Error marking reminder as read:",Y)}},x=async()=>{try{const N=new Date;N.setDate(N.getDate()+1);const z=N.toISOString().split("T")[0];await Promise.all([X.from("candidates").update({scheduled_date:z}).in("status",["WILL GET BACK","CALL AGAIN"]).lte("scheduled_date",new Date().toISOString().split("T")[0]).eq("assigned_to",F?.id),X.from("clients").update({reminder_date:z}).lte("reminder_date",new Date().toISOString().split("T")[0]).eq("assigned_to",F?.id),X.from("training_leads").update({reminder_date:z}).lte("reminder_date",new Date().toISOString().split("T")[0]).eq("assigned_to",F?.id)]),ge()}catch(N){console.error("Error clearing all reminders:",N)}},R=async()=>{try{const{error:N}=await X.from("updates").update({archived:!0}).eq("archived",!1);if(N)throw N;q()}catch(N){console.error("Error clearing activity feed:",N)}},G=async N=>{try{const{error:z}=await X.from("updates").update({archived:!0}).eq("id",N);if(z)throw z;q()}catch(z){console.error("Error archiving update:",z)}};return h?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),i.jsx("div",{className:"space-y-4",children:[...Array(5)].map((N,z)=>i.jsx("div",{className:"bg-white p-6 rounded-lg shadow h-24"},z))})]})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Updates & Reminders"}),i.jsx("p",{className:"text-gray-600",children:"Track activity and manage follow-up reminders"})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"border-b border-gray-200",children:i.jsxs("nav",{className:"-mb-px flex space-x-8",children:[i.jsx("button",{onClick:()=>y("meetings"),className:`py-2 px-1 border-b-2 font-medium text-sm ${p==="meetings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Meeting Notes"}),i.jsx("button",{onClick:()=>y("feed"),className:`py-2 px-1 border-b-2 font-medium text-sm ${p==="feed"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Activity Feed"}),i.jsxs("button",{onClick:()=>y("reminders"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center ${p==="reminders"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Reminders",s.length>0&&i.jsx("span",{className:"ml-2 bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full",children:s.length})]})]})})}),i.jsxs("div",{className:"mb-6 flex justify-end space-x-2",children:[p==="meetings"&&i.jsxs("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center",children:[i.jsx(un,{className:"w-4 h-4 mr-2"}),"Add Meeting Notes"]}),p==="feed"&&l.length>0&&i.jsx("button",{onClick:R,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Clear Activity Feed"}),p==="reminders"&&s.length>0&&i.jsx("button",{onClick:x,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Clear All Reminders"})]}),p==="meetings"?i.jsx("div",{className:"space-y-6",children:u.length>0?u.map(N=>i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.title}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[i.jsx(vt,{className:"w-4 h-4 mr-1"}),new Date(N.meeting_date).toLocaleDateString(),i.jsx("span",{className:"mx-2",children:""}),i.jsx(Qn,{className:"w-4 h-4 mr-1"}),N.staff?.name," (",N.staff?.username,")"]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>P(N),className:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"View and manage tasks",children:i.jsx(Wl,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>D(N),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit meeting",children:i.jsx(Xn,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>Q(N.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete meeting",children:i.jsx(Pl,{className:"w-4 h-4"})})]})]}),i.jsx("div",{className:"space-y-2",children:Array.isArray(N.notes)?N.notes.map((z,Y)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg group hover:bg-gray-100",children:[i.jsxs("div",{className:"flex items-center space-x-3 flex-grow",children:[i.jsx("button",{onClick:()=>H(N.id,Y),className:`p-1 rounded-full ${z.startsWith("")?"text-green-600 hover:bg-green-100":"text-gray-400 hover:bg-gray-200"}`,children:z.startsWith("")?i.jsx(Tl,{className:"w-5 h-5"}):i.jsx(Tl,{className:"w-5 h-5"})}),i.jsx("p",{className:`text-sm ${z.startsWith("")?"text-gray-500 line-through":"text-gray-900"}`,children:z.startsWith("")?z.substring(1).trim():z})]}),i.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>se(N.id,Y,z),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",children:i.jsx(Xn,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>fe(N.id,Y),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:i.jsx(Pl,{className:"w-4 h-4"})})]})]},Y)):null})]},N.id)):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Wl,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No meeting notes yet"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start by adding your first meeting notes with deliverables."})]})}):p==="feed"?i.jsx("div",{className:"space-y-4",children:l.length>0?l.map(N=>i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:`p-2 rounded-lg ${je(N.linked_to_type)}`,children:ke(N.linked_to_type)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[N.staff?.username||"System",":"]}),i.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:N.linked_to_type.replace("_"," ")}),i.jsx("span",{className:"text-sm text-gray-500",children:""}),i.jsx("span",{className:"text-sm text-gray-500",children:new Date(N.created_at).toLocaleDateString()}),i.jsx("span",{className:"text-sm text-gray-500",children:""}),i.jsx("span",{className:"text-sm text-gray-500",children:new Date(N.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),i.jsx("button",{onClick:()=>G(N.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Archive this update",children:i.jsx(Pl,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"mt-2 text-gray-700",children:N.update_text}),N.reminder_date&&i.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[i.jsx(_i,{className:"w-4 h-4 mr-1"}),i.jsxs("span",{children:["Reminder set for: ",new Date(N.reminder_date).toLocaleDateString()]})]})]})]})},N.id)):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ql,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No activity yet"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Activity updates will appear here as team members make changes."})]})}):i.jsx("div",{className:"space-y-4",children:s.length>0?s.map(N=>i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:`p-2 rounded-lg ${re(N.reminder_date)?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-600"}`,children:re(N.reminder_date)?i.jsx(_f,{className:"w-4 h-4"}):i.jsx(_i,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("h3",{className:"text-base font-semibold text-gray-900",children:N.name}),N.phone&&i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(lu,{className:"w-3 h-3 mr-1"}),N.phone]}),(N.source||N.role)&&i.jsxs("span",{className:"text-xs text-gray-500",children:["(",N.source,")"]}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.type==="candidate"?"bg-blue-100 text-blue-800":N.type==="client"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:N.type})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:`text-sm font-medium ${re(N.reminder_date)?"text-red-600":"text-yellow-600"}`,children:re(N.reminder_date)?`${oe(N.reminder_date)} days overdue`:"Due Today"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Inquiry: ",new Date(N.inquiry_date).toLocaleDateString()]})]})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",N.status]}),re(N.reminder_date)&&i.jsx("p",{className:"text-sm text-red-600 font-medium",children:" Date passed - No status update"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>ne(N.id,N.type),className:"text-sm text-green-600 hover:text-green-800",children:"Mark as Read"}),i.jsx("button",{onClick:()=>w(v===N.id?null:N.id),className:"text-sm text-blue-600 hover:text-blue-800",children:v===N.id?"Hide Details":"View Details"})]})]}),v===N.id&&i.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:i.jsx("p",{className:"text-sm text-gray-700",children:N.notes||"No notes available"})})]})]})},`${N.type}-${N.id}`)):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(_i,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No reminders"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You're all caught up! Reminders will appear here when they're due."})]})}),S&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:E?"Edit Meeting Notes":"Add Meeting Notes"}),i.jsxs("form",{onSubmit:W,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Title"}),i.jsx("input",{type:"text",required:!0,value:M.title,onChange:N=>C({...M,title:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Weekly Team Meeting"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Date"}),i.jsx("input",{type:"date",required:!0,value:M.meeting_date,onChange:N=>C({...M,meeting_date:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meeting Notes & Tasks"}),i.jsx("textarea",{placeholder:"Enter meeting notes (one per line)",value:M.notes.join(`
`),onChange:N=>C({...M,notes:N.target.value.split(`
`)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm min-h-[200px]"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{I(!1),A(null),C({title:"",meeting_date:new Date().toISOString().split("T")[0],notes:[]})},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[E?"Update":"Save"," Meeting Notes"]})]})]})]})})}),j&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:j.title}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[i.jsx(vt,{className:"w-4 h-4 mr-1"}),new Date(j.meeting_date).toLocaleDateString(),i.jsx("span",{className:"mx-2",children:""}),i.jsx(Qn,{className:"w-4 h-4 mr-1"}),j.staff?.name||"Unknown"," (",j.staff?.username||"N/A",")"]})]}),i.jsx("button",{onClick:()=>P(null),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",children:i.jsx(uu,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:[Array.isArray(j.notes)&&j.notes.map((N,z)=>i.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg group hover:bg-gray-100",children:i.jsxs("div",{className:"flex items-center space-x-3 flex-grow",children:[i.jsx("button",{onClick:()=>H(j.id,z),className:`p-1 rounded-full transition-colors ${N.includes("- [x]")?"text-green-600 hover:bg-green-100":"text-gray-400 hover:bg-gray-200"}`,title:N.includes("- [x]")?"Mark as not done":"Mark as done",children:i.jsx(Tl,{className:"w-5 h-5"})}),i.jsx("p",{className:`text-sm transition-all ${N.includes("- [x]")?"text-gray-500 line-through":"text-gray-900"}`,children:N.replace(/^- \[([ x])\] /,"")})]})},z)),(!Array.isArray(j.notes)||j.notes.length===0)&&i.jsx("div",{className:"text-center py-6 text-gray-500",children:i.jsx("p",{children:"No notes available"})})]})]})})})]})}function Rv(){const l=Yt(),n=[{name:"Data Entry",href:"/reporting/data-entry",icon:Xn},{name:"Reports",href:"/reporting/reports",icon:Wl},{name:"Dashboards",href:"/reporting/dashboards",icon:pv}];return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KPI Reporting System"}),i.jsx("p",{className:"text-gray-600",children:"Track and analyze key performance indicators"})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"border-b border-gray-200",children:i.jsx("nav",{className:"-mb-px flex space-x-8",children:n.map(s=>i.jsxs(eu,{to:s.href,className:({isActive:o})=>`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${o||l.pathname==="/reporting"&&s.href==="/reporting/data-entry"?"border-nestalk-primary text-nestalk-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(s.icon,{className:"w-4 h-4 mr-2"}),s.name]},s.name))})})}),i.jsx(Hh,{})]})}function Oh(){const[l,n]=k.useState([]),[s,o]=k.useState(""),[u,c]=k.useState({}),[h,m]=k.useState(!0),[p,y]=k.useState(!1),[v,w]=k.useState([]),{user:S}=Wt();k.useEffect(()=>{I()},[]),k.useEffect(()=>{s&&E(s)},[s]);const I=async()=>{try{const{data:C,error:F}=await X.from("kpi_targets").select("*").order("role",{ascending:!0}).order("kpi_name",{ascending:!0});if(F)throw F;const Z=[...new Set(C?.map(B=>B.role)||[])];w(Z),n(C||[]),Z.length>0&&!s&&o(Z[0])}catch(C){console.error("Error loading KPI targets:",C)}finally{m(!1)}},E=C=>{const F=l.filter(B=>B.role===C),Z={};F.forEach(B=>{Z[B.kpi_name]={kpi_name:B.kpi_name,actual_value:"",comments:"",actual_event_date:""}}),c(Z)},A=(C,F,Z)=>{let B,q;return Z?(B=(F-C)/F*100,C<=F?q="Green":C<=F*1.2?q="Amber":q="Red"):(B=(C-F)/F*100,C>=F?q="Green":C>=F*.8?q="Amber":q="Red"),{variance:B,ragStatus:q}},j=(C,F,Z)=>{c(B=>({...B,[C]:{...B[C],[F]:Z}}))},P=async C=>{C.preventDefault(),y(!0);try{const F=[];for(const[B,q]of Object.entries(u)){if(q.actual_value.trim()==="")continue;const ge=l.find(H=>H.kpi_name===B&&H.role===s);if(!ge)continue;const we=parseFloat(q.actual_value);if(isNaN(we))continue;const{variance:W,ragStatus:D}=A(we,ge.target_value,ge.is_inverse);F.push({role:s,kpi_name:B,actual_value:we,comments:q.comments||null,variance:Math.round(W*100)/100,rag_status:D,actual_event_date:q.actual_event_date||null,created_by:S?.id})}if(F.length===0){alert("Please enter at least one KPI value");return}const{error:Z}=await X.from("kpi_records").insert(F);if(Z)throw Z;E(s),alert(`Successfully saved ${F.length} KPI record(s)`)}catch(F){console.error("Error saving KPI records:",F),alert("Error saving KPI records. Please try again.")}finally{y(!1)}},M=()=>l.filter(C=>C.role===s);return h?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-nestalk-primary"})}):i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Role"}),i.jsxs("select",{value:s,onChange:C=>o(C.target.value),className:"w-full max-w-xs px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select a role"}),v.map(C=>i.jsx("option",{value:C,children:C},C))]})]}),s&&i.jsxs("form",{onSubmit:P,children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:M().map(C=>i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.kpi_name}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[i.jsx(vv,{className:"w-4 h-4 mr-1"}),i.jsxs("span",{children:["Target: ",C.target_value," ",C.unit]})]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Actual Value (",C.unit,")"]}),i.jsx("input",{type:"number",step:"0.01",value:u[C.kpi_name]?.actual_value||"",onChange:F=>j(C.kpi_name,"actual_value",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",placeholder:"Enter actual value"})]}),C.requires_event_date&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),i.jsx("input",{type:"date",value:u[C.kpi_name]?.actual_event_date||"",onChange:F=>j(C.kpi_name,"actual_event_date",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comments (Optional)"}),i.jsx("textarea",{rows:2,value:u[C.kpi_name]?.comments||"",onChange:F=>j(C.kpi_name,"comments",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",placeholder:"Add any comments..."})]})]}),C.is_inverse&&i.jsxs("div",{className:"mt-3 text-xs text-blue-600 bg-blue-50 p-2 rounded",children:[i.jsx(jf,{className:"w-3 h-3 inline mr-1"}),"Lower values are better for this KPI"]})]},C.id))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{type:"submit",disabled:p,className:"flex items-center px-6 py-2 bg-nestalk-primary text-white rounded-lg hover:bg-nestalk-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[i.jsx(gv,{className:"w-4 h-4 mr-2"}),p?"Saving...":"Save KPI Records"]})})]}),!s&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(BarChart3,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Select a Role"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Choose a role above to start entering KPI data."})]})]})}function Lv(){const[l,n]=k.useState([]),[s,o]=k.useState([]),[u,c]=k.useState(!0),[h,m]=k.useState(""),[p,y]=k.useState("all"),[v,w]=k.useState(""),[S,I]=k.useState({start:"",end:""}),[E,A]=k.useState([]),[j,P]=k.useState(1),[M]=k.useState(20),[C,F]=k.useState(null);k.useEffect(()=>{Z()},[]),k.useEffect(()=>{B()},[l,h,p,v,S]);const Z=async()=>{try{const{data:Q,error:fe}=await X.from("kpi_records").select(`
          *,
          staff:created_by (name, username)
        `).order("recorded_at",{ascending:!1});if(fe)throw fe;const ke=[...new Set(Q?.map(je=>je.role)||[])];A(ke),n(Q||[])}catch(Q){console.error("Error loading KPI records:",Q)}finally{c(!1)}},B=()=>{let Q=l;h&&(Q=Q.filter(fe=>fe.role.toLowerCase().includes(h.toLowerCase())||fe.kpi_name.toLowerCase().includes(h.toLowerCase())||fe.comments?.toLowerCase().includes(h.toLowerCase()))),p!=="all"&&(Q=Q.filter(fe=>fe.role===p)),v&&(Q=Q.filter(fe=>{const ke=new Date(fe.recorded_at),je=new Date(v);return ke.getMonth()===je.getMonth()&&ke.getFullYear()===je.getFullYear()})),S.start&&S.end&&(Q=Q.filter(fe=>{const ke=new Date(fe.recorded_at).toISOString().split("T")[0];return ke>=S.start&&ke<=S.end})),o(Q),P(1)},q=Q=>{let fe="asc";C&&C.key===Q&&C.direction==="asc"&&(fe="desc"),F({key:Q,direction:fe});const ke=[...s].sort((je,re)=>{let oe=je[Q],ne=re[Q];return Q==="recorded_at"&&(oe=new Date(oe).getTime(),ne=new Date(ne).getTime()),oe<ne?fe==="asc"?-1:1:oe>ne?fe==="asc"?1:-1:0});o(ke)},ge=Q=>{switch(Q){case"Green":return"bg-green-100 text-green-800";case"Amber":return"bg-yellow-100 text-yellow-800";case"Red":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},we=Q=>Q>0?i.jsx(Jn,{className:"w-4 h-4 text-green-600"}):Q<0?i.jsx(xv,{className:"w-4 h-4 text-red-600"}):i.jsx(fv,{className:"w-4 h-4 text-gray-600"}),W=j*M,D=W-M,H=s.slice(D,W),se=Math.ceil(s.length/M);return u?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-nestalk-primary"})}):i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[i.jsx("div",{className:"flex-1",children:i.jsx(ra,{searchTerm:h,onSearchChange:m,filterStatus:p,onFilterChange:y,statusOptions:E,placeholder:"Search by role, KPI name, or comments..."})}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),i.jsx("input",{type:"month",value:v,onChange:Q=>w(Q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",value:S.start,onChange:Q=>I(fe=>({...fe,start:Q.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),i.jsx("input",{type:"date",value:S.end,onChange:Q=>I(fe=>({...fe,end:Q.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]})]})]}),i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",D+1,"-",Math.min(W,s.length)," of ",s.length," records"]})})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("role"),children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("kpi_name"),children:"KPI"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("actual_value"),children:"Actual Value"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("variance"),children:"Variance"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("rag_status"),children:"RAG Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Comments"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("recorded_at"),children:"Recorded At"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(Q=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Q.role}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.kpi_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.actual_value}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.jsxs("div",{className:"flex items-center",children:[we(Q.variance),i.jsxs("span",{className:"ml-1",children:[Q.variance.toFixed(1),"%"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ge(Q.rag_status)}`,children:Q.rag_status})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:Q.comments||"-"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[i.jsx("div",{children:new Date(Q.recorded_at).toLocaleDateString()}),i.jsx("div",{className:"text-xs text-gray-500",children:new Date(Q.recorded_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>handleEdit(Q),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),i.jsx("button",{onClick:()=>handleDelete(Q.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},Q.id))})]})})}),se>1&&i.jsx("div",{className:"mt-6 flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>P(Q=>Math.max(Q-1,1)),disabled:j===1,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),i.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",j," of ",se]}),i.jsx("button",{onClick:()=>P(Q=>Math.min(Q+1,se)),disabled:j===se,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})}),s.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(vt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No records found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:h||p!=="all"||v||S.start||S.end?"Try adjusting your search or filter criteria.":"No KPI records have been entered yet."})]})]})}function Iv(){const[l,n]=k.useState([]),[s,o]=k.useState([]),[u,c]=k.useState(!0),[h,m]=k.useState("all"),[p,y]=k.useState({start:"",end:""}),[v,w]=k.useState([]),[S,I]=k.useState({totalAdded:0,totalScheduled:0,totalLost:0}),[E,A]=k.useState({total:0,won:0,lost:0,rescheduled:0});k.useEffect(()=>{Promise.all([j(),P(),M()])},[]),k.useEffect(()=>{M()},[p]);const j=async()=>{try{const{data:W,error:D}=await X.from("kpi_records").select("*").order("recorded_at",{ascending:!1});if(D)throw D;const H=[...new Set(W?.map(se=>se.role)||[])];w(H),n(W||[])}catch(W){console.error("Error loading KPI records:",W)}},P=async()=>{try{const{data:W,error:D}=await X.from("kpi_targets").select("*");if(D)throw D;o(W||[])}catch(W){console.error("Error loading KPI targets:",W)}finally{c(!1)}},M=async()=>{try{let W=X.from("candidates").select("id, status, created_at, scheduled_date"),D=X.from("interviews").select("id, date_time, created_at, attended, outcome");p.start&&p.end&&(W=W.gte("created_at",p.start).lte("created_at",p.end+"T23:59:59Z"),D=D.gte("created_at",p.start).lte("created_at",p.end+"T23:59:59Z"));const[{data:H,error:se},{data:Q,error:fe}]=await Promise.all([W,D]);if(se)throw se;if(fe)throw fe;const ke=H?.length||0,je=H?.filter(G=>G.status==="INTERVIEW_SCHEDULED").length||0,re=H?.filter(G=>G.status==="LOST").length||0,oe=Q?.length||0,ne=Q?.filter(G=>G.attended&&G.outcome==="Won").length||0,x=Q?.filter(G=>G.attended&&G.outcome==="Lost").length||0,R=Q?.filter(G=>!G.attended&&!G.outcome&&new Date(G.created_at).getTime()!==new Date(G.date_time).getTime()).length||0;I({totalAdded:ke,totalScheduled:je,totalLost:re}),A({total:oe,won:ne,lost:x,rescheduled:R})}catch(W){console.error("Error loading recruitment aggregates:",W)}},C=()=>{let W=l;return h!=="all"&&(W=W.filter(D=>D.role===h)),p.start&&p.end&&(W=W.filter(D=>{const H=new Date(D.recorded_at).toISOString().split("T")[0];return H>=p.start&&H<=p.end})),W},F=()=>{const H=C().filter(se=>se.kpi_name.toLowerCase().includes("revenue")).reduce((se,Q)=>{const fe=new Date(Q.recorded_at).toLocaleDateString("en-US",{year:"numeric",month:"short"});return se[fe]||(se[fe]=[]),se[fe].push(Q.actual_value),se},{});return Object.entries(H).map(([se,Q])=>({month:se,revenue:Q.reduce((fe,ke)=>fe+ke,0)/Q.length})).sort((se,Q)=>new Date(se.month).getTime()-new Date(Q.month).getTime())},Z=()=>{const D=C().reduce((H,se)=>{const Q=`${se.role}-${se.kpi_name}`;if(H[Q])H[Q].actual=(H[Q].actual*H[Q].count+se.actual_value)/(H[Q].count+1),H[Q].count++;else{const fe=s.find(ke=>ke.role===se.role&&ke.kpi_name===se.kpi_name);H[Q]={name:se.kpi_name,actual:se.actual_value,target:fe?.target_value||0,rag:se.rag_status,count:1}}return H},{});return Object.values(D).map(({count:H,...se})=>se)},B=()=>{const D=C().reduce((H,se)=>{const Q=`${se.role}-${se.kpi_name}`;return H[Q]||(H[Q]={role:se.role,kpi:se.kpi_name,green:0,amber:0,red:0,total:0}),H[Q][se.rag_status.toLowerCase()]++,H[Q].total++,H},{});return Object.values(D)},q=F(),ge=Z(),we=B();return u?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-nestalk-primary"})}):i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6 flex flex-col lg:flex-row gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),i.jsxs("select",{value:h,onChange:W=>m(W.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Roles"}),v.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",value:p.start,onChange:W=>y(D=>({...D,start:W.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),i.jsx("input",{type:"date",value:p.end,onChange:W=>y(D=>({...D,end:W.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nestalk-primary focus:border-transparent"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[i.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:i.jsx(Ys,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Candidates Added"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.totalAdded})]})]})}),i.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:i.jsx(vt,{className:"w-5 h-5 text-purple-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Interview Scheduled"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.totalScheduled})]})]})}),i.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:i.jsx(wv,{className:"w-5 h-5 text-red-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Candidates Lost"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.totalLost})]})]})}),i.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:i.jsx(Ti,{className:"w-5 h-5 text-green-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Interviews Won"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.won})]})]})}),i.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg",children:i.jsx(mv,{className:"w-5 h-5 text-yellow-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Interviews Rescheduled"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.rescheduled})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(Jn,{className:"w-5 h-5 text-green-600 mr-2"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Revenue Growth (Month over Month)"})]}),q.length>0?i.jsx("div",{className:"space-y-3",children:q.map((W,D)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:W.month}),i.jsxs("span",{className:"text-lg font-bold text-green-600",children:["KES ",W.revenue.toLocaleString()]})]},D))}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Jn,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),i.jsx("p",{children:"No revenue data available"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(wi,{className:"w-5 h-5 text-blue-600 mr-2"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Actual vs Target Performance"})]}),ge.length>0?i.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:ge.map((W,D)=>i.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:W.name}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W.rag==="Green"?"bg-green-100 text-green-800":W.rag==="Amber"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:W.rag})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Actual: "}),i.jsx("span",{className:"font-medium",children:W.actual.toFixed(1)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Target: "}),i.jsx("span",{className:"font-medium",children:W.target})]})]}),i.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full ${W.rag==="Green"?"bg-green-500":W.rag==="Amber"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(W.actual/W.target*100,100)}%`}})})]},D))}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(wi,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),i.jsx("p",{children:"No performance data available"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 lg:col-span-2",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(vt,{className:"w-5 h-5 text-purple-600 mr-2"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"KPI Performance Heatmap"})]}),we.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:we.map((W,D)=>i.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-2",children:[W.role," - ",W.kpi]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Green"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:i.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${W.green/W.total*100}%`}})}),i.jsx("span",{className:"text-xs font-medium",children:W.green})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Amber"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:i.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${W.amber/W.total*100}%`}})}),i.jsx("span",{className:"text-xs font-medium",children:W.amber})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Red"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:i.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${W.red/W.total*100}%`}})}),i.jsx("span",{className:"text-xs font-medium",children:W.red})]})]})]})]},D))})}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(vt,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),i.jsx("p",{children:"No heatmap data available"})]})]})]}),i.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:i.jsx(Jn,{className:"w-5 h-5 text-green-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-green-900",children:"Green KPIs"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:C().filter(W=>W.rag_status==="Green").length})]})]})}),i.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:i.jsx(Jn,{className:"w-5 h-5 text-yellow-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Amber KPIs"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:C().filter(W=>W.rag_status==="Amber").length})]})]})}),i.jsx("div",{className:"bg-red-50 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:i.jsx(Jn,{className:"w-5 h-5 text-red-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-red-900",children:"Red KPIs"}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:C().filter(W=>W.rag_status==="Red").length})]})]})}),i.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(wi,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Total Records"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:C().length})]})]})})]})]})}function Dv(){const{user:l,loading:n}=Wt();return console.log("ProtectedLayout - user:",l,"loading:",n),n?(console.log("ProtectedLayout - showing loading spinner"),i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-nestalk-primary"})})):l?(console.log("ProtectedLayout - user authenticated, showing layout with outlet"),i.jsx(kv,{})):(console.log("ProtectedLayout - no user, showing login"),i.jsx(bv,{}))}function Ov(){return console.log("AppRoutes rendering"),i.jsxs(kg,{children:[i.jsxs(yt,{path:"/",element:i.jsx(Dv,{}),children:[i.jsx(yt,{index:!0,element:i.jsx(Sv,{})}),i.jsx(yt,{path:"candidates",element:i.jsx(Nv,{})}),i.jsx(yt,{path:"clients",element:i.jsx(Ev,{})}),i.jsx(yt,{path:"training",element:i.jsx(Cv,{})}),i.jsx(yt,{path:"interviews",element:i.jsx(Tv,{})}),i.jsx(yt,{path:"updates",element:i.jsx(Pv,{})}),i.jsxs(yt,{path:"reporting",element:i.jsx(Rv,{}),children:[i.jsx(yt,{index:!0,element:i.jsx(Oh,{})}),i.jsx(yt,{path:"data-entry",element:i.jsx(Oh,{})}),i.jsx(yt,{path:"reports",element:i.jsx(Lv,{})}),i.jsx(yt,{path:"dashboards",element:i.jsx(Iv,{})})]})]}),i.jsx(yt,{path:"*",element:i.jsx(_g,{to:"/",replace:!0})})]})}function Av(){return i.jsx(nv,{children:i.jsx(Vg,{children:i.jsx(jv,{children:i.jsx(Ov,{})})})})}Pm.createRoot(document.getElementById("root")).render(i.jsx(k.StrictMode,{children:i.jsx(Av,{})}));
